import{d as e,T as l,U as t,e as a,h as o,j as s,A as i,f as d,o as n,c as u,w as c,a as b,B as p,b as f,r as m,z as y,t as r,F as g,g as h}from"./index.fbe2df72.js";var v=e({name:"GFieldCollapse",props:{mode:{type:String,default:""},label:{type:String,required:!0},tooltip:{type:String},toggle:{type:Boolean,default:!1},modelValue:{type:Boolean,default:!0},defaultLayout:{type:String,default:l.horizontal},features:{type:Array,default:()=>[]},list:Array,min:{type:Number,default:0},max:{type:Number,default:1e3},defaultNewValue:String},emits:[t],setup(e,d){const n=a([]),u=a("0"),c=a(e.defaultLayout===l.horizontal),b=o((()=>n.value.length>0&&e.features.length>0)),p=o((()=>e.features.includes(l.horizontal))),f=o((()=>e.features.includes(l.vertical))),m=o((()=>e.features.includes(l.copy))),y=o((()=>e.features.includes(l.add))),r=o((()=>e.features.includes(l.remove))),g=o((()=>(p.value||f.value)&&(m.value||y.value||r.value))),h=o((()=>{const l=!e.list||e.list.length<=e.min||e.list.length>=e.max;return{disabled:l,msg:l?"不可复制":""}})),v=o((()=>{const l=!e.list||e.list.length>=e.max;return{disabled:l,msg:l?"已至最大项数":""}})),w=o((()=>{const l=!e.list||e.list.length<=e.min;return{disabled:l,msg:l?"已至最小项数":""}}));return s((()=>e.modelValue),(e=>{e||(n.value=[])})),{activeNames:n,activeTab:u,isLayoutRow:c,visibleToolbox:b,showToolboxRow:p,showToolboxCol:f,showToolboxCopy:m,showToolboxAdd:y,showToolboxDel:r,showToolboxSplit:g,copyState:h,addState:v,deleteState:w,toggleVisible:e=>{d.emit(t,e)},copyData:()=>{if(!h.value.disabled){const l=Math.min(+u.value,e.list.length-1);e.list.push(i(e.list[l]))}},addData:()=>{e.defaultNewValue&&!v.value.disabled&&e.list.push(JSON.parse(e.defaultNewValue))},deleteData:()=>{if(!w.value.disabled){const l=Math.min(+u.value,e.list.length-1);e.list.splice(l,1),u.value="0"}}}}});const w={class:"g-field-show-placeholder"},x={key:2,class:"g-field-collapse-panel-toolbox"},k={key:2,class:"g-field-collapse-panel-toolbox-split"},S={key:1,class:"g-field-tabs --column"},T={key:1,class:"g-field-collapse-panel-empty"};v.render=function(e,l,t,a,o,s){const i=d("el-switch"),v=d("el-tooltip"),V=d("el-tab-pane"),C=d("el-tabs"),D=d("el-collapse-item"),N=d("el-collapse");return n(),u(N,{modelValue:e.activeNames,"onUpdate:modelValue":l[8]||(l[8]=l=>e.activeNames=l),class:["g-field-collapse",{"--disable":e.toggle&&!e.modelValue}]},{default:c((()=>[b(D,{disabled:!e.modelValue,class:["g-field-collapse-panel",{"--has-toolbox":e.visibleToolbox}]},{title:c((()=>[b("i",w,[e.toggle?(n(),u(i,{key:0,"model-value":e.modelValue,class:"--mini",onClick:l[1]||(l[1]=p((()=>{}),["stop"])),onChange:e.toggleVisible},null,8,["model-value","onChange"])):f("",!0)]),e.tooltip?(n(),u(v,{key:0,effect:"blue",placement:"top",offset:2},{content:c((()=>[m(e.$slots,"tooltip",{},(()=>[y(r(e.tooltip),1)]))])),default:c((()=>[b("label",{class:"g-field-title-with-description",title:e.label},r(e.label),9,["title"])])),_:1})):(n(),u("label",{key:1,class:"g-field-title",title:e.label},r(e.label),9,["title"])),e.visibleToolbox?(n(),u("div",x,[e.showToolboxRow?(n(),u("i",{key:0,class:["v-icon-layout-row toolbox-icon",{"--selected":e.isLayoutRow}],onClick:l[2]||(l[2]=p((l=>e.isLayoutRow=!0),["stop"]))},null,2)):f("",!0),e.showToolboxCol?(n(),u("i",{key:1,class:["v-icon-layout-column toolbox-icon",{"--selected":!e.isLayoutRow}],onClick:l[3]||(l[3]=p((l=>e.isLayoutRow=!1),["stop"]))},null,2)):f("",!0),e.showToolboxSplit?(n(),u("span",k)):f("",!0),e.showToolboxCopy?(n(),u(v,{key:3,effect:"blue",placement:"top",offset:2,disabled:!e.copyState.disabled,content:e.copyState.msg},{default:c((()=>[b("i",{class:["v-icon-copy toolbox-icon",{"--disabled":e.copyState.disabled}],onClick:l[4]||(l[4]=p(((...l)=>e.copyData&&e.copyData(...l)),["stop"]))},null,2)])),_:1},8,["disabled","content"])):f("",!0),e.showToolboxAdd?(n(),u(v,{key:4,effect:"blue",placement:"top",offset:2,disabled:!e.addState.disabled,content:e.addState.msg},{default:c((()=>[b("i",{class:["v-icon-plus toolbox-icon",{"--disabled":e.addState.disabled}],onClick:l[5]||(l[5]=p(((...l)=>e.addData&&e.addData(...l)),["stop"]))},null,2)])),_:1},8,["disabled","content"])):f("",!0),e.showToolboxDel?(n(),u(v,{key:5,effect:"blue",placement:"top",offset:2,disabled:!e.deleteState.disabled,content:e.deleteState.msg},{default:c((()=>[b("i",{class:["v-icon-delete toolbox-icon",{"--disabled":e.deleteState.disabled}],onClick:l[6]||(l[6]=p(((...l)=>e.deleteData&&e.deleteData(...l)),["stop"]))},null,2)])),_:1},8,["disabled","content"])):f("",!0)])):f("",!0)])),default:c((()=>["layout"===e.mode?(n(),u(g,{key:0},[e.list&&e.list.length>0?(n(),u(g,{key:0},[e.isLayoutRow?(n(),u(C,{key:0,modelValue:e.activeTab,"onUpdate:modelValue":l[7]||(l[7]=l=>e.activeTab=l),type:"border-card",class:"g-field-tabs"},{default:c((()=>[(n(!0),u(g,null,h(e.list,((l,t)=>(n(),u(V,{key:t,label:e.label+t},{default:c((()=>[m(e.$slots,"default",{item:l})])),_:2},1032,["label"])))),128))])),_:1},8,["modelValue"])):(n(),u("div",S,[(n(!0),u(g,null,h(e.list,((l,t)=>(n(),u("div",{key:t,class:"g-field-tabs-column-item"},[m(e.$slots,"default",{item:l})])))),128))]))],64)):(n(),u("span",T," 列表为空 "))],64)):m(e.$slots,"default",{key:1})])),_:3},8,["disabled","class"])])),_:1},8,["modelValue","class"])},v.install=e=>{e.component(v.name,v)};export default v;
