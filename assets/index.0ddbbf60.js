import{aB as t,aC as a,aD as i,aE as e,aF as s,aG as o,aH as n,aI as r,aJ as c,d as l,ay as d,az as h,aK as f,R as p,e as g,aL as u,K as m,aM as b,aN as D,f as y,o as w,c as _,a as x,F as S,E as v}from"./index.3033f95e.js";import{a as O}from"./templates.2591c1f5.js";import{c as E,g as F,B as M}from"./basic-bar.ac88473d.js";class T extends t{constructor(){super("MainTitle",{w:300,h:56}),this.config={title:"我是标题数据",textStyle:{fontFamily:"Microsoft Yahei",fontSize:24,color:"#fff",fontWeight:"normal"},textAlign:"center",writingMode:"horizontal-tb",letterSpacing:0,backgroundStyle:{show:!1,bgColor:"#008bff",borderRadius:15,borderColor:"#fff",borderStyle:"solid",borderWidth:1},ellipsis:!1,urlConfig:{url:"",isBlank:!1}},this.initData()}initData(){const t=[E("title",{description:"标题值",optional:!0}),E("url",{description:"超链接",optional:!0})];return this.apis=a({fields:Object.assign({},...t)}),this.apiData=i(this.id),this.events={},this.actions={},this}async loadData(){try{const t="text/main-title",a=await F(this.id,t);this.apiData.source.config.data=JSON.stringify(a.data)}catch(t){throw t}}}class C extends t{constructor(){super("NumberTitleFlop",{w:350,h:64}),this.config={global:{fontFamily:"Microsoft Yahei",arrangement:"top",distance:0},title:{content:"Typesomething",textStyle:{fontSize:18,color:"#79daff",fontWeight:"normal",textAlign:"flex-start"}},counter:{fontFamily:"Microsoft Yahei",justifyContent:"flex-start",margin:{preNum:0,numSuff:0},prefix:{content:"￥",textStyle:{fontSize:36,color:"#0a73ff",fontWeight:"bolder"}},suffix:{content:"",textStyle:{fontSize:30,color:"#fff",fontWeight:"bolder"}}},numbers:{textStyle:{fontSize:36,color:"#0a73ff",fontWeight:"bolder"},marginRight:0,bgColor:"rgba(51,51,51,0)",bgRadius:6,bgSeparating:!1,digit:0,decimal:0,divisor:0,separatingChart:!0,separatingSymbol:",",decimalSymbol:".",fixedWidth:0,increment:!0,animation:!0,sameDataFlip:!1,duration:1e3}},this.initData()}initData(){const t=[E("title",{description:"标题",optional:!0}),E("value",{description:"翻牌器数值"}),E("prefix",{description:"翻牌器前缀",optional:!0}),E("suffix",{description:"翻牌器后缀",optional:!0})];return this.apis=a({fields:Object.assign({},...t)}),this.apiData=i(this.id),this.events={},this.actions={},this}async loadData(){try{const t="text/number-title-flop",a=await F(this.id,t);this.apiData.source.config.data=JSON.stringify(a.data)}catch(t){throw t}}}class P extends t{constructor(){super("Marquee",{w:300,h:56}),this.config={textStyle:{fontFamily:"Microsoft Yahei",fontSize:18,color:"#fff",fontWeight:"normal"},loop:!0,ifSpeed:!1,duration:8e3,speed:1e3,timeout:1e3},this.initData()}initData(){const t=[E("value",{description:"值"})];return this.apis=a({fields:Object.assign({},...t),description:"跑马灯接口"}),this.apiData=i(this.id),this.events={},this.actions={},this}async loadData(){try{const t="text/marquee",a=await F(this.id,t);this.apiData.source.config.data=JSON.stringify(a.data)}catch(t){throw t}}}class V extends t{constructor(){super("Paragraph",{w:300,h:180}),this.config={content:"DataV 提供运营动态直播、数据综合展示、设备监控预警等多种场景模板，稍加修改就能够直接服务于您的可视化需求。通过拖拽即可实现灵活的可视化布局，在模板的基础上任何人都能够发挥创意，实现您自己的可视化应用。支持阿里云分析数据库、关系型数据库、Restful API、CSV、静态JSON等多种数据来源，且能够动态轮询。能够实现多个数据源汇聚于一个可视化界面中",textStyle:{fontFamily:"Microsoft Yahei",fontSize:16,color:"#fff",fontWeight:"normal"},scroll:{duration:5e3,overScroll:!1},lineHeight:36,textAlign:"left",textIndent:32},this.initData()}initData(){const t=[E("value",{description:"值"})];return this.apis=a({fields:Object.assign({},...t),description:"多行文本接口"}),this.apiData=i(this.id),this.events={},this.actions={},this}async loadData(){try{const t="text/paragraph",a=await F(this.id,t);this.apiData.source.config.data=JSON.stringify(a.data)}catch(t){throw t}}}class j extends t{constructor(){super("Timer",{w:300,h:56}),this.config={iconStyle:{show:!0,size:1.2,color:"rgba(93,245,244,1)",marginRight:6},time:{textStyle:{fontFamily:"Microsoft Yahei",fontSize:18,color:"#fff",fontWeight:"normal"},format:"YYYY-MM-DD HH:mm:ss",duration:1e3,horizontal:"center",vertical:"center"}},this.initData()}initData(){return this.apis={},this.apiData={},this.events={},this.actions={},this}async loadData(){try{const t="",a=await F(this.id,t);this.apiData.source.config.data=JSON.stringify(a.data)}catch(t){throw t}}}class I extends t{constructor(){super("DatePicker",{w:250,h:50}),this.config={global:{date:"2021-07-01",fontFamily:"Microsoft Yahei"},input:{size:{width:180,height:30},border:{width:1,color:"#ccc",radius:0},bgColor:"#01becc",fontSize:18,fontColor:"#fff",separator:"-",pos:"left"},calendar:{fontSize:14,fontColor:"#fff",bgColor:"#126973",selectBGColor:"#01becc",border:{width:1,color:"#ccc",radius:5},paddingBorder:{width:1,color:"#ccc",padding:6},select:{time:2,today:4}}},this.initData()}initData(){const t=[E("date",{description:"默认日期",optional:!0})];return this.apis=a({fields:Object.assign({},...t)}),this.apiData=i(this.id),this.events={changed:{description:"当日期变化时",fields:Object.assign({},...t)}},this.actions={},this}async loadData(){try{const t="other/date-picker",a=await F(this.id,t);this.apiData.source.config.data=JSON.stringify(a.data)}catch(t){throw t}}}class B extends t{constructor(){super("MainImg",{w:300,h:180}),this.config={imageType:"bitmap",backgroundImage:"https://files.pengxiaotian.com/datav/main-img.png",vectorImage:"https://files.pengxiaotian.com/datav/datav-vue-logo.svg",vectorFill:"#38ae70",repeat:"no-repeat",radius:1,urlConfig:{url:"",ifBlank:!1},cursor:!0},this.initData()}initData(){return this.apis={},this.apiData={},this.events={},this.actions={},this}async loadData(){try{const t="",a=await F(this.id,t);this.apiData.source.config.data=JSON.stringify(a.data)}catch(t){throw t}}}class z extends t{constructor(){super("FullScreen",{w:200,h:200}),this.config={request:"https://files.pengxiaotian.com/datav/fsrequest.png",exit:"https://files.pengxiaotian.com/datav/fsexit.png",bgColor:"rgba(255, 255, 255, 0.2)",borderRadius:50,alwaysShow:!0},this.initData()}initData(){return this.apis={},this.apiData={},this.events={},this.actions={},this}async loadData(){try{const t="",a=await F(this.id,t);this.apiData.source.config.data=JSON.stringify(a.data)}catch(t){throw t}}}function R(t){switch(t.substr(1)){case"MainTitle":return new T;case"NumberTitleFlop":return new C;case"DatePicker":return new I;case"BgBox":return new o;case"BorderBox":return new s;case"Decoration":return new e;case"BasicBar":return new M;case"Marquee":return new P;case"Paragraph":return new V;case"Timer":return new j;case"FullScreen":return new z;case"MainImg":return new B;default:throw Error(`Unknown component type: ${t}.`)}}var A=l({name:"ScreenEditor",components:{HeaderToolbar:d((()=>h((()=>import("./index.bab10631.js")),["/assets/index.bab10631.js","/assets/index.089a3722.css","/assets/index.3033f95e.js","/assets/index.82b97920.css","/assets/screen.cb6f988d.js","/assets/publish-screen.ee669a5e.js","/assets/publish-screen.8e06d77e.css"]))),FooterToolbar:d((()=>h((()=>import("./index.3bde6178.js")),["/assets/index.3bde6178.js","/assets/index.c20c4f3c.css","/assets/index.3033f95e.js","/assets/index.82b97920.css"]))),EditorContextMenu:d((()=>h((()=>import("./index.d9078f78.js")),["/assets/index.d9078f78.js","/assets/index.1b0816bb.css","/assets/index.3033f95e.js","/assets/index.82b97920.css","/assets/dom.38822246.js","/assets/index.89b8b44d.js"]))),CanvasMain:f((()=>h((()=>import("./index.8a443675.js")),["/assets/index.8a443675.js","/assets/index.9b452927.css","/assets/index.3033f95e.js","/assets/index.82b97920.css","/assets/dom.38822246.js","/assets/index.89b8b44d.js","/assets/templates.2591c1f5.js","/assets/basic-bar.ac88473d.js"]))),LayerPanel:f((()=>h((()=>import("./index.782be6b6.js")),["/assets/index.782be6b6.js","/assets/index.c1901e48.css","/assets/index.3033f95e.js","/assets/index.82b97920.css","/assets/index.89b8b44d.js","/assets/dom.38822246.js"]))),ComponentsPanel:f((()=>h((()=>import("./index.4e086cf2.js")),["/assets/index.4e086cf2.js","/assets/index.4daf3035.css","/assets/index.3033f95e.js","/assets/index.82b97920.css","/assets/templates.2591c1f5.js","/assets/basic-bar.ac88473d.js"]))),ConfigPanel:f((()=>h((()=>import("./index.a2f9d19d.js")),["/assets/index.a2f9d19d.js","/assets/index.5ea98624.css","/assets/index.3033f95e.js","/assets/index.82b97920.css"]))),ToolboxPanel:f((()=>h((()=>import("./index.88667765.js")),["/assets/index.88667765.js","/assets/index.5d65dd95.css","/assets/index.3033f95e.js","/assets/index.82b97920.css"]))),FilterManagerDrawer:f((()=>h((()=>import("./filter-manager-drawer.9c7b5786.js")),["/assets/filter-manager-drawer.9c7b5786.js","/assets/filter-manager-drawer.975742e9.css","/assets/index.3033f95e.js","/assets/index.82b97920.css","/assets/filter-collapse-panel.237bf2ca.js"])))},props:{projectId:{type:[String,Number],required:!0}},setup(t){const a=p(),i=g(!0);return u.enableDebug(),r.setEditMode(),m((async()=>{var e;try{const s=parseInt(a.query.tpl);if(s>0){const{data:a}=await O(s);if(a){const{config:i}=a;r.setEditorOption({screen:{id:+t.projectId,name:a.name},config:{width:i.width,height:i.height,bgimage:i.bgimage,bgcolor:i.bgcolor,styleFilterParams:i.styleFilterParams},coms:i.coms,variables:i.variables}),b.setFilterOption({dataFilters:null!=(e=i.dataFilters)?e:[]})}1===s&&(()=>{const{pageConfig:t}=r;["VMainTitle","VNumberTitleFlop","VDatePicker","VBgBox","VBorderBox","VDecoration","VBasicBar","VMarquee","VParagraph","VTimer","VFullScreen","VMainImg"].forEach((a=>{const i=R(a);i.attr.x=n(t.width-i.attr.w),i.attr.y=n(t.height-i.attr.h),r.addCom(i),i.apis.source&&i.loadData().then((()=>{c.datavComponents[i.id].$DATAV_requestData()}))}))})()}else{const a=+t.projectId;r.loadScreen(a),b.loadFilters(a),await r.loadComs(a)}}catch(s){console.log(s)}finally{i.value=!1,document.title=`${r.screen.name} | 编辑器`,r.autoCanvasScale((()=>({offsetX:D.getPanelOffsetX,offsetY:D.getPanelOffsetY})))}})),{loading:i}}});const N=v(),Y=N(((t,a,i,e,s,o)=>{const n=y("header-toolbar"),r=y("el-header"),c=y("layer-panel"),l=y("components-panel"),d=y("filter-manager-drawer"),h=y("toolbox-panel"),f=y("canvas-main"),p=y("g-loading"),g=y("footer-toolbar"),u=y("el-container"),m=y("config-panel"),b=y("editor-context-menu");return w(),_(S,null,[x(u,{class:"edit-container"},{default:N((()=>[x(r,{style:{height:"auto",padding:"0"}},{default:N((()=>[x(n)])),_:1}),x(u,{class:"edit-main-wp"},{default:N((()=>[x(c),x(l),x(d),x(u,{class:"edit-main"},{default:N((()=>[x(h),x(p,{spinning:t.loading},{default:N((()=>[x(f)])),_:1},8,["spinning"]),x(g)])),_:1}),x(m)])),_:1})])),_:1}),x(b)],64)}));A.render=Y,A.__scopeId="data-v-f362d1ea";var L=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:A});export{R as c,L as i};
