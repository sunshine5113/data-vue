import{d as t,r as e,e as a,u as n,o as r,aD as o,aG as i,aP as d,l as c,m as s,p as l,am as m,F as g,s as A,aQ as p}from"./index.1041a42d.js";import{o as u,s as v}from"./dom.ddb3ea0f.js";import{g as f}from"./screen.d7e0fbf0.js";var q=t({name:"Preview",props:{screenId:{type:[String,Number],required:!0}},setup(t){const c=e(!0),s=a((()=>o.pageConfig)),l=a((()=>o.coms)),m=t=>{switch(t.zoomMode){case d.auto:((t,e)=>{const a=document.documentElement.clientWidth/t,n=document.documentElement.clientHeight/e;v(document.body,{transform:`scale(${a}, ${n})`,transformOrigin:"left top",backgroundSize:"100% 100%"})})(t.width,t.height);break;case d.width:(t=>{const e=document.documentElement.clientWidth/t;v(document.body,{transform:`scale(${e})`,transformOrigin:"left top",backgroundSize:"100%"})})(t.width);break;case d.height:((t,e)=>{const a=document.documentElement.clientWidth,n=document.documentElement.clientHeight/e,r=(a-t*n)/2;v(document.body,{transform:`scale(${n})`,transformOrigin:"left top",backgroundSize:t/a*n*100+"% 100%",backgroundPosition:`${r.toFixed(3)}px top`,marginLeft:`${r.toFixed(3)}px`})})(t.width,t.height);break;case d.full:((t,e)=>{const a=document.documentElement.clientWidth,n=document.documentElement.clientHeight/e,r=(a-t*n)/2;v(document.body,{transform:`scale(${n})`,transformOrigin:"left top",backgroundSize:t/a*n*100+"% 100%",backgroundPosition:`${r.toFixed(3)}px top`}),document.documentElement.style.overflowX="scroll"})(t.width,t.height);break;default:v(document.body,{overflow:"hidden",position:"relative"})}},g=n();return r((async()=>{try{const a=await f(+t.screenId);if(!a)throw new Error("404");o.SET_SCREEN(a.project),e=s.value,document.title=o.screen.name,document.querySelector('meta[name="viewport"]').setAttribute("content",`width=${e.width}`),v(document.documentElement,{overflowX:"hidden",overflowY:"visible"}),v(document.body,{width:`${e.width}px`,height:`${e.height}px`,backgroundImage:`url(${s.value.bgimage})`,backgroundColor:s.value.bgcolor}),m(e),i.SET_FILTERS(a.dataFilters),o.SET_COMS(a.coms),setTimeout((()=>{c.value=!1}),500),u(window,"resize",(()=>{m(s.value)}))}catch(a){g.replace({name:"NotFound",params:{catchAll:"error"}})}var e})),{loading:c,pageConfig:s,coms:l}}});const b=l("a",{target:"_blank",href:"javascript:;"},[l("img",{class:"datav-logo",src:"/assets/loading.9a9056e9.gif"})],-1),x={key:0,href:"/",target:"_blank",class:"datav-watermark"},w=l("img",{src:"data:image/png;base64,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"},null,-1),V={class:"scene"};q.render=function(t,e,a,n,r,o){return c(),s(g,null,[l("div",{id:"datav-loading",style:{background:"rgb(15, 42, 66)",display:t.loading?"block":"none"}},[b],4),l("div",{class:"datav-layout",style:{visibility:t.loading?"hidden":"visible"}},[t.pageConfig.useWatermark?(c(),s("a",x,[w])):m("",!0),l("div",V,[(c(!0),s(g,null,A(t.coms,(t=>(c(),s("div",{key:t.id,style:{left:t.attr.x+"px",top:t.attr.y+"px",width:t.attr.w+"px",height:t.attr.h+"px",opacity:t.attr.opacity,transform:`rotate(${t.attr.deg}deg) ${t.attr.filpH?"scaleX(-1)":""} ${t.attr.filpV?"scaleY(-1)":""}`},class:"-datav-com absolute"},[(c(),s(p(t.name),{com:t},null,8,["com"]))],4)))),128))])],4)],64)};export default q;
