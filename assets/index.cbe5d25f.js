import{d as e,ay as a,az as l,e as o,R as n,P as r,j as s,Q as i,f as t,o as u,c as d,a as p,w as m,at as c,q as g,A as v,t as f}from"./index.81800812.js";const h=(e,a,l)=>{["admin","editor"].includes(a)?l():l(new Error("请输入正确的用户名"))},y=(e,a,l)=>{a.length<6?l(new Error("密码不能少于6位")):l()};var _=e({name:"Login",components:{BackgroundParticles:a((()=>l((()=>import("./background-particles.34db97fb.js")),["/assets/background-particles.34db97fb.js","/assets/background-particles.2711bf0c.css","/assets/index.81800812.js","/assets/index.82b97920.css"]))),live2d:a((()=>l((()=>import("./live2d.2a8a51a4.js")),["/assets/live2d.2a8a51a4.js","/assets/live2d.9db4d5af.css","/assets/index.81800812.js","/assets/index.82b97920.css"])))},setup(){const e=o({username:"admin",password:"123123"}),a=o({username:[{required:!0,trigger:"blur",validator:h}],password:[{required:!0,trigger:"blur",validator:y}]}),l=o(null),t=o(!1),u=o(!1),d=o(""),p=o({}),m=n(),c=r();s(m,(({query:e})=>{e&&(d.value=e.redirect,p.value=(e=>Object.keys(e).reduce(((a,l)=>("redirect"!==l&&(a[l]=e[l]),a)),{}))(e))}),{immediate:!0});return{loginForm:e,loginRules:a,loginFormRef:l,capsTooltip:t,loading:u,redirect:d,otherQuery:p,checkCapslock:({shiftKey:e,key:a})=>{a&&1===a.length&&(t.value=!!(e&&a>="a"&&a<="z"||!e&&a>="A"&&a<="Z")),"CapsLock"===a&&!0===t.value&&(t.value=!1)},handleLogin:()=>{l.value.validate((a=>{if(!a)return!1;u.value=!0,i().doLogin(e.value.username,e.value.password).then((()=>{c.push({path:d.value||"/",query:p.value})})).finally((()=>{u.value=!1}))}))}}}});const w={class:"login-container"},k={style:{position:"relative"}},V={class:"tips"};_.render=function(e,a,l,o,n,r){const s=t("background-particles"),i=t("live2d"),h=t("g-lang-select"),y=t("el-input"),_=t("el-form-item"),b=t("el-tooltip"),F=t("el-button"),L=t("el-form");return u(),d("div",w,[p(s),p(L,{ref:"loginFormRef",model:e.loginForm,rules:e.loginRules,"label-position":"left",class:"login-form"},{default:m((()=>[p(i),p(h,{class:"lang-select"}),p(_,{prop:"username"},{default:m((()=>[p(y,{modelValue:e.loginForm.username,"onUpdate:modelValue":a[1]||(a[1]=a=>e.loginForm.username=a),placeholder:"用户名",name:"username",type:"text",autocomplete:"on","prefix-icon":"v-icon-user"},null,8,["modelValue"])])),_:1}),p(b,{modelValue:e.capsTooltip,"onUpdate:modelValue":a[4]||(a[4]=a=>e.capsTooltip=a),content:"大写锁定已打开",placement:"right",manual:""},{default:m((()=>[p(_,{prop:"password"},{default:m((()=>[p(y,{modelValue:e.loginForm.password,"onUpdate:modelValue":a[2]||(a[2]=a=>e.loginForm.password=a),placeholder:"请输入密码",name:"password","prefix-icon":"v-icon-key","show-password":"",onKeyup:[e.checkCapslock,c(e.handleLogin,["enter"])],onBlur:a[3]||(a[3]=a=>e.capsTooltip=!1)},null,8,["modelValue","onKeyup"])])),_:1})])),_:1},8,["modelValue"]),p(F,{loading:e.loading,type:"primary",style:{width:"100%","margin-bottom":"30px"},onClick:g(e.handleLogin,["prevent"])},{default:m((()=>[v(f(e.$t("login.login")),1)])),_:1},8,["loading","onClick"]),p("div",k,[p("div",V,[p("span",null,f(e.$t("login.username"))+": admin",1),p("span",null,f(e.$t("login.password"))+": 123123",1)])])])),_:1},8,["model","rules"])])};export default _;
