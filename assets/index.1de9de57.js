import{d as t,e,j as a,g as o,aK as n,aN as r,aT as i,P as s,o as c,c as d,a as l,b as m,F as u,A as g,aU as h}from"./index.bdf38cb7.js";import{o as p,s as b}from"./dom.b7aeab20.js";import{g as f}from"./screen.4206c281.js";import{L as v}from"./images.25f288b3.js";var y=t({name:"Preview",props:{screenId:{type:[String,Number],required:!0}},setup(t){const c=e(!0),d=a((()=>n.pageConfig)),l=a((()=>n.coms)),m=a((()=>{const t=n.styleFilterParams;let e="";return t.enable&&(e=`hue-rotate(${t.hue}deg) contrast(${t.contrast}%) opacity(${t.opacity}%) saturate(${t.saturate}%) brightness(${t.brightness}%)`),e})),u=t=>{switch(t.zoomMode){case i.auto:((t,e)=>{const a=document.documentElement.clientWidth/t,o=document.documentElement.clientHeight/e;b(document.body,{transform:`scale(${a}, ${o})`,transformOrigin:"left top",backgroundSize:"100% 100%"})})(t.width,t.height);break;case i.width:(t=>{const e=document.documentElement.clientWidth/t;b(document.body,{transform:`scale(${e})`,transformOrigin:"left top",backgroundSize:"100%"})})(t.width);break;case i.height:((t,e)=>{const a=document.documentElement.clientWidth,o=document.documentElement.clientHeight/e,n=(a-t*o)/2;b(document.body,{transform:`scale(${o})`,transformOrigin:"left top",backgroundSize:t/a*o*100+"% 100%",backgroundPosition:`${n.toFixed(3)}px top`,marginLeft:`${n.toFixed(3)}px`})})(t.width,t.height);break;case i.full:((t,e)=>{const a=document.documentElement.clientWidth,o=document.documentElement.clientHeight/e,n=(a-t*o)/2;b(document.body,{transform:`scale(${o})`,transformOrigin:"left top",backgroundSize:t/a*o*100+"% 100%",backgroundPosition:`${n.toFixed(3)}px top`}),document.documentElement.style.overflowX="scroll"})(t.width,t.height);break;default:b(document.body,{overflow:"hidden",position:"relative"})}},g=s();return o((async()=>{try{const a=await f(+t.screenId);if(!a)throw new Error("404");n.SET_SCREEN(a.project),e=d.value,document.title=n.screen.name,document.querySelector('meta[name="viewport"]').setAttribute("content",`width=${e.width}`),b(document.documentElement,{overflowX:"hidden",overflowY:"visible"}),b(document.body,{width:`${e.width}px`,height:`${e.height}px`,backgroundImage:`url(${d.value.bgimage})`,backgroundColor:d.value.bgcolor}),u(e),r.SET_FILTERS(a.dataFilters),n.SET_COMS(a.coms),setTimeout((()=>{c.value=!1}),500),p(window,"resize",(()=>{u(d.value)}))}catch(a){g.replace({name:"NotFound",params:{catchAll:"error"}})}var e})),{cdn:"//files.pengxiaotian.com",LOGO:v,loading:c,pageConfig:d,coms:l,styleFilter:m}}});const w={target:"_blank",href:"javascript:;"},$={key:0,href:"/",target:"_blank",class:"datav-watermark"},k={class:"scene"};y.render=function(t,e,a,o,n,r){return c(),d(u,null,[l("div",{id:"datav-loading",style:{background:"rgb(15, 42, 66)",display:t.loading?"block":"none"}},[l("a",w,[l("img",{class:"datav-logo",src:`${t.cdn}/datav/datav-loading.gif`},null,8,["src"])])],4),l("div",{class:"datav-layout",style:{visibility:t.loading?"hidden":"visible"}},[t.pageConfig.useWatermark?(c(),d("a",$,[l("img",{src:t.LOGO},null,8,["src"])])):m("",!0),l("div",k,[(c(!0),d(u,null,g(t.coms,(e=>(c(),d("div",{key:e.id,style:{left:e.attr.x+"px",top:e.attr.y+"px",width:e.attr.w+"px",height:e.attr.h+"px",opacity:e.attr.opacity,transform:`rotate(${e.attr.deg}deg) ${e.attr.filpH?"scaleX(-1)":""} ${e.attr.filpV?"scaleY(-1)":""}`,filter:t.styleFilter},class:"-datav-com absolute"},[(c(),d(h(e.name),{com:e},null,8,["com"]))],4)))),128))])],4)],64)};export default y;
