import{a4 as O,a9 as S,aH as f,bb as C,aj as H,a6 as l,aa as u,ad as d,ac as b,ah as j,ae as k,af as W,a7 as M,bm as N}from"./vendor.5472ebc5.js";import{b as P,z as m,H as A,g as B,Z as g}from"./App.469555df.js";import{o as I,s}from"./dom.e49e3168.js";import{g as L}from"./screen.74879a01.js";const X="//files.pengxiaotian.com",V=O({name:"Preview",props:{screenId:{type:[String,Number],required:!0}},setup(a){const h=S(!0),i=f(()=>m.pageConfig),v=f(()=>m.coms),y=f(()=>{const e=i.value.styleFilterParams;let o="";return e.enable&&(o=`hue-rotate(${e.hue}deg) contrast(${e.contrast}%) opacity(${e.opacity}%) saturate(${e.saturate}%) brightness(${e.brightness}%)`),o}),$=(e,o)=>{const r=document.documentElement.clientWidth,p=document.documentElement.clientHeight,n=r/e,c=p/o;s(document.body,{transform:`scale(${n}, ${c})`,transformOrigin:"left top",backgroundSize:"100% 100%"})},t=e=>{const o=document.documentElement.clientWidth/e;s(document.body,{transform:`scale(${o})`,transformOrigin:"left top",backgroundSize:"100%"})},_=(e,o)=>{const r=document.documentElement.clientWidth,n=document.documentElement.clientHeight/o,c=(r-e*n)/2;s(document.body,{transform:`scale(${n})`,transformOrigin:"left top",backgroundSize:`${e/r*n*100}% 100%`,backgroundPosition:`${c.toFixed(3)}px top`,marginLeft:`${c.toFixed(3)}px`})},z=(e,o)=>{const r=document.documentElement.clientWidth,n=document.documentElement.clientHeight/o,c=(r-e*n)/2;s(document.body,{transform:`scale(${n})`,transformOrigin:"left top",backgroundSize:`${e/r*n*100}% 100%`,backgroundPosition:`${c.toFixed(3)}px top`}),document.documentElement.style.overflowX="scroll"},x=()=>{s(document.body,{overflow:"hidden",position:"relative"})},w=e=>{switch(e.zoomMode){case g.auto:$(e.width,e.height);break;case g.width:t(e.width);break;case g.height:_(e.width,e.height);break;case g.full:z(e.width,e.height);break;default:x();break}},E=e=>{document.title=m.screen.name,document.querySelector('meta[name="viewport"]').setAttribute("content",`width=${e.width}`),s(document.documentElement,{overflowX:"hidden",overflowY:"visible"}),s(document.body,{width:`${e.width}px`,height:`${e.height}px`,backgroundImage:`url(${i.value.bgimage})`,backgroundColor:i.value.bgcolor}),w(e)},F=C();return H(async()=>{try{const e=await L(+a.screenId);if(e)m.setEditorOption({screen:e.screen,config:e.config,coms:e.coms,variables:e.variables}),E(e.config),A.setFilterOption({dataFilters:e.dataFilters}),setTimeout(()=>{h.value=!1},500),I(window,"resize",()=>{w(i.value)});else throw new Error("404")}catch{F.replace({name:"NotFound",params:{catchAll:"error"}})}}),{cdn:X,LOGO:B.logo,loading:h,pageConfig:i,coms:v,styleFilter:y}}}),Y={target:"_blank",href:"javascript:;"},q=["src"],G={key:0,href:"/",target:"_blank",class:"datav-watermark"},Z=["src"],D={class:"scene"};function R(a,h,i,v,y,$){return l(),u(k,null,[d("div",{id:"datav-loading",style:b({background:"rgb(15, 42, 66)",display:a.loading?"block":"none"})},[d("a",Y,[d("img",{class:"datav-logo",src:`${a.cdn}/datav/datav-loading.gif`},null,8,q)])],4),d("div",{class:"datav-layout",style:b({visibility:a.loading?"hidden":"visible"})},[a.pageConfig.useWatermark?(l(),u("a",G,[d("img",{src:a.LOGO},null,8,Z)])):j("",!0),d("div",D,[(l(!0),u(k,null,W(a.coms,t=>(l(),u("div",{key:t.id,style:b({left:t.attr.x+"px",top:t.attr.y+"px",width:t.attr.w+"px",height:t.attr.h+"px",opacity:t.attr.opacity,transform:`rotate(${t.attr.deg}deg) ${t.attr.filpH?"scaleX(-1)":""} ${t.attr.filpV?"scaleY(-1)":""}`,filter:a.styleFilter}),class:"-datav-com absolute"},[(l(),M(N(t.name),{com:t},null,8,["com"]))],4))),128))])],4)],64)}var U=P(V,[["render",R]]);export{U as default};
