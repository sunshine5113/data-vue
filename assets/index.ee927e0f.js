import{x as D,_ as o,y as p,z as u,B as V,b as x,C as d,F as M,H as f,I as b}from"./App.469555df.js";import{a4 as j,a8 as m,bc as A,a9 as R,aj as k,a5 as i,a6 as O,aa as L,ad as l,a_ as s,b2 as q,ae as $}from"./vendor.5472ebc5.js";import{a as C}from"./templates.40f6a538.js";function B(e){switch(e){case"./other/date-picker/src/date-picker.ts":return o(()=>import("./date-picker.f58b2792.js"),["assets/date-picker.f58b2792.js","assets/App.469555df.js","assets/App.532d40e3.css","assets/vendor.5472ebc5.js","assets/data-field.0ba3a232.js","assets/data.3e250bba.js"]);default:return new Promise(function(r,t){(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(t.bind(null,new Error("Unknown variable dynamic import: "+e)))})}}function F(e){switch(e){case"./media/bg-box/src/bg-box.ts":return o(()=>import("./App.469555df.js").then(function(r){return r.ae}),["assets/App.469555df.js","assets/App.532d40e3.css","assets/vendor.5472ebc5.js"]);case"./media/border-box/src/border-box.ts":return o(()=>import("./App.469555df.js").then(function(r){return r.ad}),["assets/App.469555df.js","assets/App.532d40e3.css","assets/vendor.5472ebc5.js"]);case"./media/decoration/src/decoration.ts":return o(()=>import("./App.469555df.js").then(function(r){return r.af}),["assets/App.469555df.js","assets/App.532d40e3.css","assets/vendor.5472ebc5.js"]);case"./media/main-img/src/main-img.ts":return o(()=>import("./main-img.05f2e186.js"),["assets/main-img.05f2e186.js","assets/App.469555df.js","assets/App.532d40e3.css","assets/vendor.5472ebc5.js","assets/data.3e250bba.js"]);default:return new Promise(function(r,t){(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(t.bind(null,new Error("Unknown variable dynamic import: "+e)))})}}function S(e){switch(e){case"./button/full-screen/src/full-screen.ts":return o(()=>import("./full-screen.495a89d5.js"),["assets/full-screen.495a89d5.js","assets/App.469555df.js","assets/App.532d40e3.css","assets/vendor.5472ebc5.js","assets/data.3e250bba.js"]);default:return new Promise(function(r,t){(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(t.bind(null,new Error("Unknown variable dynamic import: "+e)))})}}function U(e){switch(e){case"./text/main-title/src/main-title.ts":return o(()=>import("./main-title.354b1dbb.js"),["assets/main-title.354b1dbb.js","assets/App.469555df.js","assets/App.532d40e3.css","assets/vendor.5472ebc5.js","assets/data-field.0ba3a232.js","assets/data.3e250bba.js"]);case"./text/marquee/src/marquee.ts":return o(()=>import("./marquee.ad01d5b5.js"),["assets/marquee.ad01d5b5.js","assets/App.469555df.js","assets/App.532d40e3.css","assets/vendor.5472ebc5.js","assets/data-field.0ba3a232.js","assets/data.3e250bba.js"]);case"./text/number-title-flop/src/number-title-flop.ts":return o(()=>import("./number-title-flop.b3583d20.js"),["assets/number-title-flop.b3583d20.js","assets/App.469555df.js","assets/App.532d40e3.css","assets/vendor.5472ebc5.js","assets/data-field.0ba3a232.js","assets/data.3e250bba.js"]);case"./text/paragraph/src/paragraph.ts":return o(()=>import("./paragraph.05cc4a5e.js"),["assets/paragraph.05cc4a5e.js","assets/App.469555df.js","assets/App.532d40e3.css","assets/vendor.5472ebc5.js","assets/data-field.0ba3a232.js","assets/data.3e250bba.js"]);case"./text/timer/src/timer.ts":return o(()=>import("./timer.1e714e1c.js"),["assets/timer.1e714e1c.js","assets/App.469555df.js","assets/App.532d40e3.css","assets/vendor.5472ebc5.js","assets/data.3e250bba.js"]);default:return new Promise(function(r,t){(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(t.bind(null,new Error("Unknown variable dynamic import: "+e)))})}}function N(e){switch(e){case"./chart/word-cloud/src/word-cloud.ts":return o(()=>import("./word-cloud.9a39ca5d.js"),["assets/word-cloud.9a39ca5d.js","assets/App.469555df.js","assets/App.532d40e3.css","assets/vendor.5472ebc5.js","assets/data-field.0ba3a232.js","assets/data.3e250bba.js"]);default:return new Promise(function(r,t){(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(t.bind(null,new Error("Unknown variable dynamic import: "+e)))})}}function z(e){switch(e){case"./bar/basic-bar/src/basic-bar.ts":return o(()=>import("./basic-bar.17553304.js"),["assets/basic-bar.17553304.js","assets/App.469555df.js","assets/App.532d40e3.css","assets/vendor.5472ebc5.js","assets/data-field.0ba3a232.js","assets/data.3e250bba.js"]);default:return new Promise(function(r,t){(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(t.bind(null,new Error("Unknown variable dynamic import: "+e)))})}}async function H(e){const r=D(e.substr(1));switch(e.substr(1)){case"BasicBar":{const t=await z(`./bar/${r}/src/${r}.ts`);return new t.default}case"WordCloud":{const t=await N(`./chart/${r}/src/${r}.ts`);return new t.default}case"MainTitle":case"Marquee":case"NumberTitleFlop":case"Paragraph":case"Timer":{const t=await U(`./text/${r}/src/${r}.ts`);return new t.default}case"FullScreen":{const t=await S(`./button/${r}/src/${r}.ts`);return new t.default}case"BgBox":case"BorderBox":case"Decoration":case"MainImg":{const t=await F(`./media/${r}/src/${r}.ts`);return new t.default}case"DatePicker":{const t=await B(`./other/${r}/src/${r}.ts`);return new t.default}default:throw Error(`Unknown component type: ${e}.`)}}const W=()=>{const{pageConfig:e}=u;["VMainTitle","VNumberTitleFlop","VDatePicker","VBgBox","VBorderBox","VDecoration","VBasicBar","VMarquee","VParagraph","VTimer","VFullScreen","VMainImg","VWordCloud"].forEach(t=>{H(t).then(n=>{n.attr.x=p(e.width-n.attr.w),n.attr.y=p(e.height-n.attr.h),u.addCom(n),n.apis.source&&n.loadData().then(()=>{V.datavComponents[n.id].$DATAV_requestData()})})})};const X=j({name:"ScreenEditor",components:{HeaderToolbar:m(()=>o(()=>import("./index.6e1b7489.js"),["assets/index.6e1b7489.js","assets/index.891400cf.css","assets/App.469555df.js","assets/App.532d40e3.css","assets/vendor.5472ebc5.js","assets/screen.74879a01.js","assets/layer.0d10b8c7.js","assets/publish-screen.0cb0cbc3.js","assets/publish-screen.df6080ef.css","assets/release.38c1db62.js","assets/help.5b977ebf.js"])),FooterToolbar:m(()=>o(()=>import("./index.a2a73c01.js"),["assets/index.a2a73c01.js","assets/index.dae957f0.css","assets/vendor.5472ebc5.js","assets/App.469555df.js","assets/App.532d40e3.css","assets/arrow-down.a80c231b.js"])),EditorContextMenu:m(()=>o(()=>import("./index.009994a5.js"),["assets/index.009994a5.js","assets/index.e4ffd428.css","assets/App.469555df.js","assets/App.532d40e3.css","assets/vendor.5472ebc5.js","assets/dom.e49e3168.js","assets/warning.7c48cee5.js","assets/edit.dbee3cf6.js","assets/delete.5380830a.js","assets/copy.9b7a4498.js","assets/lock.2a605029.js","assets/show.7fa4d14c.js","assets/hide.14c3d36a.js","assets/index.9b61e8eb.js"])),CanvasMain:d(()=>o(()=>import("./index.2bbb6fde.js"),["assets/index.2bbb6fde.js","assets/index.e3e9f1e6.css","assets/vendor.5472ebc5.js","assets/App.469555df.js","assets/App.532d40e3.css","assets/dom.e49e3168.js","assets/index.9b61e8eb.js","assets/templates.40f6a538.js"])),LayerPanel:d(()=>o(()=>import("./index.3b18e7d2.js"),["assets/index.3b18e7d2.js","assets/index.f8bf7f5e.css","assets/vendor.5472ebc5.js","assets/App.469555df.js","assets/App.532d40e3.css","assets/warning.7c48cee5.js","assets/delete.5380830a.js","assets/back.2db52424.js","assets/lock.2a605029.js","assets/hide.14c3d36a.js","assets/view-grid.be2c4760.js","assets/index.9b61e8eb.js","assets/dom.e49e3168.js"])),ComponentsPanel:d(()=>o(()=>import("./index.ce060cb5.js"),["assets/index.ce060cb5.js","assets/index.bc1aa1f3.css","assets/App.469555df.js","assets/App.532d40e3.css","assets/vendor.5472ebc5.js","assets/search.aa1da860.js","assets/back.2db52424.js","assets/templates.40f6a538.js"])),ConfigPanel:d(()=>o(()=>import("./index.dfc7dc84.js"),["assets/index.dfc7dc84.js","assets/index.1e2ad6b6.css","assets/App.469555df.js","assets/App.532d40e3.css","assets/vendor.5472ebc5.js","assets/interact.4e4b292e.js"])),ToolboxPanel:d(()=>o(()=>import("./index.438f0eb7.js"),["assets/index.438f0eb7.js","assets/index.be6b7622.css","assets/vendor.5472ebc5.js","assets/App.469555df.js","assets/App.532d40e3.css"])),FilterManagerDrawer:d(()=>o(()=>import("./filter-manager-drawer.e072d187.js"),["assets/filter-manager-drawer.e072d187.js","assets/filter-manager-drawer.24f26014.css","assets/App.469555df.js","assets/App.532d40e3.css","assets/vendor.5472ebc5.js","assets/warning.7c48cee5.js","assets/document.ed5b6cc5.js","assets/filter-collapse-panel.397c805c.js","assets/arrow-left.970b90a9.js","assets/edit.dbee3cf6.js","assets/delete.5380830a.js","assets/release.38c1db62.js"]))},props:{projectId:{type:[String,Number],required:!0}},setup(e){const r=A(),t=R(!0);return M.enableDebug(),u.setEditMode(),k(async()=>{var n;try{const _=parseInt(r.query.tpl);if(_>0){const{data:c}=await C(_);if(c){const{config:a}=c;u.setEditorOption({screen:{id:+e.projectId,name:c.name},config:{width:a.width,height:a.height,bgimage:a.bgimage,bgcolor:a.bgcolor,styleFilterParams:a.styleFilterParams},coms:a.coms,variables:a.variables}),f.setFilterOption({dataFilters:(n=a.dataFilters)!=null?n:[]})}_===1&&W()}else{const c=+e.projectId;u.loadScreen(c),f.loadFilters(c),await u.loadComs(c)}}catch(_){console.log(_)}finally{t.value=!1,document.title=`${u.screen.name} | \u7F16\u8F91\u5668`,u.autoCanvasScale(()=>({offsetX:b.getPanelOffsetX,offsetY:b.getPanelOffsetY}))}}),{loading:t}}}),Y={class:"g-layout is-vertical edit-container"},G={class:"g-header"},J={id:"edit-main-wp",class:"g-layout edit-main-wp"},K={class:"g-layout edit-main"};function Q(e,r,t,n,_,c){const a=i("header-toolbar"),v=i("layer-panel"),g=i("components-panel"),E=i("filter-manager-drawer"),w=i("toolbox-panel"),y=i("canvas-main"),P=i("g-loading"),T=i("footer-toolbar"),I=i("config-panel"),h=i("editor-context-menu");return O(),L($,null,[l("div",Y,[l("div",G,[s(a)]),l("div",J,[s(v),s(g),s(E),l("div",K,[s(w),s(P,{spinning:e.loading},{default:q(()=>[s(y)]),_:1},8,["spinning"]),s(T)]),s(I)])]),s(h)],64)}var Z=x(X,[["render",Q],["__scopeId","data-v-b54f1d56"]]),oe=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Z});export{H as c,oe as i};
