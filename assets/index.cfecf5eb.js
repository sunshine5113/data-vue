import{a6 as i,aa as m,ad as c,a4 as j,a_ as q,bc as J,a9 as O,aC as y,a5 as u,bh as Q,aX as n,a$ as l,ab as v,ac as h,ae as L,af as R,b6 as Y,ba as Z,bb as x,aK as U,be as z,ak as P,ag as K,a7 as f,ah as w}from"./vendor.1c7e0fbb.js";import{a as H,C as ee,x as oe,w as ne,V as se,X as g}from"./AppRoot.9161bc33.js";import{I as te}from"./warning.ce42dfb2.js";import{I as ae}from"./delete.97a5a659.js";import{I as le}from"./back.ed0e1f65.js";import{I as ie,a as ce,b as de,c as re,d as ue}from"./lock.aa598054.js";import{I as ve}from"./hide.de3e7b30.js";import{I as me}from"./view-grid.566bf75d.js";import{u as pe}from"./index.4d44cbc9.js";import"./dom.6d6c7f4f.js";const he={},ye={t:"1639130612954",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"3985",width:"64",height:"64"},Ce=c("path",{d:"M116.4921875 116.4921875l0 186.12132317 791.015625 0 0-186.12132317-791.015625 0zM860.9774817 256.08317987l-697.9549634 0 0-93.06066158 697.95496341 0 0 93.06066158zM116.4921875 581.79549619l791.015625 0 0-186.12132317-791.015625 0 0 186.12132317zM163.0225183 442.20450381l697.9549634 0 0 93.06066158-697.95496341 0 0-93.06066158zM116.4921875 860.9774817l791.015625 1e-8 0-186.12132317-791.015625 0 0 186.12132317zM163.0225183 721.38648933l697.9549634 0 0 93.0606616-697.95496341 0 0-93.0606616z","p-id":"3986"},null,-1),ke=[Ce];function _e(o,d){return i(),m("svg",ye,ke)}var be=H(he,[["render",_e]]);const fe=j({name:"LayerPanel",components:{IconViewList:be,IconViewGrid:me,IconBack:le,IconMoveUp:ie,IconMoveDown:ce,IconMoveTop:de,IconMoveBottom:re,IconLock:ue,IconHide:ve,IconDelete:ae},setup(){const o=q(),d=J(),B=ee(),V=oe(),C=ne(),F=O(!1),_=y(()=>B.layer.show),a=y(()=>[...C.coms].reverse()),t=y(()=>C.selectedCom),I=y(()=>!!t.value),M=y(()=>{var r;return{enable:!!t.value,checked:(r=t.value)==null?void 0:r.locked}}),$=y(()=>{var r;return{enable:!!t.value,checked:(r=t.value)==null?void 0:r.hided}}),S=y(()=>({opacity:t.value?1:.3})),D=()=>{B.setPanelState(se.layer,!_.value)},T=r=>{C.selectCom(r)},p=r=>{t.value&&V.moveCom(t.value.id,r)},k=()=>p(g.up),E=()=>p(g.down),b=()=>p(g.top),e=()=>p(g.bottom),s=()=>{t.value&&(t.value.locked=!t.value.locked)},A=()=>{t.value&&(t.value.hided=!t.value.hided)},G=()=>{const r=t.value;if(r){const X=d.create({content:"\u662F\u5426\u5220\u9664\u9009\u4E2D\u76841\u4E2A\u7EC4\u4EF6",negativeText:"\u53D6\u6D88",positiveText:"\u786E\u5B9A",iconPlacement:"top",icon:()=>Y(te),onPositiveClick:async()=>{X.loading=!0;try{await C.deleteCom(r)}catch(W){o.error(W.message)}}})}},{showMenu:N}=pe();return{showText:F,visiblePanel:_,descComs:a,enableBtnClass:I,enableLockBtnClass:M,enableHideBtnClass:$,enableBtnStyle:S,changeVisible:D,selectCom:T,moveUp:k,moveDown:E,moveTop:b,moveBottom:e,lockCom:s,hideCom:A,toDeleteCom:G,showMenu:N}}}),we=o=>(Z("data-v-50951352"),o=o(),x(),o),ge={class:"layer-manager"},Be={class:"layer-manager-top"},Ie=we(()=>c("div",{class:"layer-num"},"\u56FE\u5C42",-1)),Me={class:"layer-layout"},$e={class:"layer-toolbar layer-toolbar-top"},Se={class:"layer-manager-wrap"},De=["title","onMousedown","onMouseenter","onMouseleave"],Te=["onUpdate:modelValue","onBlur","onKeydown"],Ee={key:1,class:"layer-item-span"},Ve={class:"layer-item-text"},Fe=["title","onMousedown","onMouseenter","onMouseleave"],Le=["alt"],Ue={class:"layer-manager-thumbail"},ze=["onUpdate:modelValue","onBlur","onKeydown"],Pe={key:1,class:"layer-item-span"},Ke={class:"layer-item-text"},He={class:"layer-thumbail-item"},Ae={class:"layer-toolbar layer-toolbar-bottom"};function Ge(o,d,B,V,C,F){const _=u("IconViewGrid"),a=u("n-icon"),t=u("IconViewList"),I=u("IconBack"),M=u("IconMoveUp"),$=u("IconMoveDown"),S=u("IconMoveTop"),D=u("IconMoveBottom"),T=u("g-com-icon"),p=u("IconHide"),k=u("IconLock"),E=u("IconDelete"),b=Q("focus");return i(),m("div",{class:v(["g-aside layer-panel-wp",{"--hide":!o.visiblePanel}])},[c("div",ge,[c("div",Be,[Ie,c("div",Me,[n(a,{title:"\u7F29\u7565\u56FE\u7248",class:v(["btn-icon",{selected:!o.showText}]),onClick:d[0]||(d[0]=e=>o.showText=!1)},{default:l(()=>[n(_)]),_:1},8,["class"]),n(a,{title:"\u6587\u5B57\u7248",class:v(["btn-icon",{selected:o.showText}]),onClick:d[1]||(d[1]=e=>o.showText=!0)},{default:l(()=>[n(t)]),_:1},8,["class"]),n(a,{title:"\u6536\u8D77",class:"btn-icon",onClick:o.changeVisible},{default:l(()=>[n(I)]),_:1},8,["onClick"])])]),c("div",$e,[n(a,{title:"\u4E0A\u79FB\u4E00\u5C42",class:v(["toolbar-icon standard",o.enableBtnClass]),style:h(o.enableBtnStyle),onClick:o.moveUp},{default:l(()=>[n(M)]),_:1},8,["class","style","onClick"]),n(a,{title:"\u4E0B\u79FB\u4E00\u5C42",class:v(["toolbar-icon standard",o.enableBtnClass]),style:h(o.enableBtnStyle),onClick:o.moveDown},{default:l(()=>[n($)]),_:1},8,["class","style","onClick"]),n(a,{title:"\u7F6E\u9876",class:v(["toolbar-icon standard",o.enableBtnClass]),style:h(o.enableBtnStyle),onClick:o.moveTop},{default:l(()=>[n(S)]),_:1},8,["class","style","onClick"]),n(a,{title:"\u7F6E\u5E95",class:v(["toolbar-icon standard",o.enableBtnClass]),style:h(o.enableBtnStyle),onClick:o.moveBottom},{default:l(()=>[n(D)]),_:1},8,["class","style","onClick"])]),c("div",Se,[(i(!0),m(L,null,R(o.descComs,e=>(i(),m(L,{key:e.id},[o.showText?(i(),m("div",{key:0,title:e.alias,class:v(["layer-manager-item",[{hided:e.hided,locked:e.locked,hovered:e.hovered,selected:e.selected}]]),onMousedown:s=>o.selectCom(e.id),onMouseenter:s=>e.hovered=!0,onMouseleave:s=>e.hovered=!1,onContextmenu:d[2]||(d[2]=(...s)=>o.showMenu&&o.showMenu(...s))},[n(T,{icon:e.icon},null,8,["icon"]),e.renameing?U((i(),m("input",{key:0,"onUpdate:modelValue":s=>e.alias=s,class:"layer-item-input",onBlur:s=>e.renameing=!1,onKeydown:P(s=>e.renameing=!1,["enter"])},null,40,Te)),[[z,e.alias,void 0,{trim:!0}],[b]]):(i(),m("span",Ee,[c("span",Ve,K(e.alias),1)])),e.hided?(i(),f(a,{key:2,class:"show-toggle-btn",onClick:s=>e.hided=!1},{default:l(()=>[n(p)]),_:2},1032,["onClick"])):w("",!0),e.locked?(i(),f(a,{key:3,class:"show-toggle-btn",onClick:s=>e.locked=!1},{default:l(()=>[n(k)]),_:2},1032,["onClick"])):w("",!0)],42,De)):(i(),m("div",{key:1,title:e.alias,class:v(["layer-manager-item thumbail-wrap",[{hided:e.hided,locked:e.locked,hovered:e.hovered,selected:e.selected}]]),onMousedown:s=>o.selectCom(e.id),onMouseenter:s=>e.hovered=!0,onMouseleave:s=>e.hovered=!1,onContextmenu:d[3]||(d[3]=(...s)=>o.showMenu&&o.showMenu(...s))},[c("div",{class:"layer-item-thumbail",alt:e.alias,style:h(`background-image: url(${e.img})`)},null,12,Le),c("div",Ue,[e.renameing?U((i(),m("input",{key:0,"onUpdate:modelValue":s=>e.alias=s,class:"layer-item-input",onBlur:s=>e.renameing=!1,onKeydown:P(s=>e.renameing=!1,["enter"])},null,40,ze)),[[z,e.alias,void 0,{trim:!0}],[b]]):(i(),m("span",Pe,[c("span",Ke,K(e.alias),1)]))]),c("div",He,[e.hided?(i(),f(a,{key:0,class:"show-toggle-btn",onClick:s=>e.hided=!1},{default:l(()=>[n(p)]),_:2},1032,["onClick"])):w("",!0),e.locked?(i(),f(a,{key:1,class:"show-toggle-btn",onClick:s=>e.locked=!1},{default:l(()=>[n(k)]),_:2},1032,["onClick"])):w("",!0)])],42,Fe))],64))),128)),c("div",{class:"last-flex-item",onClick:d[4]||(d[4]=e=>o.selectCom(""))})]),c("div",Ae,[n(a,{title:"\u5220\u9664",class:v(["toolbar-icon standard",o.enableBtnClass]),style:h(o.enableBtnStyle),onClick:o.toDeleteCom},{default:l(()=>[n(E)]),_:1},8,["class","style","onClick"]),n(a,{title:"\u9501\u5B9A",class:v(["toolbar-icon standard",o.enableLockBtnClass]),style:h(o.enableBtnStyle),onClick:o.lockCom},{default:l(()=>[n(k)]),_:1},8,["class","style","onClick"]),n(a,{title:"\u9690\u85CF",class:v(["toolbar-icon standard",o.enableHideBtnClass]),style:h(o.enableBtnStyle),onClick:o.hideCom},{default:l(()=>[n(p)]),_:1},8,["class","style","onClick"])])])],2)}var Ze=H(fe,[["render",Ge],["__scopeId","data-v-50951352"]]);export{Ze as default};
