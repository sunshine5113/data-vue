import{d as e,aw as a,f as l,j as o,u as r,ab as n,U as s,aD as i,aE as t,r as u,o as d,c as p,a as c,w as m,ak as g,am as v,e as f,t as h}from"./index.08aa27a9.js";import"./editor.worker.3eb73e22.js";const w=(e,a,l)=>{["admin","editor"].includes(a)?l():l(new Error("请输入正确的用户名"))},k=(e,a,l)=>{a.length<6?l(new Error("密码不能少于6位")):l()};var y=e({name:"Login",components:{BackgroundParticles:a((()=>i((()=>import("./background-particles.d04cc85c.js")),["/assets/background-particles.d04cc85c.js","/assets/background-particles.2711bf0c.css","/assets/index.08aa27a9.js","/assets/index.0eef8ce1.css","/assets/editor.worker.3eb73e22.js"]))),live2d:a((()=>i((()=>import("./live2d.a61ae5ca.js")),["/assets/live2d.a61ae5ca.js","/assets/live2d.d7d84035.css","/assets/index.08aa27a9.js","/assets/index.0eef8ce1.css","/assets/editor.worker.3eb73e22.js"])))},setup(){const e=l({username:"admin",password:"123123"}),a=l({username:[{required:!0,trigger:"blur",validator:w}],password:[{required:!0,trigger:"blur",validator:k}]}),i=l(null),u=l(!1),d=l(!1),p=l(""),c=l({}),m=o(),g=r();n(m,(({query:e})=>{e&&(p.value=e.redirect,c.value=(e=>Object.keys(e).reduce(((a,l)=>("redirect"!==l&&(a[l]=e[l]),a)),{}))(e))}),{immediate:!0});return{loginForm:e,loginRules:a,loginFormRef:i,capsTooltip:u,loading:d,redirect:p,otherQuery:c,checkCapslock:({shiftKey:e,key:a})=>{a&&1===a.length&&(u.value=!!(e&&a>="a"&&a<="z"||!e&&a>="A"&&a<="Z")),"CapsLock"===a&&!0===u.value&&(u.value=!1)},handleLogin:()=>{i.value.validate((a=>{if(!a)return!1;d.value=!0,s().doLogin(e.value.username,e.value.password).then((()=>{g.push({path:p.value||"/",query:c.value})})).finally((()=>{d.value=!1}))}))},title:l(t.title)}}});const _={class:"login-container"},V={style:{position:"relative"}},b={class:"tips"};y.render=function(e,a,l,o,r,n){const s=u("background-particles"),i=u("live2d"),t=u("g-lang-select"),w=u("el-input"),k=u("el-form-item"),y=u("el-tooltip"),F=u("el-button"),L=u("el-form");return d(),p("div",_,[c(s),c(L,{ref:"loginFormRef",model:e.loginForm,rules:e.loginRules,"label-position":"left",class:"login-form"},{default:m((()=>[c(i),c(t,{class:"lang-select"}),c(k,{prop:"username"},{default:m((()=>[c(w,{modelValue:e.loginForm.username,"onUpdate:modelValue":a[1]||(a[1]=a=>e.loginForm.username=a),placeholder:"用户名",name:"username",type:"text",autocomplete:"on","prefix-icon":"el-icon-s-custom"},null,8,["modelValue"])])),_:1}),c(y,{modelValue:e.capsTooltip,"onUpdate:modelValue":a[4]||(a[4]=a=>e.capsTooltip=a),content:"大写锁定已打开",placement:"right",manual:""},{default:m((()=>[c(k,{prop:"password"},{default:m((()=>[c(w,{modelValue:e.loginForm.password,"onUpdate:modelValue":a[2]||(a[2]=a=>e.loginForm.password=a),placeholder:"请输入密码",name:"password","prefix-icon":"el-icon-key","show-password":"",onKeyup:[e.checkCapslock,g(e.handleLogin,["enter"])],onBlur:a[3]||(a[3]=a=>e.capsTooltip=!1)},null,8,["modelValue","onKeyup"])])),_:1})])),_:1},8,["modelValue"]),c(F,{loading:e.loading,type:"primary",style:{width:"100%","margin-bottom":"30px"},onClick:v(e.handleLogin,["prevent"])},{default:m((()=>[f(h(e.$t("login.login")),1)])),_:1},8,["loading","onClick"]),c("div",V,[c("div",b,[c("span",null,h(e.$t("login.username"))+": admin",1),c("span",null,h(e.$t("login.password"))+": 123123",1)])])])),_:1},8,["model","rules"])])};export default y;
