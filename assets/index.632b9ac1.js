import{aB as t,aC as a,aD as e,aE as i,aF as o,aG as s,aH as n,aI as r,aJ as c,d as l,ay as d,az as f,aK as h,R as p,e as g,aL as u,K as m,aM as b,aN as _,f as y,o as D,c as x,a as w,F as S,E}from"./index.76b85017.js";import{a as O}from"./templates.daf32bcb.js";import{c as j,g as P,B as C}from"./basic-bar.03c93422.js";class v extends t{constructor(){super("MainTitle",{w:300,h:56}),this.config={title:"我是标题数据",textStyle:{fontFamily:"Microsoft Yahei",fontSize:24,color:"#fff",fontWeight:"normal"},textAlign:"center",writingMode:"horizontal-tb",letterSpacing:0,backgroundStyle:{show:!1,bgColor:"#008bff",borderRadius:15,borderColor:"#fff",borderStyle:"solid",borderWidth:1},ellipsis:!1,urlConfig:{url:"",isBlank:!1}},this.initData()}initData(){const t=[j("title",{description:"标题值",optional:!0}),j("url",{description:"超链接",optional:!0})];return this.apis=a({fields:Object.assign({},...t)}),this.apiData=e(this.id),this.events={},this.actions={},this}async loadData(){try{const t="text/main-title",a=await P(this.id,t);this.apiData.source.config.data=JSON.stringify(a.data)}catch(t){throw t}}}class T extends t{constructor(){super("NumberTitleFlop",{w:350,h:64}),this.config={global:{fontFamily:"Microsoft Yahei",arrangement:"top",distance:0},title:{content:"Typesomething",textStyle:{fontSize:18,color:"#79daff",fontWeight:"normal",textAlign:"flex-start"}},counter:{fontFamily:"Microsoft Yahei",justifyContent:"flex-start",margin:{preNum:0,numSuff:0},prefix:{content:"￥",textStyle:{fontSize:36,color:"#0a73ff",fontWeight:"bolder"}},suffix:{content:"",textStyle:{fontSize:30,color:"#fff",fontWeight:"bolder"}}},numbers:{textStyle:{fontSize:36,color:"#0a73ff",fontWeight:"bolder"},marginRight:0,bgColor:"rgba(51,51,51,0)",bgRadius:6,bgSeparating:!1,digit:0,decimal:0,divisor:0,separatingChart:!0,separatingSymbol:",",decimalSymbol:".",fixedWidth:0,increment:!0,animation:!0,sameDataFlip:!1,duration:1e3}},this.initData()}initData(){const t=[j("title",{description:"标题",optional:!0}),j("value",{description:"翻牌器数值"}),j("prefix",{description:"翻牌器前缀",optional:!0}),j("suffix",{description:"翻牌器后缀",optional:!0})];return this.apis=a({fields:Object.assign({},...t)}),this.apiData=e(this.id),this.events={},this.actions={},this}async loadData(){try{const t="text/number-title-flop",a=await P(this.id,t);this.apiData.source.config.data=JSON.stringify(a.data)}catch(t){throw t}}}class F extends t{constructor(){super("Marquee",{w:300,h:56}),this.config={textStyle:{fontFamily:"Microsoft Yahei",fontSize:18,color:"#fff",fontWeight:"normal"},loop:!0,ifSpeed:!1,duration:8e3,speed:1e3,timeout:1e3},this.initData()}initData(){const t=[j("value",{description:"值"})];return this.apis=a({fields:Object.assign({},...t),description:"跑马灯接口"}),this.apiData=e(this.id),this.events={},this.actions={},this}async loadData(){try{const t="text/marquee",a=await P(this.id,t);this.apiData.source.config.data=JSON.stringify(a.data)}catch(t){throw t}}}class V extends t{constructor(){super("Paragraph",{w:300,h:180}),this.config={content:"DataV 提供运营动态直播、数据综合展示、设备监控预警等多种场景模板，稍加修改就能够直接服务于您的可视化需求。通过拖拽即可实现灵活的可视化布局，在模板的基础上任何人都能够发挥创意，实现您自己的可视化应用。支持阿里云分析数据库、关系型数据库、Restful API、CSV、静态JSON等多种数据来源，且能够动态轮询。能够实现多个数据源汇聚于一个可视化界面中",textStyle:{fontFamily:"Microsoft Yahei",fontSize:16,color:"#fff",fontWeight:"normal"},scroll:{duration:5e3,overScroll:!1},lineHeight:36,textAlign:"left",textIndent:32},this.initData()}initData(){const t=[j("value",{description:"值"})];return this.apis=a({fields:Object.assign({},...t),description:"多行文本接口"}),this.apiData=e(this.id),this.events={},this.actions={},this}async loadData(){try{const t="text/paragraph",a=await P(this.id,t);this.apiData.source.config.data=JSON.stringify(a.data)}catch(t){throw t}}}class M extends t{constructor(){super("DatePicker",{w:250,h:50}),this.config={global:{date:"2021-07-01",fontFamily:"Microsoft Yahei"},input:{size:{width:180,height:30},border:{width:1,color:"#ccc",radius:0},bgColor:"#01becc",fontSize:18,fontColor:"#fff",separator:"-",pos:"left"},calendar:{fontSize:14,fontColor:"#fff",bgColor:"#126973",selectBGColor:"#01becc",border:{width:1,color:"#ccc",radius:5},paddingBorder:{width:1,color:"#ccc",padding:6},select:{time:2,today:4}}},this.initData()}initData(){const t=[j("date",{description:"默认日期",optional:!0})];return this.apis=a({fields:Object.assign({},...t)}),this.apiData=e(this.id),this.events={changed:{description:"当日期变化时",fields:Object.assign({},...t)}},this.actions={},this}async loadData(){try{const t="other/date-picker",a=await P(this.id,t);this.apiData.source.config.data=JSON.stringify(a.data)}catch(t){throw t}}}function B(t){switch(t.substr(1)){case"MainTitle":return new v;case"NumberTitleFlop":return new T;case"DatePicker":return new M;case"BgBox":return new s;case"BorderBox":return new o;case"Decoration":return new i;case"BasicBar":return new C;case"Marquee":return new F;case"Paragraph":return new V;default:throw Error(`Unknown component type: ${t}.`)}}var I=l({name:"ScreenEditor",components:{HeaderToolbar:d((()=>f((()=>import("./index.ef764936.js")),["/assets/index.ef764936.js","/assets/index.089a3722.css","/assets/index.76b85017.js","/assets/index.82b97920.css","/assets/screen.821ccfc1.js","/assets/publish-screen.9fc56e00.js","/assets/publish-screen.8e06d77e.css"]))),FooterToolbar:d((()=>f((()=>import("./index.b6e22d01.js")),["/assets/index.b6e22d01.js","/assets/index.c20c4f3c.css","/assets/index.76b85017.js","/assets/index.82b97920.css"]))),EditorContextMenu:d((()=>f((()=>import("./index.0ef10367.js")),["/assets/index.0ef10367.js","/assets/index.1b0816bb.css","/assets/index.76b85017.js","/assets/index.82b97920.css","/assets/dom.bb0fb5e9.js","/assets/index.f3b9b09c.js"]))),CanvasMain:h((()=>f((()=>import("./index.dd27f310.js")),["/assets/index.dd27f310.js","/assets/index.9b452927.css","/assets/index.76b85017.js","/assets/index.82b97920.css","/assets/dom.bb0fb5e9.js","/assets/index.f3b9b09c.js","/assets/templates.daf32bcb.js","/assets/basic-bar.03c93422.js"]))),LayerPanel:h((()=>f((()=>import("./index.20ef84f8.js")),["/assets/index.20ef84f8.js","/assets/index.c1901e48.css","/assets/index.76b85017.js","/assets/index.82b97920.css","/assets/index.f3b9b09c.js","/assets/dom.bb0fb5e9.js"]))),ComponentsPanel:h((()=>f((()=>import("./index.970b3316.js")),["/assets/index.970b3316.js","/assets/index.4daf3035.css","/assets/index.76b85017.js","/assets/index.82b97920.css","/assets/templates.daf32bcb.js","/assets/basic-bar.03c93422.js"]))),ConfigPanel:h((()=>f((()=>import("./index.9b687516.js")),["/assets/index.9b687516.js","/assets/index.5ea98624.css","/assets/index.76b85017.js","/assets/index.82b97920.css"]))),ToolboxPanel:h((()=>f((()=>import("./index.6db10cf3.js")),["/assets/index.6db10cf3.js","/assets/index.5d65dd95.css","/assets/index.76b85017.js","/assets/index.82b97920.css"]))),FilterManagerDrawer:h((()=>f((()=>import("./filter-manager-drawer.adb9bc6f.js")),["/assets/filter-manager-drawer.adb9bc6f.js","/assets/filter-manager-drawer.975742e9.css","/assets/index.76b85017.js","/assets/index.82b97920.css","/assets/filter-collapse-panel.32bb08a0.js"])))},props:{projectId:{type:[String,Number],required:!0}},setup(t){const a=p(),e=g(!0);return u.enableDebug(),r.setEditMode(),m((async()=>{var i;try{const o=parseInt(a.query.tpl);if(o>0){const{data:a}=await O(o);if(a){const{config:e}=a;r.setEditorOption({screen:{id:+t.projectId,name:a.name},config:{width:e.width,height:e.height,bgimage:e.bgimage,bgcolor:e.bgcolor,styleFilterParams:e.styleFilterParams},coms:e.coms,variables:e.variables}),b.setFilterOption({dataFilters:null!=(i=e.dataFilters)?i:[]})}1===o&&(()=>{const{pageConfig:t}=r;["VMainTitle","VNumberTitleFlop","VDatePicker","VBgBox","VBorderBox","VDecoration","VBasicBar"].forEach((a=>{const e=B(a);e.attr.x=n(t.width-e.attr.w),e.attr.y=n(t.height-e.attr.h),r.addCom(e),e.apis.source&&e.loadData().then((()=>{c.datavComponents[e.id].$DATAV_requestData()}))}))})()}else{const a=+t.projectId;r.loadScreen(a),b.loadFilters(a),await r.loadComs(a)}}catch(o){console.log(o)}finally{e.value=!1,document.title=`${r.screen.name} | 编辑器`,r.autoCanvasScale((()=>({offsetX:_.getPanelOffsetX,offsetY:_.getPanelOffsetY})))}})),{loading:e}}});const A=E(),R=A(((t,a,e,i,o,s)=>{const n=y("header-toolbar"),r=y("el-header"),c=y("layer-panel"),l=y("components-panel"),d=y("filter-manager-drawer"),f=y("toolbox-panel"),h=y("canvas-main"),p=y("g-loading"),g=y("footer-toolbar"),u=y("el-container"),m=y("config-panel"),b=y("editor-context-menu");return D(),x(S,null,[w(u,{class:"edit-container"},{default:A((()=>[w(r,{style:{height:"auto",padding:"0"}},{default:A((()=>[w(n)])),_:1}),w(u,{class:"edit-main-wp"},{default:A((()=>[w(c),w(l),w(d),w(u,{class:"edit-main"},{default:A((()=>[w(f),w(p,{spinning:t.loading},{default:A((()=>[w(h)])),_:1},8,["spinning"]),w(g)])),_:1}),w(m)])),_:1})])),_:1}),w(b)],64)}));I.render=R,I.__scopeId="data-v-f362d1ea";var z=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:I});export{B as c,z as i};
