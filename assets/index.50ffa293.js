var t,e,a=Object.defineProperty,o=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,n=(t,e,o)=>e in t?a(t,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[e]=o,s=(t,e)=>{for(var a in e||(e={}))i.call(e,a)&&n(t,a,e[a]);if(o)for(var a of o(e))r.call(e,a)&&n(t,a,e[a]);return t};import{aG as l,aH as c,aI as d,aJ as f,aK as p,aL as u,aM as g,aN as b,d as h,aD as m,aE as _,aO as y,O as x,e as w,aP as D,H as j,aQ as O,aR as S,f as E,o as P,c as v,a as T,F as C,R as F}from"./index.33f1ab50.js";import{a as I}from"./templates.3565a7f3.js";function V(t,e){return{[t]:s({type:"string",map:"",description:"",optional:!1},null!=e?e:{})}}(e=t||(t={})).string="string",e.number="number",e.boolean="boolean",e.array="array",e.object="object",e.null="null";class M extends l{constructor(){super("MainTitle",{w:300,h:56}),this.config={title:"我是标题数据",textStyle:{fontFamily:"Microsoft Yahei",fontSize:24,color:"#fff",fontWeight:"normal"},textAlign:"center",writingMode:"horizontal-tb",letterSpacing:0,backgroundStyle:{show:!1,bgColor:"#008bff",borderRadius:15,borderColor:"#fff",borderStyle:"solid",borderWidth:1},ellipsis:!1,urlConfig:{url:"",isBlank:!1}},this.initData()}initData(){const t=[V("title",{description:"标题值",optional:!0}),V("url",{description:"超链接",optional:!0})];return this.apis=c({},"source",{fields:Object.assign({},...t)}),this.apiData=d(this.id,{},"source",{title:"我是标题数据",url:""}),this.events={},this.actions={},this}}class R extends l{constructor(){super("NumberTitleFlop",{w:350,h:64}),this.config={global:{fontFamily:"Microsoft Yahei",arrangement:"top",distance:0},title:{content:"Typesomething",textStyle:{fontSize:18,color:"#79daff",fontWeight:"normal",textAlign:"flex-start"}},counter:{fontFamily:"Microsoft Yahei",justifyContent:"flex-start",margin:{preNum:0,numSuff:0},prefix:{content:"￥",textStyle:{fontSize:36,color:"#0a73ff",fontWeight:"bolder"}},suffix:{content:"",textStyle:{fontSize:30,color:"#fff",fontWeight:"bolder"}}},numbers:{textStyle:{fontSize:36,color:"#0a73ff",fontWeight:"bolder"},marginRight:0,bgColor:"rgba(51,51,51,0)",bgRadius:6,bgSeparating:!1,digit:0,decimal:0,divisor:0,separatingChart:!0,separatingSymbol:",",decimalSymbol:".",fixedWidth:0,increment:!0,animation:!0,sameDataFlip:!1,duration:1e3}},this.initData()}initData(){const t=[V("title",{description:"标题",optional:!0}),V("value",{description:"翻牌器数值"}),V("prefix",{description:"翻牌器前缀",optional:!0}),V("suffix",{description:"翻牌器后缀",optional:!0})];return this.apis=c({},"source",{fields:Object.assign({},...t)}),this.apiData=d(this.id,{},"source",{title:"",value:"123456.7"}),this.events={},this.actions={},this}}class A extends l{constructor(){super("DatePicker",{w:250,h:50}),this.config={global:{date:"2021-07-01",fontFamily:"Microsoft Yahei"},input:{size:{width:180,height:30},border:{width:1,color:"#ccc",radius:0},bgColor:"#01becc",fontSize:18,fontColor:"#fff",separator:"-",pos:"left"},calendar:{fontSize:14,fontColor:"#fff",bgColor:"#126973",selectBGColor:"#01becc",border:{width:1,color:"#ccc",radius:5},paddingBorder:{width:1,color:"#ccc",padding:6},select:{time:2,today:4}}},this.initData()}initData(){const t=[V("date",{description:"默认日期",optional:!0})];return this.apis=c({},"source",{fields:Object.assign({},...t)}),this.apiData=d(this.id,{},"source",{}),this.events={changed:{type:"string",description:"当日期变化时",fields:Object.assign({},...t)}},this.actions={},this}}function B(t){switch(t.substr(1)){case"MainTitle":return new M;case"NumberTitleFlop":return new R;case"DatePicker":return new A;case"BgBox":return new u;case"BorderBox":return new p;case"Decoration":return new f;default:throw Error(`Unknown component type: ${t}.`)}}var L=h({name:"ScreenEditor",components:{HeaderToolbar:m((()=>_((()=>import("./index.833c0865.js")),["/assets/index.833c0865.js","/assets/index.089a3722.css","/assets/index.33f1ab50.js","/assets/index.fbc9cb84.css","/assets/screen.211fc4e5.js","/assets/publish-screen.6024e715.js","/assets/publish-screen.8e06d77e.css"]))),FooterToolbar:m((()=>_((()=>import("./index.88e28660.js")),["/assets/index.88e28660.js","/assets/index.c20c4f3c.css","/assets/index.33f1ab50.js","/assets/index.fbc9cb84.css"]))),EditorContextMenu:m((()=>_((()=>import("./index.3877f962.js")),["/assets/index.3877f962.js","/assets/index.1b0816bb.css","/assets/index.33f1ab50.js","/assets/index.fbc9cb84.css","/assets/dom.ad4043d1.js","/assets/index.ec0e95dd.js"]))),CanvasMain:y((()=>_((()=>import("./index.e8a3eeba.js")),["/assets/index.e8a3eeba.js","/assets/index.79a493aa.css","/assets/index.33f1ab50.js","/assets/index.fbc9cb84.css","/assets/dom.ad4043d1.js","/assets/index.ec0e95dd.js","/assets/templates.3565a7f3.js"]))),LayerPanel:y((()=>_((()=>import("./index.91a9492a.js")),["/assets/index.91a9492a.js","/assets/index.c1901e48.css","/assets/index.33f1ab50.js","/assets/index.fbc9cb84.css","/assets/index.ec0e95dd.js","/assets/dom.ad4043d1.js"]))),ComponentsPanel:y((()=>_((()=>import("./index.4b4592fa.js")),["/assets/index.4b4592fa.js","/assets/index.4daf3035.css","/assets/index.33f1ab50.js","/assets/index.fbc9cb84.css","/assets/templates.3565a7f3.js"]))),ConfigPanel:y((()=>_((()=>import("./index.022c6746.js")),["/assets/index.022c6746.js","/assets/index.5ea98624.css","/assets/index.33f1ab50.js","/assets/index.fbc9cb84.css"]))),ToolboxPanel:y((()=>_((()=>import("./index.b9f24216.js")),["/assets/index.b9f24216.js","/assets/index.11ed9e79.css","/assets/index.33f1ab50.js","/assets/index.fbc9cb84.css"]))),FilterManagerDrawer:y((()=>_((()=>import("./filter-manager-drawer.8d349434.js")),["/assets/filter-manager-drawer.8d349434.js","/assets/filter-manager-drawer.975742e9.css","/assets/index.33f1ab50.js","/assets/index.fbc9cb84.css","/assets/filter-collapse-panel.63681866.js"])))},props:{projectId:{type:[String,Number],required:!0}},setup(t){const e=x(),a=w(!0);return D.enableDebug(),b.setEditMode(),j((async()=>{var o;try{const i=parseInt(e.query.tpl);if(i>0){const{data:e}=await I(i);if(e){const{config:a}=e;b.setOption({screen:{id:+t.projectId,name:e.name},config:{width:a.width,height:a.height,bgimage:a.bgimage,bgcolor:a.bgcolor,styleFilterParams:a.styleFilterParams},coms:a.coms,variables:a.variables}),O.setOption({dataFilters:null!=(o=a.dataFilters)?o:[]})}1===i&&(()=>{const{pageConfig:t}=b;["VMainTitle","VNumberTitleFlop","VDatePicker","VBgBox","VBorderBox","VDecoration"].forEach((e=>{const a=B(e);a.attr.x=g(t.width-a.attr.w),a.attr.y=g(t.height-a.attr.h),b.addCom(a)}))})()}else{const e=+t.projectId;b.loadScreen(e),O.loadFilters(e),await b.loadComs(e)}}catch(i){console.log(i)}finally{a.value=!1,document.title=`${b.screen.name} | 编辑器`,b.autoCanvasScale((()=>({offsetX:S.getPanelOffsetX,offsetY:S.getPanelOffsetY})))}})),{loading:a}}});const z=F(),W=z(((t,e,a,o,i,r)=>{const n=E("header-toolbar"),s=E("el-header"),l=E("layer-panel"),c=E("components-panel"),d=E("filter-manager-drawer"),f=E("toolbox-panel"),p=E("canvas-main"),u=E("g-loading"),g=E("footer-toolbar"),b=E("el-container"),h=E("config-panel"),m=E("editor-context-menu");return P(),v(C,null,[T(b,{class:"edit-container"},{default:z((()=>[T(s,{style:{height:"auto",padding:"0"}},{default:z((()=>[T(n)])),_:1}),T(b,{class:"edit-main-wp"},{default:z((()=>[T(l),T(c),T(d),T(b,{class:"edit-main"},{default:z((()=>[T(f),T(u,{spinning:t.loading},{default:z((()=>[T(p)])),_:1},8,["spinning"]),T(g)])),_:1}),T(h)])),_:1})])),_:1}),T(m)],64)}));L.render=W,L.__scopeId="data-v-0d9bc7e0";var k=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:L});export{B as c,k as i};
