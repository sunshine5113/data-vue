import{a5 as l,a9 as p,ac as i,a3 as O,b2 as W,bg as X,a8 as Z,aG as y,a4 as u,bl as q,aZ as s,b3 as c,aa as v,ab as m,ad as L,ae as J,ba as Q,be as R,bf as Y,aO as U,bi as z,aj as P,af as H,a6 as f,ag as w}from"./vendor.60e09344.js";import{b as A,H as K,E as _,V as x,X as g}from"./App.1a480446.js";import{I as ee}from"./warning.85b7d1f4.js";import{I as oe}from"./delete.af2293e1.js";import{I as se}from"./back.19ee7c5e.js";import{I as ne,a as te,b as ae,c as le,d as ie}from"./lock.d87b623c.js";import{I as ce}from"./hide.c72287c6.js";import{I as de}from"./view-grid.cf67270e.js";import{u as re}from"./index.a77ec668.js";import"./dom.cd0136fc.js";const ue={},ve={t:"1639130612954",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"3985",width:"64",height:"64"},pe=i("path",{d:"M116.4921875 116.4921875l0 186.12132317 791.015625 0 0-186.12132317-791.015625 0zM860.9774817 256.08317987l-697.9549634 0 0-93.06066158 697.95496341 0 0 93.06066158zM116.4921875 581.79549619l791.015625 0 0-186.12132317-791.015625 0 0 186.12132317zM163.0225183 442.20450381l697.9549634 0 0 93.06066158-697.95496341 0 0-93.06066158zM116.4921875 860.9774817l791.015625 1e-8 0-186.12132317-791.015625 0 0 186.12132317zM163.0225183 721.38648933l697.9549634 0 0 93.0606616-697.95496341 0 0-93.0606616z","p-id":"3986"},null,-1),me=[pe];function ye(o,d){return l(),p("svg",ve,me)}var he=A(ue,[["render",ye]]);const Ce=O({name:"LayerPanel",components:{IconViewList:he,IconViewGrid:de,IconBack:se,IconMoveUp:ne,IconMoveDown:te,IconMoveTop:ae,IconMoveBottom:le,IconLock:ie,IconHide:ce,IconDelete:oe},setup(){const o=W(),d=X(),j=Z(!1),M=y(()=>K.layer.show),F=y(()=>[..._.coms].reverse()),t=y(()=>_.selectedCom),B=y(()=>!!t.value),a=y(()=>{var r;return{enable:!!t.value,checked:(r=t.value)==null?void 0:r.locked}}),I=y(()=>{var r;return{enable:!!t.value,checked:(r=t.value)==null?void 0:r.hided}}),$=y(()=>({opacity:t.value?1:.3})),D=()=>{K.setPanelState({type:x.layer,value:!M.value})},E=r=>{_.selectCom(r)},h=r=>{t.value&&_.moveCom({id:t.value.id,moveType:r})},T=()=>h(g.up),V=()=>h(g.down),C=()=>h(g.top),k=()=>h(g.bottom),S=()=>{t.value&&(t.value.locked=!t.value.locked)},b=()=>{t.value&&(t.value.hided=!t.value.hided)},e=()=>{const r=t.value;if(r){const G=d.create({content:"\u662F\u5426\u5220\u9664\u9009\u4E2D\u76841\u4E2A\u7EC4\u4EF6",negativeText:"\u53D6\u6D88",positiveText:"\u786E\u5B9A",iconPlacement:"top",icon:()=>Q(ee),onPositiveClick:async()=>{G.loading=!0;try{await _.deleteCom(r)}catch(N){o.error(N.message)}}})}},{showMenu:n}=re();return{showText:j,visiblePanel:M,descComs:F,enableBtnClass:B,enableLockBtnClass:a,enableHideBtnClass:I,enableBtnStyle:$,changeVisible:D,selectCom:E,moveUp:T,moveDown:V,moveTop:C,moveBottom:k,lockCom:S,hideCom:b,toDeleteCom:e,showMenu:n}}}),ke=o=>(R("data-v-01769368"),o=o(),Y(),o),_e={class:"layer-manager"},be={class:"layer-manager-top"},fe=ke(()=>i("div",{class:"layer-num"},"\u56FE\u5C42",-1)),we={class:"layer-layout"},ge={class:"layer-toolbar layer-toolbar-top"},Me={class:"layer-manager-wrap"},Be=["title","onMousedown","onMouseenter","onMouseleave"],Ie=["onUpdate:modelValue","onBlur","onKeydown"],$e={key:1,class:"layer-item-span"},De={class:"layer-item-text"},Ee=["title","onMousedown","onMouseenter","onMouseleave"],Te=["alt"],Ve={class:"layer-manager-thumbail"},Se=["onUpdate:modelValue","onBlur","onKeydown"],je={key:1,class:"layer-item-span"},Fe={class:"layer-item-text"},Le={class:"layer-thumbail-item"},Ue={class:"layer-toolbar layer-toolbar-bottom"};function ze(o,d,j,M,F,t){const B=u("IconViewGrid"),a=u("n-icon"),I=u("IconViewList"),$=u("IconBack"),D=u("IconMoveUp"),E=u("IconMoveDown"),h=u("IconMoveTop"),T=u("IconMoveBottom"),V=u("g-com-icon"),C=u("IconHide"),k=u("IconLock"),S=u("IconDelete"),b=q("focus");return l(),p("div",{class:v(["g-aside layer-panel-wp",{"--hide":!o.visiblePanel}])},[i("div",_e,[i("div",be,[fe,i("div",we,[s(a,{title:"\u7F29\u7565\u56FE\u7248",class:v(["btn-icon",{selected:!o.showText}]),onClick:d[0]||(d[0]=e=>o.showText=!1)},{default:c(()=>[s(B)]),_:1},8,["class"]),s(a,{title:"\u6587\u5B57\u7248",class:v(["btn-icon",{selected:o.showText}]),onClick:d[1]||(d[1]=e=>o.showText=!0)},{default:c(()=>[s(I)]),_:1},8,["class"]),s(a,{title:"\u6536\u8D77",class:"btn-icon",onClick:o.changeVisible},{default:c(()=>[s($)]),_:1},8,["onClick"])])]),i("div",ge,[s(a,{title:"\u4E0A\u79FB\u4E00\u5C42",class:v(["toolbar-icon standard",o.enableBtnClass]),style:m(o.enableBtnStyle),onClick:o.moveUp},{default:c(()=>[s(D)]),_:1},8,["class","style","onClick"]),s(a,{title:"\u4E0B\u79FB\u4E00\u5C42",class:v(["toolbar-icon standard",o.enableBtnClass]),style:m(o.enableBtnStyle),onClick:o.moveDown},{default:c(()=>[s(E)]),_:1},8,["class","style","onClick"]),s(a,{title:"\u7F6E\u9876",class:v(["toolbar-icon standard",o.enableBtnClass]),style:m(o.enableBtnStyle),onClick:o.moveTop},{default:c(()=>[s(h)]),_:1},8,["class","style","onClick"]),s(a,{title:"\u7F6E\u5E95",class:v(["toolbar-icon standard",o.enableBtnClass]),style:m(o.enableBtnStyle),onClick:o.moveBottom},{default:c(()=>[s(T)]),_:1},8,["class","style","onClick"])]),i("div",Me,[(l(!0),p(L,null,J(o.descComs,e=>(l(),p(L,{key:e.id},[o.showText?(l(),p("div",{key:0,title:e.alias,class:v(["layer-manager-item",[{hided:e.hided,locked:e.locked,hovered:e.hovered,selected:e.selected}]]),onMousedown:n=>o.selectCom(e.id),onMouseenter:n=>e.hovered=!0,onMouseleave:n=>e.hovered=!1,onContextmenu:d[2]||(d[2]=(...n)=>o.showMenu&&o.showMenu(...n))},[s(V,{icon:e.icon},null,8,["icon"]),e.renameing?U((l(),p("input",{key:0,"onUpdate:modelValue":n=>e.alias=n,class:"layer-item-input",onBlur:n=>e.renameing=!1,onKeydown:P(n=>e.renameing=!1,["enter"])},null,40,Ie)),[[z,e.alias,void 0,{trim:!0}],[b]]):(l(),p("span",$e,[i("span",De,H(e.alias),1)])),e.hided?(l(),f(a,{key:2,class:"show-toggle-btn",onClick:n=>e.hided=!1},{default:c(()=>[s(C)]),_:2},1032,["onClick"])):w("",!0),e.locked?(l(),f(a,{key:3,class:"show-toggle-btn",onClick:n=>e.locked=!1},{default:c(()=>[s(k)]),_:2},1032,["onClick"])):w("",!0)],42,Be)):(l(),p("div",{key:1,title:e.alias,class:v(["layer-manager-item thumbail-wrap",[{hided:e.hided,locked:e.locked,hovered:e.hovered,selected:e.selected}]]),onMousedown:n=>o.selectCom(e.id),onMouseenter:n=>e.hovered=!0,onMouseleave:n=>e.hovered=!1,onContextmenu:d[3]||(d[3]=(...n)=>o.showMenu&&o.showMenu(...n))},[i("div",{class:"layer-item-thumbail",alt:e.alias,style:m(`background-image: url(${e.img})`)},null,12,Te),i("div",Ve,[e.renameing?U((l(),p("input",{key:0,"onUpdate:modelValue":n=>e.alias=n,class:"layer-item-input",onBlur:n=>e.renameing=!1,onKeydown:P(n=>e.renameing=!1,["enter"])},null,40,Se)),[[z,e.alias,void 0,{trim:!0}],[b]]):(l(),p("span",je,[i("span",Fe,H(e.alias),1)]))]),i("div",Le,[e.hided?(l(),f(a,{key:0,class:"show-toggle-btn",onClick:n=>e.hided=!1},{default:c(()=>[s(C)]),_:2},1032,["onClick"])):w("",!0),e.locked?(l(),f(a,{key:1,class:"show-toggle-btn",onClick:n=>e.locked=!1},{default:c(()=>[s(k)]),_:2},1032,["onClick"])):w("",!0)])],42,Ee))],64))),128)),i("div",{class:"last-flex-item",onClick:d[4]||(d[4]=e=>o.selectCom(""))})]),i("div",Ue,[s(a,{title:"\u5220\u9664",class:v(["toolbar-icon standard",o.enableBtnClass]),style:m(o.enableBtnStyle),onClick:o.toDeleteCom},{default:c(()=>[s(S)]),_:1},8,["class","style","onClick"]),s(a,{title:"\u9501\u5B9A",class:v(["toolbar-icon standard",o.enableLockBtnClass]),style:m(o.enableBtnStyle),onClick:o.lockCom},{default:c(()=>[s(k)]),_:1},8,["class","style","onClick"]),s(a,{title:"\u9690\u85CF",class:v(["toolbar-icon standard",o.enableHideBtnClass]),style:m(o.enableBtnStyle),onClick:o.hideCom},{default:c(()=>[s(C)]),_:1},8,["class","style","onClick"])])])],2)}var qe=A(Ce,[["render",ze],["__scopeId","data-v-01769368"]]);export{qe as default};
