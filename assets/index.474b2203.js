var e=Object.defineProperty,t=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,n=(t,a,o)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[a]=o;import{au as l,av as s,aw as i,ax as c,ay as r,az as d,d as u,aA as m,l as v,m as p,A as f,aB as h,y as b,z as g,k as y,p as C,v as x,F as _,r as w,w as k,o as S,h as P,aC as L,ag as M,ah as T,ap as D,ar as E,s as j,aD as I,e as O,aE as F,aF as V,af as A,aq as H,t as z,aG as R,aH as Y,aI as W}from"./index.d46a2555.js";import{o as $,b as N}from"./dom.1228cadc.js";class U extends l{constructor(){super("MainTitle",{w:300,h:56}),this.config={title:"我是标题数据",textStyle:{fontFamily:"Microsoft Yahei",fontSize:24,color:"#fff",fontWeight:"normal"},textAlign:"center",writingMode:"horizontal-tb",letterSpacing:0,backgroundStyle:{show:!1,bgColor:"#008bff",borderRadius:15,borderColor:"#fff",borderStyle:"solid",borderWidth:1},ellipsis:!1,urlConfig:{url:"",isBlank:!1}},this.events={},this.initData()}initData(){const e=[s("title",{description:"标题值",optional:!0}),s("url",{description:"超链接",optional:!0})];return this.apis=i({},"source",{fields:Object.assign({},...e)}),this.apiData=c(this.id,{},"source",{title:"我是标题数据",url:""}),this}}class B extends l{constructor(){super("NumberTitleFlop",{w:350,h:100}),this.config={arrangement:"top",distance:0,title:{content:"我是标题",textStyle:{fontFamily:"Microsoft Yahei",fontSize:15,color:"#fff",fontWeight:"lighter"},textAlign:"center"},counter:{fontFamily:"Microsoft Yahei",justifyContent:"flex-start",margin:{preNum:0,numSuff:0},prefix:{content:"￥",textStyle:{fontSize:50,color:"#fff",fontWeight:"normal"}},suffix:{content:"元",textStyle:{fontSize:30,color:"#fff",fontWeight:"normal"}}},numbers:{textStyle:{fontSize:50,color:"#fff600",fontWeight:"normal"},marginRight:0,bgColor:"rgba(51,51,51,0)",bgRadius:6,bgSeparating:!1,digit:0,decimal:0,divisor:0,separatingChart:!0,separatingSymbol:",",decimalSymbol:".",fixedWidth:0,increment:!0,animation:!0,sameDataFlip:!1,duration:1e3}},this.events={},this.initData()}initData(){const e=[s("title",{description:"标题",optional:!0}),s("value",{description:"翻牌器数值"}),s("prefix",{description:"翻牌器前缀",optional:!0}),s("suffix",{description:"翻牌器后缀",optional:!0})];return this.apis=i({},"source",{fields:Object.assign({},...e)}),this.apiData=c(this.id,{},"source",{title:"",value:"12345.67"}),this}}function X(e){switch(e.substr(1)){case"MainTitle":return new U;case"NumberTitleFlop":return new B;default:throw Error(`Unknown component type: ${e}.`)}}var K=u({name:"HeadLoading",computed:{loadingClass:()=>({"loading-indicator":!0,loading:m.loading>0})}});const q=f()(((e,t,a,o,n,l)=>(v(),p("div",{class:e.loadingClass},null,2))));K.render=q,K.__scopeId="data-v-8fb5bcb8";var G=u({name:"HeaderToolber",components:{HeadLoading:K},computed:{screen:()=>d.screen,layer:()=>m.layer.show,components:()=>m.components.show,config:()=>m.config.show,toolbox:()=>m.toolbox.show,filter:()=>m.filter.show},methods:{changeLayerPanel(){m.setPanelState({type:h.layer,value:!this.layer})},changeComponentsPanel(){m.setPanelState({type:h.components,value:!this.components})},changeConfigPanel(){m.setPanelState({type:h.config,value:!this.config})},changeToolboxPanel(){m.setPanelState({type:h.toolbox,value:!this.toolbox})},changeFilterPanel(){m.filter.show=!this.filter}}});const J=f();b("data-v-66f569ee");const Q=C("i",{class:"v-icon-back"},null,-1),Z={class:"editor-header-wp"},ee={class:"editor-config"},te=C("i",{class:"v-icon-layer head-btn-icon"},null,-1),ae=C("i",{class:"v-icon-rpanel head-btn-icon"},null,-1),oe=C("i",{class:"v-icon-toolbox head-btn-icon"},null,-1),ne={class:"drawer-actions"},le=C("i",{class:"v-icon-filter head-btn-icon"},null,-1),se=C("div",{class:["head-btn mr4"]},[C("i",{class:"v-icon-magic head-btn-icon"})],-1),ie=C("div",{class:["head-btn mr4"]},[C("i",{class:"v-icon-mobile head-btn-icon"})],-1),ce={class:"screen-info"},re={class:"global-actions"},de=C("div",{class:"head-btn ml4"},[C("i",{class:"v-icon-save head-btn-icon"})],-1),ue={class:"head-btn ml4"},me=C("i",{class:"v-icon-help head-btn-icon"},null,-1),ve=C("div",{class:"head-btn ml4"},[C("i",{class:"v-icon-release head-btn-icon"})],-1),pe={class:"head-btn ml4"},fe=C("i",{class:"v-icon-preview head-btn-icon"},null,-1);g();const he=J(((e,t,a,o,n,l)=>{const s=y("el-tooltip"),i=y("router-link"),c=y("el-col"),r=y("el-row"),d=y("head-loading");return v(),p(_,null,[C(r,{class:"edit-header-wrap"},{default:J((()=>[C(c,{class:"edit-header"},{default:J((()=>[C(s,{content:"返回",effect:"blue",enterable:!1},{default:J((()=>[C("div",{class:"back-btn",onClick:t[1]||(t[1]=t=>e.$router.push("/"))},[Q])])),_:1}),C("div",Z,[C("div",ee,[C(s,{content:"图层",effect:"blue","open-delay":500,enterable:!1},{default:J((()=>[C("div",{class:["head-btn mr4",{"--selected":e.layer}],onClick:t[2]||(t[2]=(...t)=>e.changeLayerPanel&&e.changeLayerPanel(...t))},[te],2)])),_:1}),C(s,{content:"组件列表",effect:"blue","open-delay":500,enterable:!1},{default:J((()=>[C("div",{class:["head-btn mr4",{"--selected":e.components}],onClick:t[3]||(t[3]=(...t)=>e.changeComponentsPanel&&e.changeComponentsPanel(...t))},[C("i",{class:["v-icon-box com-list-icon",{"--rotate":!e.components}]},null,2)],2)])),_:1}),C(s,{content:"右侧面板",effect:"blue","open-delay":500,enterable:!1},{default:J((()=>[C("div",{class:["head-btn mr4",{"--selected":e.config}],onClick:t[4]||(t[4]=(...t)=>e.changeConfigPanel&&e.changeConfigPanel(...t))},[ae],2)])),_:1}),C(s,{content:"工具箱",effect:"blue","open-delay":500,enterable:!1},{default:J((()=>[C("div",{class:["head-btn mr4",{"--selected":e.toolbox}],onClick:t[5]||(t[5]=(...t)=>e.changeToolboxPanel&&e.changeToolboxPanel(...t))},[oe],2)])),_:1})]),C("div",ne,[C(s,{content:"数据过滤器",effect:"blue","open-delay":500,enterable:!1},{default:J((()=>[C("div",{class:["head-btn mr4",{"--selected":e.filter}],onClick:t[6]||(t[6]=(...t)=>e.changeFilterPanel&&e.changeFilterPanel(...t))},[le],2)])),_:1}),C(s,{content:"美化工具箱",effect:"blue","open-delay":500,enterable:!1},{default:J((()=>[se])),_:1}),C(s,{content:"迁移至移动端",effect:"blue","open-delay":500,enterable:!1},{default:J((()=>[ie])),_:1})])]),C("div",ce,[C("i",{class:"v-icon-workspace workspace-icon",onClick:t[7]||(t[7]=t=>e.$router.push("/"))}),C("span",null,x("工作空间 - "+e.screen.name),1)]),C("div",re,[C(s,{content:"保存",effect:"blue","open-delay":500,enterable:!1},{default:J((()=>[de])),_:1}),C(s,{content:"帮助",effect:"blue","open-delay":500,enterable:!1},{default:J((()=>[C("div",ue,[C(i,{to:{name:"MyCase"},target:"_blank",class:"full-a"},{default:J((()=>[me])),_:1})])])),_:1}),C(s,{content:"发布",effect:"blue","open-delay":500,enterable:!1},{default:J((()=>[ve])),_:1}),C(s,{content:"预览",effect:"blue","open-delay":500,enterable:!1},{default:J((()=>[C("div",pe,[C(i,{to:{name:"Screen",params:{projectId:e.screen.id}},target:"_blank",class:"full-a"},{default:J((()=>[fe])),_:1},8,["to"])])])),_:1})])])),_:1})])),_:1}),C(d)],64)}));G.render=he,G.__scopeId="data-v-66f569ee";var be=u({name:"FooterToolbar",setup(){const e=w([200,150,100,50]),l=w(20),s=w(20),i=w(!1),c=w(!1),r=()=>{i.value=!1,document.removeEventListener("click",r,!1)},u=()=>({offsetX:m.getPanelOffsetX,offsetY:m.getPanelOffsetY});k((()=>d.canvas.scale),(e=>{const t=parseInt((100*e).toFixed(2));l.value=t,s.value=t}));const v=e=>{const t=e.target;if(!["input","textarea"].includes(t.tagName.toLowerCase())){const t=L();if(!t&&e.ctrlKey||t&&e.metaKey){const t=e.key.toLowerCase(),{setPanelState:a}=m;"arrowleft"===t?a({type:h.layer,value:!m.layer.show}):"arrowup"===t?a({type:h.components,value:!m.components.show}):"arrowright"===t?a({type:h.config,value:!m.config.show}):"a"===t&&d.autoCanvasScale(u),e.preventDefault()}}};return S((()=>{document.addEventListener("keydown",v,!1)})),P((()=>{document.removeEventListener("keydown",v,!1)})),{scaleList:e,scale:l,inputScale:s,visibleScaleList:i,showScaleList:()=>{i.value=!0,document.addEventListener("click",r,!1)},useSlider:c,submitScale:async e=>{-1===e?d.autoCanvasScale(u):d.setCanvasScale(((e,l)=>{for(var s in l||(l={}))a.call(l,s)&&n(e,s,l[s]);if(t)for(var s of t(l))o.call(l,s)&&n(e,s,l[s]);return e})({scale:0===e?s.value:e},u())),r()}}}});const ge=f();b("data-v-501a70aa");const ye=C("i",{class:"v-icon-keyboard shortcut-btn"},null,-1),Ce=C("div",{class:"shortcut-wp"},[C("div",{class:"shortcut-item"},[C("div",{class:"shortcut-title"},"开关图层面板"),C("div",{class:"shortcut-value"},"Ctrl/Cmd + ←")]),C("div",{class:"shortcut-item"},[C("div",{class:"shortcut-title"},"切换组件面板"),C("div",{class:"shortcut-value"},"Ctrl/Cmd + ↑")]),C("div",{class:"shortcut-item"},[C("div",{class:"shortcut-title"},"切换右侧面板"),C("div",{class:"shortcut-value"},"Ctrl/Cmd + →")]),C("div",{class:"shortcut-item"},[C("div",{class:"shortcut-title"},"画布缩放到最佳位置"),C("div",{class:"shortcut-value"},"Ctrl/Cmd + a")])],-1),xe={class:"scale-input-wp"},_e=C("span",{class:"percent"},"%",-1),we={class:"scale-value-list"},ke={class:"scale-slider-wp"};g();const Se=ge(((e,t,a,o,n,l)=>{const s=y("el-popover"),i=y("el-slider"),c=y("el-footer");return v(),p(c,{height:"32px",class:"bottom-sider"},{default:ge((()=>[C(s,{width:"235",placement:"top",trigger:"hover","popper-class":"editor-popover"},{reference:ge((()=>[ye])),default:ge((()=>[Ce])),_:1}),C("div",xe,[M(C("input",{"onUpdate:modelValue":t[1]||(t[1]=t=>e.inputScale=t),type:"number",class:"scale-input",onKeydown:t[2]||(t[2]=D((t=>e.submitScale(0)),["enter"]))},null,544),[[T,e.inputScale]]),_e,C(s,{visible:e.visibleScaleList,width:"56",placement:"top",trigger:"click","popper-class":"editor-popover","show-arrow":!1,offset:5},{reference:ge((()=>[C("i",{class:"el-icon-arrow-down open-icon",onClick:t[4]||(t[4]=E(((...t)=>e.showScaleList&&e.showScaleList(...t)),["stop"]))})])),default:ge((()=>[C("div",we,[(v(!0),p(_,null,j(e.scaleList,(t=>(v(),p("div",{key:t,class:"scale-value-item",onClick:a=>e.submitScale(t)},x(`${t}%`),9,["onClick"])))),128)),C("div",{class:"scale-value-item",onClick:t[3]||(t[3]=t=>e.submitScale(-1))},"自适应")])])),_:1},8,["visible"])]),C("div",ke,[C(i,{modelValue:e.scale,"onUpdate:modelValue":t[5]||(t[5]=t=>e.scale=t),min:10,max:200,step:5,"show-tooltip":!1,onChange:e.submitScale},null,8,["modelValue","onChange"])])])),_:1})}));be.render=Se,be.__scopeId="data-v-501a70aa";const Pe=I({x:0,y:0}),Le=e=>{const t=O((()=>d.contextMenu)),a=O((()=>d.selectedCom)),o=O((()=>{var e;return null==(e=a.value)?void 0:e.locked})),n=O((()=>{var e;return null==(e=a.value)?void 0:e.hided})),l=O((()=>({display:t.value.show?"block":"none",left:`${Pe.x+10}px`,top:`${Pe.y+10}px`,transform:document.documentElement.clientHeight-Pe.y<250?"translate(0px, -100%)":""}))),s=()=>{N(document,"click",s),e&&e.beforeClose&&e.beforeClose(),t.value.show=!1};return{contextMenu:t,selectedCom:a,isLocked:o,isHided:n,contextMenuStyle:l,showMenu:e=>{e.preventDefault(),a.value&&(Pe.x=e.clientX,Pe.y=e.clientY,t.value.show=!0,$(document,"click",s))},hideMenu:s}};var Me=u({name:"EditorContextMenu",setup(){const{contextMenu:e,selectedCom:t,isLocked:a,isHided:o,contextMenuStyle:n}=Le(),l=e=>{t.value&&d.moveCom({id:t.value.id,moveType:e})},s=e=>e.preventDefault();return F((()=>{$(document,"contextmenu",s)})),P((()=>{N(document,"contextmenu",s)})),{contextMenu:e,isLocked:a,isHided:o,contextMenuStyle:n,moveUp:()=>l(V.up),moveDown:()=>l(V.down),moveTop:()=>l(V.top),moveBottom:()=>l(V.bottom),lockCom:()=>{t.value&&(t.value.locked=!t.value.locked)},hideCom:()=>{t.value&&(t.value.hided=!t.value.hided)},toDeleteCom:()=>{const e=t.value;e&&A.confirmAsync("是否删除选中的1个组件",(()=>d.deleteCom(e)))},renameCom:()=>{t.value&&(t.value.renameing=!0)},toCopyCom:()=>{t.value&&d.copyCom(t.value.id)}}}});const Te=f();b("data-v-e35305b2");const De=C("i",{class:"menu-icon v-icon-move-top"},null,-1),Ee=z("置顶 "),je=C("i",{class:"menu-icon v-icon-move-bottom"},null,-1),Ie=z("置底 "),Oe=C("i",{class:"menu-icon v-icon-move-up"},null,-1),Fe=z("上移一层 "),Ve=C("i",{class:"menu-icon v-icon-move-down"},null,-1),Ae=z("下移一层 "),He=C("div",{class:"context-menu-divider"},null,-1),ze=C("i",{class:"menu-icon v-icon-unlock"},null,-1),Re=z("解锁 "),Ye=C("i",{class:"menu-icon v-icon-lock"},null,-1),We=z("锁定 "),$e=C("i",{class:"menu-icon v-icon-show"},null,-1),Ne=z("显示 "),Ue=C("i",{class:"menu-icon v-icon-hide"},null,-1),Be=z("隐藏 "),Xe=C("div",{class:"context-menu-divider"},null,-1),Ke=C("i",{class:"menu-icon v-icon-edit"},null,-1),qe=z("重命名 "),Ge=C("i",{class:"menu-icon v-icon-copy"},null,-1),Je=z("复制 "),Qe=C("i",{class:"menu-icon v-icon-delete"},null,-1),Ze=z("删除 "),et=C("div",{class:"context-menu-divider"},null,-1);g();const tt=Te(((e,t,a,o,n,l)=>e.contextMenu.show?(v(),p("div",{key:0,class:"context-menu-wrap",style:e.contextMenuStyle},[C("div",{class:"context-menu-item",onClick:t[1]||(t[1]=(...t)=>e.moveTop&&e.moveTop(...t))},[De,Ee]),C("div",{class:"context-menu-item",onClick:t[2]||(t[2]=(...t)=>e.moveBottom&&e.moveBottom(...t))},[je,Ie]),C("div",{class:"context-menu-item",onClick:t[3]||(t[3]=(...t)=>e.moveUp&&e.moveUp(...t))},[Oe,Fe]),C("div",{class:"context-menu-item",onClick:t[4]||(t[4]=(...t)=>e.moveDown&&e.moveDown(...t))},[Ve,Ae]),He,C("div",{class:"context-menu-item",onClick:t[5]||(t[5]=(...t)=>e.lockCom&&e.lockCom(...t))},[e.isLocked?(v(),p(_,{key:0},[ze,Re],64)):(v(),p(_,{key:1},[Ye,We],64))]),C("div",{class:"context-menu-item",onClick:t[6]||(t[6]=(...t)=>e.hideCom&&e.hideCom(...t))},[e.isHided?(v(),p(_,{key:0},[$e,Ne],64)):(v(),p(_,{key:1},[Ue,Be],64))]),Xe,C("div",{class:"context-menu-item",onClick:t[7]||(t[7]=(...t)=>e.renameCom&&e.renameCom(...t))},[Ke,qe]),C("div",{class:"context-menu-item",onClick:t[8]||(t[8]=(...t)=>e.toCopyCom&&e.toCopyCom(...t))},[Ge,Je]),C("div",{class:"context-menu-item",onClick:t[9]||(t[9]=(...t)=>e.toDeleteCom&&e.toDeleteCom(...t))},[Qe,Ze]),et],4)):H("",!0)));Me.render=tt,Me.__scopeId="data-v-e35305b2";var at=u({name:"Screen",components:{HeaderToolbar:G,FooterToolbar:be,EditorContextMenu:Me,CanvasMain:R((()=>W((()=>import("./index.cc738412.js")),["/assets/index.cc738412.js","/assets/index.c91c2298.css","/assets/index.d46a2555.js","/assets/index.f7697841.css","/assets/dom.1228cadc.js"]))),LayerPanel:R((()=>W((()=>import("./index.15ef5369.js")),["/assets/index.15ef5369.js","/assets/index.8e86452d.css","/assets/index.d46a2555.js","/assets/index.f7697841.css","/assets/dom.1228cadc.js"]))),ComponentsPanel:R((()=>W((()=>import("./index.0b7a5882.js")),["/assets/index.0b7a5882.js","/assets/index.0bfb3eb0.css","/assets/index.d46a2555.js","/assets/index.f7697841.css","/assets/dom.1228cadc.js"]))),ConfigPanel:R((()=>W((()=>import("./index.423d9a80.js")),["/assets/index.423d9a80.js","/assets/index.968192d8.css","/assets/index.d46a2555.js","/assets/index.f7697841.css","/assets/images.a8ceee1d.js"]))),ToolboxPanel:R((()=>W((()=>import("./index.fd02a3f1.js")),["/assets/index.fd02a3f1.js","/assets/index.e45cf4bd.css","/assets/index.d46a2555.js","/assets/index.f7697841.css"]))),FilterManagerDrawer:R((()=>W((()=>import("./filter-manager-drawer.7f45f5c7.js")),["/assets/filter-manager-drawer.7f45f5c7.js","/assets/filter-manager-drawer.7f5c6ef1.css","/assets/index.d46a2555.js","/assets/index.f7697841.css"])))},props:{projectId:{type:[String,Number],required:!0}},setup(e){const t=w(!0);d.setEditMode();const a=O((()=>"string"==typeof e.projectId?parseInt(e.projectId):e.projectId));return S((()=>{d.loadScreen(a.value).finally((()=>{document.title=`${d.screen.name} | 编辑器`})),d.loadComs(a.value).finally((()=>{t.value=!1,d.autoCanvasScale((()=>({offsetX:m.getPanelOffsetX,offsetY:m.getPanelOffsetY})))})),Y.loadFilters(a.value),(()=>{const{pageConfig:e}=d;["VMainTitle","VNumberTitleFlop"].forEach((t=>{const a=X(t);a.attr.x=r(e.width-a.attr.w),a.attr.y=r(e.height-a.attr.h),d.addCom(a)}))})()})),{loading:t,screenId:a}}});const ot=f(),nt=ot(((e,t,a,o,n,l)=>{const s=y("header-toolbar"),i=y("el-header"),c=y("layer-panel"),r=y("components-panel"),d=y("filter-manager-drawer"),u=y("toolbox-panel"),m=y("canvas-main"),f=y("g-loading"),h=y("footer-toolbar"),b=y("el-container"),g=y("config-panel"),x=y("editor-context-menu");return v(),p(_,null,[C(b,{class:"edit-container"},{default:ot((()=>[C(i,{style:{height:"auto",padding:"0"}},{default:ot((()=>[C(s)])),_:1}),C(b,{class:"edit-main-wp"},{default:ot((()=>[C(c),C(r),C(d),C(b,{class:"edit-main"},{default:ot((()=>[C(u),C(f,{spinning:e.loading},{default:ot((()=>[C(m)])),_:1},8,["spinning"]),C(h)])),_:1}),C(g)])),_:1})])),_:1}),C(x)],64)}));at.render=nt,at.__scopeId="data-v-fe242488";var lt=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:at});export{X as c,lt as i,Le as u};
