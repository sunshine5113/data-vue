import{x as D,_ as o,y as p,z as u,B as V,b as x,C as d,F as M,H as f,I as b}from"./App.7d9600e2.js";import{a2 as A,a6 as m,ba as R,a7 as j,ah as k,a3 as i,a4 as O,a8 as L,ab as l,aY as s,b0 as q,ac as $}from"./vendor.577170a9.js";import{a as C}from"./templates.9eb9c05f.js";function B(e){switch(e){case"./other/date-picker/src/date-picker.ts":return o(()=>import("./date-picker.7d286ba3.js"),["assets/date-picker.7d286ba3.js","assets/App.7d9600e2.js","assets/App.0b4877a0.css","assets/vendor.577170a9.js","assets/data-field.0ba3a232.js","assets/data.62ef37c2.js"]);default:return new Promise(function(r,t){(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(t.bind(null,new Error("Unknown variable dynamic import: "+e)))})}}function F(e){switch(e){case"./media/bg-box/src/bg-box.ts":return o(()=>import("./App.7d9600e2.js").then(function(r){return r.ae}),["assets/App.7d9600e2.js","assets/App.0b4877a0.css","assets/vendor.577170a9.js"]);case"./media/border-box/src/border-box.ts":return o(()=>import("./App.7d9600e2.js").then(function(r){return r.ad}),["assets/App.7d9600e2.js","assets/App.0b4877a0.css","assets/vendor.577170a9.js"]);case"./media/decoration/src/decoration.ts":return o(()=>import("./App.7d9600e2.js").then(function(r){return r.af}),["assets/App.7d9600e2.js","assets/App.0b4877a0.css","assets/vendor.577170a9.js"]);case"./media/main-img/src/main-img.ts":return o(()=>import("./main-img.8c1662d1.js"),["assets/main-img.8c1662d1.js","assets/App.7d9600e2.js","assets/App.0b4877a0.css","assets/vendor.577170a9.js","assets/data.62ef37c2.js"]);default:return new Promise(function(r,t){(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(t.bind(null,new Error("Unknown variable dynamic import: "+e)))})}}function S(e){switch(e){case"./button/full-screen/src/full-screen.ts":return o(()=>import("./full-screen.7a54e1f8.js"),["assets/full-screen.7a54e1f8.js","assets/App.7d9600e2.js","assets/App.0b4877a0.css","assets/vendor.577170a9.js","assets/data.62ef37c2.js"]);default:return new Promise(function(r,t){(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(t.bind(null,new Error("Unknown variable dynamic import: "+e)))})}}function U(e){switch(e){case"./text/main-title/src/main-title.ts":return o(()=>import("./main-title.d7039f98.js"),["assets/main-title.d7039f98.js","assets/App.7d9600e2.js","assets/App.0b4877a0.css","assets/vendor.577170a9.js","assets/data-field.0ba3a232.js","assets/data.62ef37c2.js"]);case"./text/marquee/src/marquee.ts":return o(()=>import("./marquee.a0344d42.js"),["assets/marquee.a0344d42.js","assets/App.7d9600e2.js","assets/App.0b4877a0.css","assets/vendor.577170a9.js","assets/data-field.0ba3a232.js","assets/data.62ef37c2.js"]);case"./text/number-title-flop/src/number-title-flop.ts":return o(()=>import("./number-title-flop.16c7321f.js"),["assets/number-title-flop.16c7321f.js","assets/App.7d9600e2.js","assets/App.0b4877a0.css","assets/vendor.577170a9.js","assets/data-field.0ba3a232.js","assets/data.62ef37c2.js"]);case"./text/paragraph/src/paragraph.ts":return o(()=>import("./paragraph.ee57cf45.js"),["assets/paragraph.ee57cf45.js","assets/App.7d9600e2.js","assets/App.0b4877a0.css","assets/vendor.577170a9.js","assets/data-field.0ba3a232.js","assets/data.62ef37c2.js"]);case"./text/timer/src/timer.ts":return o(()=>import("./timer.aaf62816.js"),["assets/timer.aaf62816.js","assets/App.7d9600e2.js","assets/App.0b4877a0.css","assets/vendor.577170a9.js","assets/data.62ef37c2.js"]);default:return new Promise(function(r,t){(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(t.bind(null,new Error("Unknown variable dynamic import: "+e)))})}}function N(e){switch(e){case"./chart/word-cloud/src/word-cloud.ts":return o(()=>import("./word-cloud.cb143dc9.js"),["assets/word-cloud.cb143dc9.js","assets/App.7d9600e2.js","assets/App.0b4877a0.css","assets/vendor.577170a9.js","assets/data-field.0ba3a232.js","assets/data.62ef37c2.js"]);default:return new Promise(function(r,t){(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(t.bind(null,new Error("Unknown variable dynamic import: "+e)))})}}function Y(e){switch(e){case"./bar/basic-bar/src/basic-bar.ts":return o(()=>import("./basic-bar.3c34b9b6.js"),["assets/basic-bar.3c34b9b6.js","assets/App.7d9600e2.js","assets/App.0b4877a0.css","assets/vendor.577170a9.js","assets/data-field.0ba3a232.js","assets/data.62ef37c2.js"]);default:return new Promise(function(r,t){(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(t.bind(null,new Error("Unknown variable dynamic import: "+e)))})}}async function z(e){const r=D(e.substr(1));switch(e.substr(1)){case"BasicBar":{const t=await Y(`./bar/${r}/src/${r}.ts`);return new t.default}case"WordCloud":{const t=await N(`./chart/${r}/src/${r}.ts`);return new t.default}case"MainTitle":case"Marquee":case"NumberTitleFlop":case"Paragraph":case"Timer":{const t=await U(`./text/${r}/src/${r}.ts`);return new t.default}case"FullScreen":{const t=await S(`./button/${r}/src/${r}.ts`);return new t.default}case"BgBox":case"BorderBox":case"Decoration":case"MainImg":{const t=await F(`./media/${r}/src/${r}.ts`);return new t.default}case"DatePicker":{const t=await B(`./other/${r}/src/${r}.ts`);return new t.default}default:throw Error(`Unknown component type: ${e}.`)}}const H=()=>{const{pageConfig:e}=u;["VMainTitle","VNumberTitleFlop","VDatePicker","VBgBox","VBorderBox","VDecoration","VBasicBar","VMarquee","VParagraph","VTimer","VFullScreen","VMainImg","VWordCloud"].forEach(t=>{z(t).then(n=>{n.attr.x=p(e.width-n.attr.w),n.attr.y=p(e.height-n.attr.h),u.addCom(n),n.apis.source&&n.loadData().then(()=>{V.datavComponents[n.id].$DATAV_requestData()})})})};const W=A({name:"ScreenEditor",components:{HeaderToolbar:m(()=>o(()=>import("./index.381d29ab.js"),["assets/index.381d29ab.js","assets/index.91d2b2b8.css","assets/App.7d9600e2.js","assets/App.0b4877a0.css","assets/vendor.577170a9.js","assets/screen.0624ca5f.js","assets/layer.6a751efd.js","assets/publish-screen.4bc8a7e4.js","assets/publish-screen.df6080ef.css","assets/release.9cf26f04.js","assets/help.80775d34.js"])),FooterToolbar:m(()=>o(()=>import("./index.0e0bb756.js"),["assets/index.0e0bb756.js","assets/index.12d0eeb9.css","assets/vendor.577170a9.js","assets/App.7d9600e2.js","assets/App.0b4877a0.css","assets/arrow-down.d4a99cf2.js"])),EditorContextMenu:m(()=>o(()=>import("./index.7c8a9d75.js"),["assets/index.7c8a9d75.js","assets/index.e4ffd428.css","assets/App.7d9600e2.js","assets/App.0b4877a0.css","assets/vendor.577170a9.js","assets/dom.17e5a3e2.js","assets/warning.d73c71b1.js","assets/edit.3ff5df3e.js","assets/delete.dfde7a3e.js","assets/copy.082fcb74.js","assets/lock.e692ce4e.js","assets/show.82cc32ce.js","assets/hide.afcd161e.js","assets/index.2ac6bc0f.js"])),CanvasMain:d(()=>o(()=>import("./index.ed5b82dd.js"),["assets/index.ed5b82dd.js","assets/index.57ba87a7.css","assets/vendor.577170a9.js","assets/App.7d9600e2.js","assets/App.0b4877a0.css","assets/dom.17e5a3e2.js","assets/index.2ac6bc0f.js","assets/templates.9eb9c05f.js"])),LayerPanel:d(()=>o(()=>import("./index.4599470b.js"),["assets/index.4599470b.js","assets/index.663b3138.css","assets/vendor.577170a9.js","assets/App.7d9600e2.js","assets/App.0b4877a0.css","assets/warning.d73c71b1.js","assets/delete.dfde7a3e.js","assets/back.aa188aed.js","assets/lock.e692ce4e.js","assets/hide.afcd161e.js","assets/view-grid.bd42ae48.js","assets/index.2ac6bc0f.js","assets/dom.17e5a3e2.js"])),ComponentsPanel:d(()=>o(()=>import("./index.251ace33.js"),["assets/index.251ace33.js","assets/index.4de96e03.css","assets/App.7d9600e2.js","assets/App.0b4877a0.css","assets/vendor.577170a9.js","assets/search.9e6a9cb8.js","assets/back.aa188aed.js","assets/templates.9eb9c05f.js"])),ConfigPanel:d(()=>o(()=>import("./index.76f69fb3.js"),["assets/index.76f69fb3.js","assets/index.fa2d1934.css","assets/App.7d9600e2.js","assets/App.0b4877a0.css","assets/vendor.577170a9.js","assets/interact.9528b858.js"])),ToolboxPanel:d(()=>o(()=>import("./index.92055186.js"),["assets/index.92055186.js","assets/index.62543772.css","assets/vendor.577170a9.js","assets/App.7d9600e2.js","assets/App.0b4877a0.css"])),FilterManagerDrawer:d(()=>o(()=>import("./filter-manager-drawer.02467180.js"),["assets/filter-manager-drawer.02467180.js","assets/filter-manager-drawer.389c5bf4.css","assets/App.7d9600e2.js","assets/App.0b4877a0.css","assets/vendor.577170a9.js","assets/warning.d73c71b1.js","assets/document.e310dbca.js","assets/filter-collapse-panel.2744f764.js","assets/arrow-left.723de3f7.js","assets/edit.3ff5df3e.js","assets/delete.dfde7a3e.js","assets/release.9cf26f04.js"]))},props:{projectId:{type:[String,Number],required:!0}},setup(e){const r=R(),t=j(!0);return M.enableDebug(),u.setEditMode(),k(async()=>{var n;try{const _=parseInt(r.query.tpl);if(_>0){const{data:c}=await C(_);if(c){const{config:a}=c;u.setEditorOption({screen:{id:+e.projectId,name:c.name},config:{width:a.width,height:a.height,bgimage:a.bgimage,bgcolor:a.bgcolor,styleFilterParams:a.styleFilterParams},coms:a.coms,variables:a.variables}),f.setFilterOption({dataFilters:(n=a.dataFilters)!=null?n:[]})}_===1&&H()}else{const c=+e.projectId;u.loadScreen(c),f.loadFilters(c),await u.loadComs(c)}}catch(_){console.log(_)}finally{t.value=!1,document.title=`${u.screen.name} | \u7F16\u8F91\u5668`,u.autoCanvasScale(()=>({offsetX:b.getPanelOffsetX,offsetY:b.getPanelOffsetY}))}}),{loading:t}}}),X={class:"g-layout is-vertical edit-container"},G={class:"g-header"},J={id:"edit-main-wp",class:"g-layout edit-main-wp"},K={class:"g-layout edit-main"};function Q(e,r,t,n,_,c){const a=i("header-toolbar"),v=i("layer-panel"),g=i("components-panel"),E=i("filter-manager-drawer"),w=i("toolbox-panel"),y=i("canvas-main"),P=i("g-loading"),T=i("footer-toolbar"),h=i("config-panel"),I=i("editor-context-menu");return O(),L($,null,[l("div",X,[l("div",G,[s(a)]),l("div",J,[s(v),s(g),s(E),l("div",K,[s(w),s(P,{spinning:e.loading},{default:q(()=>[s(y)]),_:1},8,["spinning"]),s(T)]),s(h)])]),s(I)],64)}var Z=x(W,[["render",Q],["__scopeId","data-v-b54f1d56"]]),oe=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Z});export{z as c,oe as i};
