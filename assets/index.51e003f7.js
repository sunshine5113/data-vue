import{d as e,aN as a,o as n,c as l,E as o,aI as s,aZ as t,aM as c,M as i,C as d,D as r,f as b,a as h,t as f,F as u}from"./index.4fc9a33f.js";import{s as v}from"./screen.e3967539.js";import{_ as p}from"./publish-screen.b5c253b7.js";var g=e({name:"HeadLoading",computed:{loadingClass:()=>({"loading-indicator":!0,loading:a.loading>0})}});const m=o()(((e,a,o,s,t,c)=>(n(),l("div",{class:e.loadingClass},null,2))));g.render=m,g.__scopeId="data-v-25471de2";var y=e({name:"HeaderToolber",components:{HeadLoading:g,PublishScreen:p},data:()=>({visiblePublish:!1,publishAppId:0}),computed:{screen:()=>s.screen,layer:()=>a.layer.show,components:()=>a.components.show,config:()=>a.config.show,toolbox:()=>a.toolbox.show,filter:()=>a.filter.show},methods:{changeLayerPanel(){a.setPanelState({type:t.layer,value:!this.layer})},changeComponentsPanel(){a.setPanelState({type:t.components,value:!this.components})},changeConfigPanel(){a.setPanelState({type:t.config,value:!this.config})},changeToolboxPanel(){a.setPanelState({type:t.toolbox,value:!this.toolbox})},changeFilterPanel(){a.filter.show=!this.filter},goHome(){const e=this.$router.resolve("/");window.open(e.href,"_blank","noopener=yes,noreferrer=yes")},goPublish(){this.visiblePublish=!0,this.publishAppId=this.screen.id},async saveScreen(){var e;a.addLoading();try{const n={screen:s.screen,config:s.pageConfig,coms:[...s.coms,...s.subComs],variables:s.variables,dataFilters:null!=(e=c.dataFilters)?e:[]};await v(n),i.success("大屏已保存")}catch(n){i.error(`保存大屏失败：${n}`)}finally{a.removeLoading()}},async goPreview(){await this.saveScreen();const e=this.$router.resolve({name:"Preview",params:{screenId:this.screen.id}}),a=document.createElement("a");a.rel="noopener, noreferrer",a.href=e.href,a.target="_blank",a.click()}}});const P=o();d("data-v-7fad2d4a");const _={class:"datav-header"},C={class:"head-btn-group view-btn-group"},w=h("div",{class:"head-btn --selected"},[h("i",{class:"v-icon-editor-canvas head-btn-icon"})],-1),k=h("div",{class:"head-btn --disabled"},[h("i",{class:"v-icon-nodal head-btn-icon"})],-1),x={class:"datav-edit-header"},S={class:"editor-header-wp"},I={class:"editor-config"},L=h("i",{class:"v-icon-layer head-btn-icon"},null,-1),F=h("i",{class:"v-icon-rpanel head-btn-icon"},null,-1),H=h("i",{class:"v-icon-toolbox head-btn-icon"},null,-1),j={class:"drawer-actions"},T=h("i",{class:"v-icon-filter head-btn-icon"},null,-1),A=h("div",{class:["head-btn mr4"]},[h("i",{class:"v-icon-magic head-btn-icon"})],-1),M=h("div",{class:["head-btn mr4"]},[h("i",{class:"v-icon-mobile head-btn-icon"})],-1),V={class:"screen-info"},$={class:"global-actions"},E=h("i",{class:"v-icon-snapshot head-btn-icon"},null,-1),D={class:"head-btn ml4"},N=h("i",{class:"v-icon-help head-btn-icon"},null,-1),U=h("i",{class:"v-icon-release head-btn-icon"},null,-1),Z=h("i",{class:"v-icon-preview head-btn-icon"},null,-1);r();const q=P(((e,a,o,s,t,c)=>{const i=b("el-tooltip"),d=b("router-link"),r=b("head-loading"),v=b("publish-screen");return n(),l(u,null,[h("div",_,[h("div",C,[h(i,{content:"画布编辑器",effect:"blue","open-delay":500,enterable:!1},{default:P((()=>[w])),_:1}),h(i,{content:"蓝图编辑器",effect:"blue","open-delay":500,enterable:!1},{default:P((()=>[k])),_:1})]),h("div",x,[h("div",S,[h("div",I,[h(i,{content:"图层",effect:"blue","open-delay":500,enterable:!1},{default:P((()=>[h("div",{class:["head-btn mr4",{"--selected":e.layer}],onClick:a[1]||(a[1]=(...a)=>e.changeLayerPanel&&e.changeLayerPanel(...a))},[L],2)])),_:1}),h(i,{content:"组件列表",effect:"blue","open-delay":500,enterable:!1},{default:P((()=>[h("div",{class:["head-btn mr4",{"--selected":e.components}],onClick:a[2]||(a[2]=(...a)=>e.changeComponentsPanel&&e.changeComponentsPanel(...a))},[h("i",{class:["v-icon-box com-list-icon",{"--rotate":!e.components}]},null,2)],2)])),_:1}),h(i,{content:"右侧面板",effect:"blue","open-delay":500,enterable:!1},{default:P((()=>[h("div",{class:["head-btn mr4",{"--selected":e.config}],onClick:a[3]||(a[3]=(...a)=>e.changeConfigPanel&&e.changeConfigPanel(...a))},[F],2)])),_:1}),h(i,{content:"工具箱",effect:"blue","open-delay":500,enterable:!1},{default:P((()=>[h("div",{class:["head-btn mr4",{"--selected":e.toolbox}],onClick:a[4]||(a[4]=(...a)=>e.changeToolboxPanel&&e.changeToolboxPanel(...a))},[H],2)])),_:1})]),h("div",j,[h(i,{content:"数据过滤器",effect:"blue","open-delay":500,enterable:!1},{default:P((()=>[h("div",{class:["head-btn mr4",{"--selected":e.filter}],onClick:a[5]||(a[5]=(...a)=>e.changeFilterPanel&&e.changeFilterPanel(...a))},[T],2)])),_:1}),h(i,{content:"美化工具箱",effect:"blue","open-delay":500,enterable:!1},{default:P((()=>[A])),_:1}),h(i,{content:"迁移至移动端",effect:"blue","open-delay":500,enterable:!1},{default:P((()=>[M])),_:1})])]),h("div",V,[h("i",{class:"v-icon-workspace workspace-icon",onClick:a[6]||(a[6]=(...a)=>e.goHome&&e.goHome(...a))}),h("span",null,f("工作空间 - "+e.screen.name),1)]),h("div",$,[h(i,{content:"生成快照",effect:"blue","open-delay":500,enterable:!1},{default:P((()=>[h("div",{class:"head-btn ml4",onClick:a[7]||(a[7]=(...a)=>e.saveScreen&&e.saveScreen(...a))},[E])])),_:1}),h(i,{content:"帮助",effect:"blue","open-delay":500,enterable:!1},{default:P((()=>[h("div",D,[h(d,{to:{name:"MyCase"},target:"_blank",class:"full-a"},{default:P((()=>[N])),_:1})])])),_:1}),h(i,{content:"发布",effect:"blue","open-delay":500,enterable:!1},{default:P((()=>[h("div",{class:"head-btn ml4",onClick:a[8]||(a[8]=(...a)=>e.goPublish&&e.goPublish(...a))},[U])])),_:1}),h(i,{content:"预览",effect:"blue","open-delay":500,enterable:!1},{default:P((()=>[h("div",{class:"head-btn ml4",onClick:a[9]||(a[9]=(...a)=>e.goPreview&&e.goPreview(...a))},[Z])])),_:1})])])]),h(r),h(v,{modelValue:e.visiblePublish,"onUpdate:modelValue":a[10]||(a[10]=a=>e.visiblePublish=a),"project-id":e.publishAppId},null,8,["modelValue","project-id"])],64)}));y.render=q,y.__scopeId="data-v-7fad2d4a";export default y;
