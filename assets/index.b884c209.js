import{aG as t,aH as e,aI as a,aJ as i,aK as o,aL as n,aM as r,aN as s,d as l,aD as c,aE as d,aO as f,O as p,e as g,aP as h,H as u,aQ as m,aR as b,f as _,o as x,c as y,a as w,F as D,R as E}from"./index.eb663447.js";import{a as S}from"./templates.bc402370.js";import{c as j,B as P}from"./basic-bar.dd822f43.js";class O extends t{constructor(){super("MainTitle",{w:300,h:56}),this.config={title:"我是标题数据",textStyle:{fontFamily:"Microsoft Yahei",fontSize:24,color:"#fff",fontWeight:"normal"},textAlign:"center",writingMode:"horizontal-tb",letterSpacing:0,backgroundStyle:{show:!1,bgColor:"#008bff",borderRadius:15,borderColor:"#fff",borderStyle:"solid",borderWidth:1},ellipsis:!1,urlConfig:{url:"",isBlank:!1}},this.initData()}initData(){const t=[j("title",{description:"标题值",optional:!0}),j("url",{description:"超链接",optional:!0})];return this.apis=e({fields:Object.assign({},...t)}),this.apiData=a(this.id,{title:"我是标题数据",url:""}),this.events={},this.actions={},this}}class T extends t{constructor(){super("NumberTitleFlop",{w:350,h:64}),this.config={global:{fontFamily:"Microsoft Yahei",arrangement:"top",distance:0},title:{content:"Typesomething",textStyle:{fontSize:18,color:"#79daff",fontWeight:"normal",textAlign:"flex-start"}},counter:{fontFamily:"Microsoft Yahei",justifyContent:"flex-start",margin:{preNum:0,numSuff:0},prefix:{content:"￥",textStyle:{fontSize:36,color:"#0a73ff",fontWeight:"bolder"}},suffix:{content:"",textStyle:{fontSize:30,color:"#fff",fontWeight:"bolder"}}},numbers:{textStyle:{fontSize:36,color:"#0a73ff",fontWeight:"bolder"},marginRight:0,bgColor:"rgba(51,51,51,0)",bgRadius:6,bgSeparating:!1,digit:0,decimal:0,divisor:0,separatingChart:!0,separatingSymbol:",",decimalSymbol:".",fixedWidth:0,increment:!0,animation:!0,sameDataFlip:!1,duration:1e3}},this.initData()}initData(){const t=[j("title",{description:"标题",optional:!0}),j("value",{description:"翻牌器数值"}),j("prefix",{description:"翻牌器前缀",optional:!0}),j("suffix",{description:"翻牌器后缀",optional:!0})];return this.apis=e({fields:Object.assign({},...t)}),this.apiData=a(this.id,{title:"",value:"123456.7"}),this.events={},this.actions={},this}}class C extends t{constructor(){super("DatePicker",{w:250,h:50}),this.config={global:{date:"2021-07-01",fontFamily:"Microsoft Yahei"},input:{size:{width:180,height:30},border:{width:1,color:"#ccc",radius:0},bgColor:"#01becc",fontSize:18,fontColor:"#fff",separator:"-",pos:"left"},calendar:{fontSize:14,fontColor:"#fff",bgColor:"#126973",selectBGColor:"#01becc",border:{width:1,color:"#ccc",radius:5},paddingBorder:{width:1,color:"#ccc",padding:6},select:{time:2,today:4}}},this.initData()}initData(){const t=[j("date",{description:"默认日期",optional:!0})];return this.apis=e({fields:Object.assign({},...t)}),this.apiData=a(this.id,{}),this.events={changed:{type:"string",description:"当日期变化时",fields:Object.assign({},...t)}},this.actions={},this}}function F(t){switch(t.substr(1)){case"MainTitle":return new O;case"NumberTitleFlop":return new T;case"DatePicker":return new C;case"BgBox":return new n;case"BorderBox":return new o;case"Decoration":return new i;case"BasicBar":return new P;default:throw Error(`Unknown component type: ${t}.`)}}var v=l({name:"ScreenEditor",components:{HeaderToolbar:c((()=>d((()=>import("./index.c7cc01ad.js")),["/assets/index.c7cc01ad.js","/assets/index.089a3722.css","/assets/index.eb663447.js","/assets/index.fbc9cb84.css","/assets/screen.34b60bc2.js","/assets/publish-screen.2aa30b3c.js","/assets/publish-screen.8e06d77e.css"]))),FooterToolbar:c((()=>d((()=>import("./index.e7ca3984.js")),["/assets/index.e7ca3984.js","/assets/index.c20c4f3c.css","/assets/index.eb663447.js","/assets/index.fbc9cb84.css"]))),EditorContextMenu:c((()=>d((()=>import("./index.e480d81f.js")),["/assets/index.e480d81f.js","/assets/index.1b0816bb.css","/assets/index.eb663447.js","/assets/index.fbc9cb84.css","/assets/dom.db9d876e.js","/assets/index.8d15fd50.js"]))),CanvasMain:f((()=>d((()=>import("./index.4630c06d.js")),["/assets/index.4630c06d.js","/assets/index.79a493aa.css","/assets/index.eb663447.js","/assets/index.fbc9cb84.css","/assets/dom.db9d876e.js","/assets/index.8d15fd50.js","/assets/templates.bc402370.js","/assets/basic-bar.dd822f43.js"]))),LayerPanel:f((()=>d((()=>import("./index.f5386d72.js")),["/assets/index.f5386d72.js","/assets/index.c1901e48.css","/assets/index.eb663447.js","/assets/index.fbc9cb84.css","/assets/index.8d15fd50.js","/assets/dom.db9d876e.js"]))),ComponentsPanel:f((()=>d((()=>import("./index.786ddc88.js")),["/assets/index.786ddc88.js","/assets/index.4daf3035.css","/assets/index.eb663447.js","/assets/index.fbc9cb84.css","/assets/templates.bc402370.js","/assets/basic-bar.dd822f43.js"]))),ConfigPanel:f((()=>d((()=>import("./index.13fc98dc.js")),["/assets/index.13fc98dc.js","/assets/index.5ea98624.css","/assets/index.eb663447.js","/assets/index.fbc9cb84.css"]))),ToolboxPanel:f((()=>d((()=>import("./index.a1ad0b5b.js")),["/assets/index.a1ad0b5b.js","/assets/index.11ed9e79.css","/assets/index.eb663447.js","/assets/index.fbc9cb84.css"]))),FilterManagerDrawer:f((()=>d((()=>import("./filter-manager-drawer.cfe14564.js")),["/assets/filter-manager-drawer.cfe14564.js","/assets/filter-manager-drawer.975742e9.css","/assets/index.eb663447.js","/assets/index.fbc9cb84.css","/assets/filter-collapse-panel.6c55685c.js"])))},props:{projectId:{type:[String,Number],required:!0}},setup(t){const e=p(),a=g(!0);return h.enableDebug(),s.setEditMode(),u((async()=>{var i;try{const o=parseInt(e.query.tpl);if(o>0){const{data:e}=await S(o);if(e){const{config:a}=e;s.setEditorOption({screen:{id:+t.projectId,name:e.name},config:{width:a.width,height:a.height,bgimage:a.bgimage,bgcolor:a.bgcolor,styleFilterParams:a.styleFilterParams},coms:a.coms,variables:a.variables}),m.setFilterOption({dataFilters:null!=(i=a.dataFilters)?i:[]})}1===o&&(()=>{const{pageConfig:t}=s;["VMainTitle","VNumberTitleFlop","VDatePicker","VBgBox","VBorderBox","VDecoration","VBasicBar"].forEach((e=>{const a=F(e);a.attr.x=r(t.width-a.attr.w),a.attr.y=r(t.height-a.attr.h),s.addCom(a)}))})()}else{const e=+t.projectId;s.loadScreen(e),m.loadFilters(e),await s.loadComs(e)}}catch(o){console.log(o)}finally{a.value=!1,document.title=`${s.screen.name} | 编辑器`,s.autoCanvasScale((()=>({offsetX:b.getPanelOffsetX,offsetY:b.getPanelOffsetY})))}})),{loading:a}}});const B=E(),V=B(((t,e,a,i,o,n)=>{const r=_("header-toolbar"),s=_("el-header"),l=_("layer-panel"),c=_("components-panel"),d=_("filter-manager-drawer"),f=_("toolbox-panel"),p=_("canvas-main"),g=_("g-loading"),h=_("footer-toolbar"),u=_("el-container"),m=_("config-panel"),b=_("editor-context-menu");return x(),y(D,null,[w(u,{class:"edit-container"},{default:B((()=>[w(s,{style:{height:"auto",padding:"0"}},{default:B((()=>[w(r)])),_:1}),w(u,{class:"edit-main-wp"},{default:B((()=>[w(l),w(c),w(d),w(u,{class:"edit-main"},{default:B((()=>[w(f),w(g,{spinning:t.loading},{default:B((()=>[w(p)])),_:1},8,["spinning"]),w(h)])),_:1}),w(m)])),_:1})])),_:1}),w(b)],64)}));v.render=V,v.__scopeId="data-v-f362d1ea";var I=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:v});export{F as c,I as i};
