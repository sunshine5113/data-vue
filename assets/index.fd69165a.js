import{d as e,r as t,e as a,u as o,o as n,aD as r,aG as i,aN as c,l as d,m as s,p as l,am as m,F as u,s as g,aO as h}from"./index.96b29a26.js";import{o as p,s as f}from"./dom.7aaa4b60.js";import{g as b}from"./screen.5b7cc71a.js";import{L as v}from"./images.25f288b3.js";var w=e({name:"Preview",props:{screenId:{type:[String,Number],required:!0}},setup(e){const d=t(!0),s=a((()=>r.pageConfig)),l=a((()=>r.coms)),m=e=>{switch(e.zoomMode){case c.auto:((e,t)=>{const a=document.documentElement.clientWidth/e,o=document.documentElement.clientHeight/t;f(document.body,{transform:`scale(${a}, ${o})`,transformOrigin:"left top",backgroundSize:"100% 100%"})})(e.width,e.height);break;case c.width:(e=>{const t=document.documentElement.clientWidth/e;f(document.body,{transform:`scale(${t})`,transformOrigin:"left top",backgroundSize:"100%"})})(e.width);break;case c.height:((e,t)=>{const a=document.documentElement.clientWidth,o=document.documentElement.clientHeight/t,n=(a-e*o)/2;f(document.body,{transform:`scale(${o})`,transformOrigin:"left top",backgroundSize:e/a*o*100+"% 100%",backgroundPosition:`${n.toFixed(3)}px top`,marginLeft:`${n.toFixed(3)}px`})})(e.width,e.height);break;case c.full:((e,t)=>{const a=document.documentElement.clientWidth,o=document.documentElement.clientHeight/t,n=(a-e*o)/2;f(document.body,{transform:`scale(${o})`,transformOrigin:"left top",backgroundSize:e/a*o*100+"% 100%",backgroundPosition:`${n.toFixed(3)}px top`}),document.documentElement.style.overflowX="scroll"})(e.width,e.height);break;default:f(document.body,{overflow:"hidden",position:"relative"})}},u=o();return n((async()=>{try{const a=await b(+e.screenId);if(!a)throw new Error("404");r.SET_SCREEN(a.project),t=s.value,document.title=r.screen.name,document.querySelector('meta[name="viewport"]').setAttribute("content",`width=${t.width}`),f(document.documentElement,{overflowX:"hidden",overflowY:"visible"}),f(document.body,{width:`${t.width}px`,height:`${t.height}px`,backgroundImage:`url(${s.value.bgimage})`,backgroundColor:s.value.bgcolor}),m(t),i.SET_FILTERS(a.dataFilters),r.SET_COMS(a.coms),setTimeout((()=>{d.value=!1}),500),p(window,"resize",(()=>{m(s.value)}))}catch(a){u.replace({name:"NotFound",params:{catchAll:"error"}})}var t})),{cdn:"//files.pengxiaotian.com",LOGO:v,loading:d,pageConfig:s,coms:l}}});const y={target:"_blank",href:"javascript:;"},k={key:0,href:"/",target:"_blank",class:"datav-watermark"},x={class:"scene"};w.render=function(e,t,a,o,n,r){return d(),s(u,null,[l("div",{id:"datav-loading",style:{background:"rgb(15, 42, 66)",display:e.loading?"block":"none"}},[l("a",y,[l("img",{class:"datav-logo",src:`${e.cdn}/datav/datav-loading.gif`},null,8,["src"])])],4),l("div",{class:"datav-layout",style:{visibility:e.loading?"hidden":"visible"}},[e.pageConfig.useWatermark?(d(),s("a",k,[l("img",{src:e.LOGO},null,8,["src"])])):m("",!0),l("div",x,[(d(!0),s(u,null,g(e.coms,(e=>(d(),s("div",{key:e.id,style:{left:e.attr.x+"px",top:e.attr.y+"px",width:e.attr.w+"px",height:e.attr.h+"px",opacity:e.attr.opacity,transform:`rotate(${e.attr.deg}deg) ${e.attr.filpH?"scaleX(-1)":""} ${e.attr.filpV?"scaleY(-1)":""}`},class:"-datav-com absolute"},[(d(),s(h(e.name),{com:e},null,8,["com"]))],4)))),128))])],4)],64)};export default w;
