var B=Object.defineProperty;var P=(o,t,a)=>t in o?B(o,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):o[t]=a;var v=(o,t,a)=>(P(o,typeof t!="symbol"?t+"":t,a),a);import{a6 as p,aa as g,ad as c,a4 as x,b8 as E,aC as S,b6 as b,F as D,a5 as _,ae as M,af as N,aX as m,a$ as $,ag as F,ac as T,b0 as A,b9 as W,a9 as I,at as j,aj as L,ax as z,a7 as C,ah as R,ab as X,ba as H,bb as V}from"./vendor.1c7e0fbb.js";import{a as k,u as q}from"./AppRoot.9161bc33.js";import{I as G}from"./arrow-down.87090095.js";import{I as O}from"./document.9d531123.js";import{I as U}from"./tutorial.180e1ea6.js";import{I as J}from"./my-com.d1fbad4e.js";import{I as K}from"./my-data.05306b7d.js";import{I as Q}from"./layer.3a0f2ed6.js";const Y={},Z={t:"1629556429050",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"4369","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"64",height:"64"},tt=c("path",{d:"M172.08888854 967.11111147a45.51111147 45.51111147 0 0 1-45.5111104-45.51111147V102.4a45.51111147 45.51111147 0 0 1 45.5111104-45.51111147h637.15555626a45.51111147 45.51111147 0 0 1 45.5111104 45.51111147v136.53333333h-91.02222186V147.91111147H217.6v728.17777706h546.13333334v-91.02222186h91.02222186v136.53333333a45.51111147 45.51111147 0 0 1-45.5111104 45.51111147H172.08888854z m591.6444448-273.06666667v-136.53333333h-318.57777814v-91.02222294h318.57777814V329.9555552l227.5555552 182.0444448-227.5555552 182.0444448z","p-id":"4370"},null,-1),et=[tt];function at(o,t){return p(),g("svg",Z,et)}var nt=k(Y,[["render",at]]);const st="//files.pengxiaotian.com",ot=x({name:"NavHeader",components:{IconArrowDown:G},props:{isFixed:{type:Boolean,default:!1}},setup(){const o=q(),t=E(),a=[{label:"\u5E2E\u52A9\u6587\u6863",key:"doc",icon:()=>b(D,null,{default:()=>b(O)})},{type:"divider",key:"d1"},{label:"\u9000\u51FA",key:"logout",icon:()=>b(D,null,{default:()=>b(nt)})}],e=async()=>{await o.logout(),t.push({name:"Login"})},n=s=>{s==="logout"&&e()};return{cdn:st,userName:S(()=>o.name),avatar:S(()=>o.avatar),profileOpts:a,handleProfileSelect:n}}}),it={class:"logo"},rt={class:"top-tip"},ct=c("strong",{class:"tip-strong"},"\u516C\u544A",-1),dt={class:"datav-marquee"},lt={class:"content"},ht=A(" 1. DataV \u4EC5\u652F\u6301\u8C37\u6B4C Chrome \u6D4F\u89C8\u5668\u7248\u672C 60 \u4EE5\u4E0A\u30022. DataV \u57FA\u4E8E Vue 3.x \u5F00\u53D1\u30023. \u9879\u76EE\u5730\u5740\uFF1A"),ut=c("a",{href:"https://github.com/pengxiaotian/datav-vue",target:"_blank",class:"project-href"},"https://github.com/pengxiaotian/datav-vue",-1),pt=c("span",{class:"content-space"},null,-1),_t={class:"user"},vt={class:"header-item"},mt={class:"user-link-wrap"},gt={class:"user-link"},ft={class:"datav-nav"},wt={class:"header-img"},yt=["src"],bt=c("div",{class:"nav-img"},null,-1);function Ct(o,t,a,e,n,s){const i=_("n-avatar"),r=_("IconArrowDown"),d=_("n-icon"),h=_("n-dropdown");return p(),g("div",null,[c("div",{class:"datav-hearder",style:T({background:o.isFixed?"#171b22":""})},[c("div",it,[c("div",rt,[ct,c("div",dt,[c("span",lt,[(p(),g(M,null,N(2,f=>(p(),g(M,{key:f},[ht,ut,pt],64))),64))])])])]),c("div",_t,[c("div",vt,[m(h,{options:o.profileOpts,placement:"bottom-end","show-arrow":!0,onSelect:o.handleProfileSelect},{default:$(()=>[c("span",mt,[m(i,{round:"",size:20,src:o.avatar+"?imageView2/1/w/80/h/80"},null,8,["src"]),c("span",gt,F(o.userName),1),m(d,{size:14},{default:$(()=>[m(r)]),_:1})])]),_:1},8,["options","onSelect"])])])],4),c("div",ft,[c("div",wt,[c("img",{class:"nav-img-text",src:`${o.cdn}/datav/nav-img-text.png`},null,8,yt),bt])])])}var It=k(ot,[["render",Ct]]);class kt{constructor(t,a,e=0){v(this,"j",.85);v(this,"k",10);v(this,"l",4);v(this,"canvas");v(this,"tabs");v(this,"pattern",null);v(this,"tabWidthList",[]);v(this,"tabHeight",0);v(this,"opt",{currentIndex:0,nextIndex:1,speed:1,timer:0,width:200,height:100,animating:!1,curDisX:0,distance:0});this.canvas=document.getElementById(t),this.tabs=document.querySelectorAll(a);const{opt:n}=this;this.calcTabs(),this.initCanvas(this.canvas,n.width,n.height),this.createPattern(this.canvas),this.startDraw(0),this.toggle(e)}initCanvas(t,a,e){const n=t.getContext("2d"),{devicePixelRatio:s}=window;t.width=a*s,t.height=e*s,t.style.width=`${a}px`,t.style.height=`${e}px`,n.scale(s,s)}calcTabs(){const{opt:t,tabs:a}=this,e=[];let n=0;a.forEach(s=>{e.push(n),n+=s.offsetWidth}),e[0]=-20,e.push(n),this.tabWidthList=e,this.tabHeight=a[0].offsetHeight+0,t.height=this.tabHeight+20,t.width=window.innerWidth}createPattern(t){const s=document.createElement("canvas");s.width=140,s.height=63,s.style.width=`${140/1}px`,s.style.height=`${63/1}px`;const i=s.getContext("2d");i.scale(1,1),i.lineWidth=.4;for(let r=3,d=.8,h=1;30>h;h++)i.strokeStyle=`RGBA(22, 120, 160, ${d})`,i.beginPath(),i.moveTo(0,h*r),i.lineTo(140,h*r),i.stroke(),i.closePath(),10<h&&(d-=.1);this.pattern=t.getContext("2d").createPattern(s,"repeat-x")}calcAVGSpeed(t){const{l:a,j:e,k:n}=this;let s=(a*e*t+n*(1-e)*t)/(n*a*20);return s=Math.max(Math.abs(s),2.5)*Math.sign(s),s}getCurSpeed(t,a){const{l:e,j:n,k:s,opt:i}=this;return Math.abs(t)>Math.abs(n*a)?e*i.speed:s*i.speed}calCurve(t,a,e,n,s,i){t.bezierCurveTo(a+i,e,n-i,s,n,s)}drawHightlight(t){const{opt:a}=this,e=this.canvas.getContext("2d"),n=.3;e.clearRect(0,0,2*a.width,2*a.height),e.shadowColor="rgba(36, 131, 255, 1)",e.shadowBlur=5,e.strokeStyle="#004CB3",e.lineWidth=.8,e.fillStyle="none",this.draw(e,!1);const s=e.createLinearGradient(0,0,a.width,a.height),i=t-n;s.addColorStop(Math.min(1,Math.max(0,0+i)),"rgba(0,0,0,0)"),s.addColorStop(Math.min(1,Math.max(0,0+i+.1)),"#8ed6ff"),s.addColorStop(Math.min(1,0+i+n),"#8ed6ff"),s.addColorStop(Math.min(1,0+i+n+.1),"rgba(0,0,0,0)"),s.addColorStop(1,"rgba(0,0,0,0)"),e.lineWidth=1.5,e.strokeStyle=s,e.fillStyle=this.pattern,this.draw(e,!0)}startDraw(t){this.drawHightlight(t),this.opt.timer=requestAnimationFrame(()=>{this.startDraw((t+.005)%1.6)})}draw(t,a){const{opt:e,tabWidthList:n,tabHeight:s}=this,i=e.currentIndex,r=s,d=0,h=40,f=20,l=.5,w=2.5;let u=0;if(t.beginPath(),t.moveTo(-50,e.height+10),t.lineTo(-50,r+l),e.animating){const y=this.getCurSpeed(e.curDisX,e.distance);u=Math.min(Math.abs(e.distance),Math.abs(e.curDisX+y))*Math.sign(y)}if(t.lineTo(d+n[i]+u-h/2,r+l),this.calCurve(t,d+n[i]+u-h/2,r+l,d+n[i]+u+h/2,w+l,f),e.animating){const y=n[e.nextIndex+1]-n[e.nextIndex];t.lineTo(d+n[i]+y+u-h/2,w+l),this.calCurve(t,d+n[i]+y+u-h/2,w+l,d+n[i]+y+u+h/2,r+l,f)}else t.lineTo(d+n[i+1]+u-h/2,w+l),this.calCurve(t,d+n[i+1]+u-h/2,w+l,d+n[i+1]+u+h/2,r+l,f);t.lineTo(e.width+10,r+l),t.lineTo(e.width+10,e.height+10),t.closePath(),t.stroke(),a&&t.fill(),a&&e.animating&&(e.curDisX=u,Math.abs(u)>=Math.abs(e.distance)&&(e.animating=!1,e.currentIndex=e.nextIndex))}toggle(t){const{opt:a,tabWidthList:e}=this;t!==a.currentIndex&&e&&e.length&&(!a.animating||t!==a.nextIndex)&&(a.animating=!0,a.distance=e[t]-e[a.currentIndex],a.speed=this.calcAVGSpeed(a.distance),a.curDisX=0,a.nextIndex=t)}resize(){const{opt:t}=this;t.timer&&cancelAnimationFrame(t.timer),this.calcTabs(),this.initCanvas(this.canvas,t.width,t.height),this.startDraw(0)}}const Mt=x({name:"NavMain",components:{IconLayer:Q,IconMyData:K,IconMyCom:J,IconTutorial:U},props:{navs:{type:Array,required:!0}},emits:["change"],setup(o,t){const a=W(),e=I(0);let n=null;const s=r=>{n&&(e.value=r.id,n.toggle(r.id),t.emit("change",r))},i=j(()=>{n&&n.resize()},500);return L(()=>{const r=o.navs.find(d=>d.key===a.name);e.value=r?r.id:0,n=new kt("nav-canvas",".nav-main .nav-span",e.value),window.addEventListener("resize",i)}),z(()=>{window.removeEventListener("resize",i)}),{toggleNav:s,activeNav:e}}}),$t=o=>(H("data-v-742ce1e9"),o=o(),V(),o),xt={class:"nav-main"},St=$t(()=>c("canvas",{id:"nav-canvas",style:{position:"absolute","z-index":"-1",left:"0"}},null,-1)),Dt=["onClick"];function Et(o,t,a,e,n,s){const i=_("IconLayer"),r=_("IconMyData"),d=_("IconMyCom"),h=_("IconTutorial"),f=_("n-icon");return p(),g("div",xt,[St,(p(!0),g(M,null,N(o.navs,l=>(p(),g("span",{key:l.id,class:"nav-span"},[c("a",{class:X(["nav-link",{"nav-active":o.activeNav===l.id}]),onClick:w=>o.toggleNav(l)},[m(f,{class:"nav-icon",size:20},{default:$(()=>[l.key==="MyProject"?(p(),C(i,{key:0})):l.key==="MyData"?(p(),C(r,{key:1})):l.key==="MyCom"?(p(),C(d,{key:2})):l.key==="MyCase"?(p(),C(h,{key:3})):R("",!0)]),_:2},1024),A(" "+F(l.name),1)],10,Dt)]))),128))])}var Nt=k(Mt,[["render",Et],["__scopeId","data-v-742ce1e9"]]);const Ft=x({name:"Home",components:{NavHeader:It,NavMain:Nt},setup(){const o=I(null),t=I(!1),a=I([{id:0,key:"MyProject",name:"\u6211\u7684\u53EF\u89C6\u5316"},{id:1,key:"MyData",name:"\u6211\u7684\u6570\u636E"},{id:2,key:"MyCom",name:"\u6211\u7684\u7EC4\u4EF6"},{id:3,key:"MyCase",name:"\u6559\u7A0B"}]),e=E(),n=()=>{t.value=o.value.$el.offsetTop>200},s=i=>{e.push({name:i.key})};return L(()=>{window.addEventListener("scroll",n)}),z(()=>{window.removeEventListener("scroll",n)}),{navMainRef:o,isFixed:t,navs:a,onNavChange:s}}}),Tt=o=>(H("data-v-60aad650"),o=o(),V(),o),At={class:"datav"},Lt=Tt(()=>c("div",{class:"nav-shadow"},null,-1)),zt={class:"datav-main"},Ht={class:"datav-content"};function Vt(o,t,a,e,n,s){const i=_("nav-header"),r=_("nav-main"),d=_("router-view");return p(),g("div",At,[m(i,{"is-fixed":o.isFixed},null,8,["is-fixed"]),m(r,{ref:"navMainRef",navs:o.navs,style:T({background:o.isFixed?"var(--datav-body-bg)":""}),onChange:o.onNavChange},null,8,["navs","style","onChange"]),Lt,c("div",zt,[c("div",Ht,[m(d)])])])}var Ut=k(Ft,[["render",Vt],["__scopeId","data-v-60aad650"]]);export{Ut as default};
