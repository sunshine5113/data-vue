var h=Object.defineProperty,_=Object.defineProperties;var d=Object.getOwnPropertyDescriptors;var o=Object.getOwnPropertySymbols;var f=Object.prototype.hasOwnProperty,g=Object.prototype.propertyIsEnumerable;var c=(e,a,t)=>a in e?h(e,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[a]=t,u=(e,a)=>{for(var t in a||(a={}))f.call(a,t)&&c(e,t,a[t]);if(o)for(var t of o(a))g.call(a,t)&&c(e,t,a[t]);return e},n=(e,a)=>_(e,d(a));import{g as p,u as E,_ as l,A as v,i as A,N as I,G as D,D as b}from"./AppRoot.9161bc33.js";import{c as y,a as L,b as P,d as R}from"./vendor.1c7e0fbb.js";const U=[{path:"/screen/:screenId",name:"Screen",props:!0,component:()=>l(()=>import("./index.5db7b168.js"),["assets/index.5db7b168.js","assets/index.4531aeb4.css","assets/vendor.1c7e0fbb.js","assets/AppRoot.9161bc33.js","assets/AppRoot.6c3f2524.css","assets/dom.6d6c7f4f.js","assets/screen.00a0fa57.js"])},{path:"/:catchAll(.*)*",name:"NotFound",component:()=>l(()=>import("./index.7f98cb3b.js"),["assets/index.7f98cb3b.js","assets/index.fd9b7851.css","assets/vendor.1c7e0fbb.js","assets/AppRoot.9161bc33.js","assets/AppRoot.6c3f2524.css"]),meta:{title:"\u627E\u4E0D\u5230\u9875\u9762"}}],m=y({history:L(),routes:U}),$=["/login","/auth-redirect","/dev"];m.beforeEach(async(e,a,t)=>{e.meta&&e.meta.title?document.title=`${e.meta.title} | ${p.title}`:document.title=p.title;const s=E();if(s.isLogin())if(e.path==="/login")t({path:"/"});else if(s.role>0)t();else try{await s.getUserInfo(),t(n(u({},e),{replace:!0}))}catch{s.resetToken(),t(`/login?redirect=${e.path}`)}else $.some(i=>e.path.startsWith(i))?t():t(`/login?redirect=${e.path}`)});const r=P(v);r.use(A);r.use(I);r.use(D);r.use(b);r.use(R());r.use(m);r.mount("#app");
