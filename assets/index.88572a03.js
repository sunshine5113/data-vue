import{d as e,T as l,U as t,e as a,h as o,j as s,B as i,f as d,o as n,c,w as u,a as b,q as p,b as f,r as m,A as y,t as r,F as g,g as h}from"./index.b20965e1.js";var v=e({name:"GFieldCollapse",props:{mode:{type:String,default:""},label:{type:String,required:!0},tooltip:{type:String},toggle:{type:Boolean,default:!1},modelValue:{type:Boolean,default:!0},defaultLayout:{type:String,default:l.horizontal},features:{type:Array,default:()=>[]},list:Array,min:{type:Number,default:0},max:{type:Number,default:1e3},addItem:{type:Function,default:()=>{}}},emits:[t],setup(e,d){const n=a([]),c=a("0"),u=a(e.defaultLayout===l.horizontal),b=o((()=>n.value.length>0&&e.features.length>0)),p=o((()=>e.features.includes(l.horizontal))),f=o((()=>e.features.includes(l.vertical))),m=o((()=>e.features.includes(l.copy))),y=o((()=>e.features.includes(l.add))),r=o((()=>e.features.includes(l.remove))),g=o((()=>(p.value||f.value)&&(m.value||y.value||r.value))),h=o((()=>{const l=!e.list||e.list.length<e.min||e.list.length>=e.max;return{disabled:l,msg:l?"不可复制":""}})),v=o((()=>{const l=!e.list||e.list.length>=e.max;return{disabled:l,msg:l?"已至最大项数":""}})),x=o((()=>{const l=!e.list||e.list.length<=e.min;return{disabled:l,msg:l?"已至最小项数":""}}));return s((()=>e.modelValue),(e=>{e||(n.value=[])})),{activeNames:n,activeTab:c,isLayoutRow:u,visibleToolbox:b,showToolboxRow:p,showToolboxCol:f,showToolboxCopy:m,showToolboxAdd:y,showToolboxDel:r,showToolboxSplit:g,copyState:h,addState:v,deleteState:x,toggleVisible:e=>{d.emit(t,e)},copyData:()=>{if(!h.value.disabled){const l=Math.min(+c.value,e.list.length-1);e.list.push(i(e.list[l]))}},addData:()=>{if(!v.value.disabled&&"function"==typeof e.addItem){const l=e.addItem()||{};e.list.push(l)}},deleteData:()=>{if(!x.value.disabled){const l=Math.min(+c.value,e.list.length-1);e.list.splice(l,1),c.value="0"}}}}});const x={class:"g-field-show-placeholder"},w={key:2,class:"g-field-collapse-panel-toolbox"},k={key:2,class:"g-field-collapse-panel-toolbox-split"},T={key:1,class:"g-field-tabs --column"},S={key:1,class:"g-field-collapse-panel-empty"};v.render=function(e,l,t,a,o,s){const i=d("el-switch"),v=d("el-tooltip"),C=d("el-tab-pane"),V=d("el-tabs"),D=d("el-collapse-item"),L=d("el-collapse");return n(),c(L,{modelValue:e.activeNames,"onUpdate:modelValue":l[8]||(l[8]=l=>e.activeNames=l),class:["g-field-collapse",{"--disable":e.toggle&&!e.modelValue}]},{default:u((()=>[b(D,{disabled:!e.modelValue,class:["g-field-collapse-panel",{"--has-toolbox":e.visibleToolbox}]},{title:u((()=>[b("i",x,[e.toggle?(n(),c(i,{key:0,"model-value":e.modelValue,class:"--mini",onClick:l[1]||(l[1]=p((()=>{}),["stop"])),onChange:e.toggleVisible},null,8,["model-value","onChange"])):f("",!0)]),e.tooltip?(n(),c(v,{key:0,effect:"blue",placement:"top",offset:2},{content:u((()=>[m(e.$slots,"tooltip",{},(()=>[y(r(e.tooltip),1)]))])),default:u((()=>[b("label",{class:"g-field-title-with-description",title:e.label},r(e.label),9,["title"])])),_:1})):(n(),c("label",{key:1,class:"g-field-title",title:e.label},r(e.label),9,["title"])),e.visibleToolbox?(n(),c("div",w,[e.showToolboxRow?(n(),c("i",{key:0,class:["v-icon-layout-row toolbox-icon",{"--selected":e.isLayoutRow}],onClick:l[2]||(l[2]=p((l=>e.isLayoutRow=!0),["stop"]))},null,2)):f("",!0),e.showToolboxCol?(n(),c("i",{key:1,class:["v-icon-layout-column toolbox-icon",{"--selected":!e.isLayoutRow}],onClick:l[3]||(l[3]=p((l=>e.isLayoutRow=!1),["stop"]))},null,2)):f("",!0),e.showToolboxSplit?(n(),c("span",k)):f("",!0),e.showToolboxCopy?(n(),c(v,{key:3,effect:"blue",placement:"top",offset:2,disabled:!e.copyState.disabled,content:e.copyState.msg},{default:u((()=>[b("i",{class:["v-icon-copy toolbox-icon",{"--disabled":e.copyState.disabled}],onClick:l[4]||(l[4]=p(((...l)=>e.copyData&&e.copyData(...l)),["stop"]))},null,2)])),_:1},8,["disabled","content"])):f("",!0),e.showToolboxAdd?(n(),c(v,{key:4,effect:"blue",placement:"top",offset:2,disabled:!e.addState.disabled,content:e.addState.msg},{default:u((()=>[b("i",{class:["v-icon-plus toolbox-icon",{"--disabled":e.addState.disabled}],onClick:l[5]||(l[5]=p(((...l)=>e.addData&&e.addData(...l)),["stop"]))},null,2)])),_:1},8,["disabled","content"])):f("",!0),e.showToolboxDel?(n(),c(v,{key:5,effect:"blue",placement:"top",offset:2,disabled:!e.deleteState.disabled,content:e.deleteState.msg},{default:u((()=>[b("i",{class:["v-icon-delete toolbox-icon",{"--disabled":e.deleteState.disabled}],onClick:l[6]||(l[6]=p(((...l)=>e.deleteData&&e.deleteData(...l)),["stop"]))},null,2)])),_:1},8,["disabled","content"])):f("",!0)])):f("",!0)])),default:u((()=>["layout"===e.mode?(n(),c(g,{key:0},[e.list&&e.list.length>0?(n(),c(g,{key:0},[e.isLayoutRow?(n(),c(V,{key:0,modelValue:e.activeTab,"onUpdate:modelValue":l[7]||(l[7]=l=>e.activeTab=l),type:"border-card",class:"g-field-tabs"},{default:u((()=>[(n(!0),c(g,null,h(e.list,((l,t)=>(n(),c(C,{key:t,label:e.label+(t+1)},{default:u((()=>[m(e.$slots,"default",{item:l})])),_:2},1032,["label"])))),128))])),_:1},8,["modelValue"])):(n(),c("div",T,[(n(!0),c(g,null,h(e.list,((l,t)=>(n(),c("div",{key:t,class:"g-field-tabs-column-item"},[m(e.$slots,"default",{item:l})])))),128))]))],64)):(n(),c("span",S," 列表为空 "))],64)):m(e.$slots,"default",{key:1})])),_:3},8,["disabled","class"])])),_:1},8,["modelValue","class"])},v.install=e=>{e.component(v.name,v)};export default v;
