import{a6 as o,aa as n,ad as p,a4 as X,a9 as A,aC as u,aB as j,a5 as l,a7 as c,a$ as a,ab as f,as as J,aX as i,aN as v,ah as b,ag as w,b0 as E,ae as L,ac as K,af as G,ai as F}from"./vendor.1c7e0fbb.js";import{a as B,T as g,U as O}from"./AppRoot.9161bc33.js";import{I as Q}from"./arrow-right.8edff304.js";import{I as W}from"./plus.af9fc8ff.js";import{I as Y}from"./delete.97a5a659.js";import{I as Z}from"./copy.e2152bd3.js";const x={},ee={t:"1641143491910",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"4028",width:"64",height:"64"},te=p("path",{d:"M896 128H128c-25.6 0-42.666667 17.066667-42.666667 42.666667v682.666666c0 25.6 17.066667 42.666667 42.666667 42.666667h768c25.6 0 42.666667-17.066667 42.666667-42.666667V170.666667c0-25.6-17.066667-42.666667-42.666667-42.666667z m-42.666667 682.666667H170.666667V213.333333h682.666666v597.333334z","p-id":"4029"},null,-1),oe=p("path",{d:"M170.666667 469.333333h682.666666v85.333334H170.666667v-85.333334z","p-id":"4030"},null,-1),ae=[te,oe];function le(e,s){return o(),n("svg",ee,ae)}var se=B(x,[["render",le]]);const ne={},ie={t:"1641143458555",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"4027",width:"64",height:"64"},de=p("path",{d:"M853.333333 128H170.666667c-25.6 0-42.666667 17.066667-42.666667 42.666667v682.666666c0 25.6 17.066667 42.666667 42.666667 42.666667h682.666666c25.6 0 42.666667-17.066667 42.666667-42.666667V170.666667c0-25.6-17.066667-42.666667-42.666667-42.666667zM213.333333 810.666667V213.333333h256v597.333334H213.333333z m597.333334 0h-256V213.333333h256v597.333334z","p-id":"4028"},null,-1),ue=[de];function ce(e,s){return o(),n("svg",ie,ue)}var re=B(ne,[["render",ce]]);const me=X({name:"GFieldCollapse",components:{IconArrowRight:Q,IconPlus:W,IconDelete:Y,IconCopy:Z,IconLayoutRow:se,IconLayoutColumn:re},props:{mode:{type:String,default:""},label:{type:String,required:!0},tooltip:{type:String},toggle:{type:Boolean,default:!1},modelValue:{type:Boolean,default:!0},defaultLayout:{type:String,default:g.horizontal},features:{type:Array,default:()=>[]},list:Array,min:{type:Number,default:0},max:{type:Number,default:1e3},tab:String,addItem:{type:Function,default:()=>{}}},emits:[O],setup(e,s){const _=A([]),y=A(0),H=A(e.defaultLayout===g.horizontal),U=u(()=>_.value.length>0&&e.features.length>0),k=u(()=>e.features.includes(g.horizontal)),r=u(()=>e.features.includes(g.vertical)),T=u(()=>e.features.includes(g.copy)),h=u(()=>e.features.includes(g.add)),C=u(()=>e.features.includes(g.remove)),D=u(()=>(k.value||r.value)&&(T.value||h.value||C.value)),I=u(()=>{const t=!e.list||e.list.length<e.min||e.list.length>=e.max;return{disabled:t,msg:t?"\u4E0D\u53EF\u590D\u5236":""}}),S=u(()=>{const t=!e.list||e.list.length>=e.max;return{disabled:t,msg:t?"\u5DF2\u81F3\u6700\u5927\u9879\u6570":""}}),$=u(()=>{const t=!e.list||e.list.length<=e.min;return{disabled:t,msg:t?"\u5DF2\u81F3\u6700\u5C0F\u9879\u6570":""}}),V=t=>{e.toggle&&!e.modelValue||(_.value=t)},R=t=>{s.emit(O,t)},z=()=>{if(!I.value.disabled){const t=Math.min(y.value,e.list.length-1);e.list.push(J(e.list[t]))}},N=()=>{if(!$.value.disabled){const t=Math.min(y.value,e.list.length-1);e.list.splice(t,1),y.value=0}},m=()=>{if(!S.value.disabled&&typeof e.addItem=="function"){const t=e.addItem()||{};e.list.push(t)}},d=t=>(e.tab||e.label)+(t+1),P=t=>{y.value=t};return j(()=>e.modelValue,t=>{t||(_.value=[])}),{activeNames:_,activeTab:y,isLayoutRow:H,visibleToolbox:U,showToolboxRow:k,showToolboxCol:r,showToolboxCopy:T,showToolboxAdd:h,showToolboxDel:C,showToolboxSplit:D,copyState:I,addState:S,deleteState:$,handleExpand:V,toggleVisible:R,copyData:z,addData:m,deleteData:N,getTabLabel:d,changeTab:P}}}),be={class:"g-field-show-placeholder"},he=["title"],fe=["innerHTML"],ge=["title"],pe={key:2,class:"g-field-collapse-panel-toolbox"},ye={key:2,class:"g-field-collapse-panel-toolbox-split"},ve={key:1,class:"g-field-tabs --column"},we=["onClick"],_e={key:1,class:"g-field-collapse-panel-empty"};function ke(e,s,_,y,H,U){const k=l("IconArrowRight"),r=l("n-icon"),T=l("n-switch"),h=l("n-tooltip"),C=l("IconLayoutRow"),D=l("IconLayoutColumn"),I=l("IconCopy"),S=l("IconPlus"),$=l("IconDelete"),V=l("n-tab-pane"),R=l("n-tabs"),z=l("n-collapse-item"),N=l("n-collapse");return o(),c(N,{"expanded-names":e.activeNames,"arrow-placement":"right","display-directive":"show",class:f(["g-field-collapse",{"--disabled":e.toggle&&!e.modelValue}]),"onUpdate:expandedNames":e.handleExpand},{arrow:a(()=>[i(r,null,{default:a(()=>[i(k)]),_:1})]),default:a(()=>[i(z,{class:"g-field-collapse-panel"},{header:a(()=>[p("i",be,[e.toggle?(o(),c(T,{key:0,value:e.modelValue,size:"small",onClick:s[0]||(s[0]=v(()=>{},["stop"])),"onUpdate:value":e.toggleVisible},null,8,["value","onUpdate:value"])):b("",!0)]),e.tooltip?(o(),c(h,{key:0,placement:"top"},{trigger:a(()=>[p("label",{class:"g-field-title-with-description",title:e.label},w(e.label),9,he)]),default:a(()=>[p("span",{innerHTML:e.tooltip},null,8,fe)]),_:1})):(o(),n("label",{key:1,class:"g-field-title",title:e.label},w(e.label),9,ge)),e.visibleToolbox?(o(),n("div",pe,[e.showToolboxRow?(o(),c(r,{key:0,class:f(["toolbox-icon",{"--selected":e.isLayoutRow}]),onClick:s[1]||(s[1]=v(m=>e.isLayoutRow=!0,["stop"]))},{default:a(()=>[i(C)]),_:1},8,["class"])):b("",!0),e.showToolboxCol?(o(),c(r,{key:1,class:f(["toolbox-icon",{"--selected":!e.isLayoutRow}]),onClick:s[2]||(s[2]=v(m=>e.isLayoutRow=!1,["stop"]))},{default:a(()=>[i(D)]),_:1},8,["class"])):b("",!0),e.showToolboxSplit?(o(),n("span",ye)):b("",!0),e.showToolboxCopy?(o(),c(h,{key:3,placement:"top",disabled:!e.copyState.disabled},{trigger:a(()=>[i(r,{class:f(["toolbox-icon",{"--disabled":e.copyState.disabled}]),onClick:v(e.copyData,["stop"])},{default:a(()=>[i(I)]),_:1},8,["class","onClick"])]),default:a(()=>[E(" "+w(e.copyState.msg),1)]),_:1},8,["disabled"])):b("",!0),e.showToolboxAdd?(o(),c(h,{key:4,placement:"top",disabled:!e.addState.disabled},{trigger:a(()=>[i(r,{class:f(["toolbox-icon --icon-add",{"--disabled":e.addState.disabled}]),onClick:v(e.addData,["stop"])},{default:a(()=>[i(S)]),_:1},8,["class","onClick"])]),default:a(()=>[E(" "+w(e.addState.msg),1)]),_:1},8,["disabled"])):b("",!0),e.showToolboxDel?(o(),c(h,{key:5,placement:"top",disabled:!e.deleteState.disabled},{trigger:a(()=>[i(r,{class:f(["toolbox-icon",{"--disabled":e.deleteState.disabled}]),onClick:v(e.deleteData,["stop"])},{default:a(()=>[i($)]),_:1},8,["class","onClick"])]),default:a(()=>[E(" "+w(e.deleteState.msg),1)]),_:1},8,["disabled"])):b("",!0)])):b("",!0)]),default:a(()=>[e.mode==="layout"?(o(),n(L,{key:0},[e.list&&e.list.length>0?(o(),n(L,{key:0},[e.isLayoutRow?(o(),c(R,{key:0,value:e.activeTab,"onUpdate:value":s[3]||(s[3]=m=>e.activeTab=m),type:"card",class:"g-field-tabs",style:K({"--datav-gui-tabs-card-num":e.max})},{default:a(()=>[(o(!0),n(L,null,G(e.list,(m,d)=>(o(),c(V,{key:d,name:d,tab:e.getTabLabel(d)},{default:a(()=>[F(e.$slots,"default",{item:m})]),_:2},1032,["name","tab"]))),128))]),_:3},8,["value","style"])):(o(),n("div",ve,[(o(!0),n(L,null,G(e.list,(m,d)=>(o(),n("div",{key:d,class:"g-field-tabs-column-item"},[p("span",{class:f(["g-field-tabs-column-item-head",{"--selected":d===e.activeTab}]),onClick:P=>e.changeTab(d)},w(e.getTabLabel(d)),11,we),F(e.$slots,"default",{item:m})]))),128))]))],64)):(o(),n("span",_e," \u5217\u8868\u4E3A\u7A7A "))],64)):F(e.$slots,"default",{key:1})]),_:3})]),_:3},8,["expanded-names","class","onUpdate:expandedNames"])}var M=B(me,[["render",ke]]);M.install=e=>{e.component(M.name,M)};export{M as default};
