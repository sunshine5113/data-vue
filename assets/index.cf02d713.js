import{x as D,_ as r,y as f,E as _,B as M,b as V,z as d,C as x,F as b,H as v}from"./App.1a480446.js";import{a3 as R,a7 as p,bd as k,a8 as A,ai as j,a4 as s,a9 as O,ac as m,aZ as c,b3 as L,ad as q,a5 as $}from"./vendor.60e09344.js";import{a as C}from"./templates.d393430b.js";function B(t){switch(t){case"./other/date-picker/src/date-picker.ts":return r(()=>import("./date-picker.dd1b819a.js"),["assets/date-picker.dd1b819a.js","assets/App.1a480446.js","assets/App.8845dfc6.css","assets/vendor.60e09344.js","assets/data-field.0ba3a232.js","assets/data.17c02c40.js"]);default:return new Promise(function(o,e){(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(e.bind(null,new Error("Unknown variable dynamic import: "+t)))})}}function F(t){switch(t){case"./media/bg-box/src/bg-box.ts":return r(()=>import("./App.1a480446.js").then(function(o){return o.aa}),["assets/App.1a480446.js","assets/App.8845dfc6.css","assets/vendor.60e09344.js"]);case"./media/border-box/src/border-box.ts":return r(()=>import("./App.1a480446.js").then(function(o){return o.a9}),["assets/App.1a480446.js","assets/App.8845dfc6.css","assets/vendor.60e09344.js"]);case"./media/decoration/src/decoration.ts":return r(()=>import("./App.1a480446.js").then(function(o){return o.ab}),["assets/App.1a480446.js","assets/App.8845dfc6.css","assets/vendor.60e09344.js"]);case"./media/main-img/src/main-img.ts":return r(()=>import("./main-img.ac9d09c3.js"),["assets/main-img.ac9d09c3.js","assets/App.1a480446.js","assets/App.8845dfc6.css","assets/vendor.60e09344.js","assets/data.17c02c40.js"]);default:return new Promise(function(o,e){(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(e.bind(null,new Error("Unknown variable dynamic import: "+t)))})}}function S(t){switch(t){case"./button/full-screen/src/full-screen.ts":return r(()=>import("./full-screen.786085b4.js"),["assets/full-screen.786085b4.js","assets/App.1a480446.js","assets/App.8845dfc6.css","assets/vendor.60e09344.js","assets/data.17c02c40.js"]);default:return new Promise(function(o,e){(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(e.bind(null,new Error("Unknown variable dynamic import: "+t)))})}}function U(t){switch(t){case"./text/main-title/src/main-title.ts":return r(()=>import("./main-title.bd245f62.js"),["assets/main-title.bd245f62.js","assets/App.1a480446.js","assets/App.8845dfc6.css","assets/vendor.60e09344.js","assets/data-field.0ba3a232.js","assets/data.17c02c40.js"]);case"./text/marquee/src/marquee.ts":return r(()=>import("./marquee.e59c508e.js"),["assets/marquee.e59c508e.js","assets/App.1a480446.js","assets/App.8845dfc6.css","assets/vendor.60e09344.js","assets/data-field.0ba3a232.js","assets/data.17c02c40.js"]);case"./text/number-title-flop/src/number-title-flop.ts":return r(()=>import("./number-title-flop.380670a5.js"),["assets/number-title-flop.380670a5.js","assets/App.1a480446.js","assets/App.8845dfc6.css","assets/vendor.60e09344.js","assets/data-field.0ba3a232.js","assets/data.17c02c40.js"]);case"./text/paragraph/src/paragraph.ts":return r(()=>import("./paragraph.9071983f.js"),["assets/paragraph.9071983f.js","assets/App.1a480446.js","assets/App.8845dfc6.css","assets/vendor.60e09344.js","assets/data-field.0ba3a232.js","assets/data.17c02c40.js"]);case"./text/timer/src/timer.ts":return r(()=>import("./timer.253173cc.js"),["assets/timer.253173cc.js","assets/App.1a480446.js","assets/App.8845dfc6.css","assets/vendor.60e09344.js","assets/data.17c02c40.js"]);default:return new Promise(function(o,e){(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(e.bind(null,new Error("Unknown variable dynamic import: "+t)))})}}function N(t){switch(t){case"./chart/word-cloud/src/word-cloud.ts":return r(()=>import("./word-cloud.1cecadbc.js"),["assets/word-cloud.1cecadbc.js","assets/App.1a480446.js","assets/App.8845dfc6.css","assets/vendor.60e09344.js","assets/data-field.0ba3a232.js","assets/data.17c02c40.js"]);default:return new Promise(function(o,e){(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(e.bind(null,new Error("Unknown variable dynamic import: "+t)))})}}function z(t){switch(t){case"./line/basic-line/src/basic-line.ts":return r(()=>import("./basic-line.3d816d9d.js"),["assets/basic-line.3d816d9d.js","assets/App.1a480446.js","assets/App.8845dfc6.css","assets/vendor.60e09344.js","assets/data-field.0ba3a232.js","assets/data.17c02c40.js"]);default:return new Promise(function(o,e){(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(e.bind(null,new Error("Unknown variable dynamic import: "+t)))})}}function H(t){switch(t){case"./bar/basic-bar/src/basic-bar.ts":return r(()=>import("./basic-bar.d6e93ebb.js"),["assets/basic-bar.d6e93ebb.js","assets/App.1a480446.js","assets/App.8845dfc6.css","assets/vendor.60e09344.js","assets/data-field.0ba3a232.js","assets/data.17c02c40.js"]);default:return new Promise(function(o,e){(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(e.bind(null,new Error("Unknown variable dynamic import: "+t)))})}}async function W(t){const o=D(t.substring(1));switch(t.substring(1)){case"BasicBar":{const e=await H(`./bar/${o}/src/${o}.ts`);return new e.default}case"BasicLine":{const e=await z(`./line/${o}/src/${o}.ts`);return new e.default}case"WordCloud":{const e=await N(`./chart/${o}/src/${o}.ts`);return new e.default}case"MainTitle":case"Marquee":case"NumberTitleFlop":case"Paragraph":case"Timer":{const e=await U(`./text/${o}/src/${o}.ts`);return new e.default}case"FullScreen":{const e=await S(`./button/${o}/src/${o}.ts`);return new e.default}case"BgBox":case"BorderBox":case"Decoration":case"MainImg":{const e=await F(`./media/${o}/src/${o}.ts`);return new e.default}case"DatePicker":{const e=await B(`./other/${o}/src/${o}.ts`);return new e.default}default:throw Error(`Unknown component type: ${t}.`)}}const X=async()=>{const{pageConfig:t}=_,e=["VMainTitle","VNumberTitleFlop","VDatePicker","VBgBox","VBorderBox","VDecoration","VBasicBar","VMarquee","VParagraph","VTimer","VFullScreen","VMainImg","VWordCloud"].map(n=>W(n)),l=await Promise.all(e),u=l.map(n=>(n.attr.x=f(t.width-n.attr.w),n.attr.y=f(t.height-n.attr.h),_.addCom(n)));await Promise.all(u);const i=[],a=[];l.forEach(n=>{n.apis.source&&(a.push(n.id),i.push(n.loadData()))}),i.length>0&&(await Promise.all(i),setTimeout(()=>{a.forEach(n=>{M.datavComponents[n].$DATAV_requestData()})},200))};const Y=R({name:"ScreenEditor",components:{HeaderToolbar:p(()=>r(()=>import("./index.624a3900.js"),["assets/index.624a3900.js","assets/index.891400cf.css","assets/App.1a480446.js","assets/App.8845dfc6.css","assets/vendor.60e09344.js","assets/screen.92905770.js","assets/layer.47cfed0e.js","assets/publish-screen.84ec72f4.js","assets/publish-screen.df6080ef.css","assets/release.230d432d.js","assets/help.750552df.js"])),FooterToolbar:p(()=>r(()=>import("./index.d6dbf87b.js"),["assets/index.d6dbf87b.js","assets/index.9993353f.css","assets/vendor.60e09344.js","assets/App.1a480446.js","assets/App.8845dfc6.css","assets/arrow-down.f50f91f2.js"])),EditorContextMenu:p(()=>r(()=>import("./index.7a8c9ff5.js"),["assets/index.7a8c9ff5.js","assets/index.e4ffd428.css","assets/App.1a480446.js","assets/App.8845dfc6.css","assets/vendor.60e09344.js","assets/dom.cd0136fc.js","assets/warning.85b7d1f4.js","assets/edit.b8b6bffa.js","assets/delete.af2293e1.js","assets/copy.5efe81af.js","assets/lock.d87b623c.js","assets/show.fd19388e.js","assets/hide.c72287c6.js","assets/index.a77ec668.js"])),CanvasMain:d(()=>r(()=>import("./index.8c2b3b64.js"),["assets/index.8c2b3b64.js","assets/index.ed776fce.css","assets/vendor.60e09344.js","assets/App.1a480446.js","assets/App.8845dfc6.css","assets/dom.cd0136fc.js","assets/index.a77ec668.js","assets/templates.d393430b.js"])),LayerPanel:d(()=>r(()=>import("./index.6cdac4b8.js"),["assets/index.6cdac4b8.js","assets/index.f8bf7f5e.css","assets/vendor.60e09344.js","assets/App.1a480446.js","assets/App.8845dfc6.css","assets/warning.85b7d1f4.js","assets/delete.af2293e1.js","assets/back.19ee7c5e.js","assets/lock.d87b623c.js","assets/hide.c72287c6.js","assets/view-grid.cf67270e.js","assets/index.a77ec668.js","assets/dom.cd0136fc.js"])),ComponentsPanel:d(()=>r(()=>import("./index.2e3cac12.js"),["assets/index.2e3cac12.js","assets/index.193d8278.css","assets/App.1a480446.js","assets/App.8845dfc6.css","assets/vendor.60e09344.js","assets/search.7c24b5ab.js","assets/back.19ee7c5e.js","assets/templates.d393430b.js"])),ConfigPanel:d(()=>r(()=>import("./index.23cab0bb.js"),["assets/index.23cab0bb.js","assets/index.1e2ad6b6.css","assets/App.1a480446.js","assets/App.8845dfc6.css","assets/vendor.60e09344.js","assets/interact.ef4dc928.js"])),ToolboxPanel:d(()=>r(()=>import("./index.e63bf5d6.js"),["assets/index.e63bf5d6.js","assets/index.87378182.css","assets/vendor.60e09344.js","assets/App.1a480446.js","assets/App.8845dfc6.css"])),FilterManagerDrawer:d(()=>r(()=>import("./filter-manager-drawer.b1826835.js"),["assets/filter-manager-drawer.b1826835.js","assets/filter-manager-drawer.24f26014.css","assets/App.1a480446.js","assets/App.8845dfc6.css","assets/vendor.60e09344.js","assets/warning.85b7d1f4.js","assets/document.5413d2b5.js","assets/filter-collapse-panel.e9dd4ad0.js","assets/arrow-left.3cf3e9ed.js","assets/edit.b8b6bffa.js","assets/delete.af2293e1.js","assets/release.230d432d.js"]))},props:{projectId:{type:[String,Number],required:!0}},setup(t){const o=k(),e=A(!0);return x.enableDebug(),_.setEditMode(),j(async()=>{var l;try{const u=parseInt(o.query.tpl);if(u>0){const{data:i}=await C(u);if(i){const{config:a}=i;_.setEditorOption({screen:{id:+t.projectId,name:i.name},config:{width:a.width,height:a.height,bgimage:a.bgimage,bgcolor:a.bgcolor,styleFilterParams:a.styleFilterParams},coms:a.coms,variables:a.variables}),b.setFilterOption({dataFilters:(l=a.dataFilters)!=null?l:[]})}u===1&&X()}else{const i=+t.projectId;_.loadScreen(i),b.loadFilters(i),await _.loadComs(i)}}catch(u){console.log(u)}finally{e.value=!1,document.title=`${_.screen.name} | \u7F16\u8F91\u5668`,_.autoCanvasScale(()=>({offsetX:v.getPanelOffsetX,offsetY:v.getPanelOffsetY}))}}),{loading:e}}}),Z={class:"g-layout is-vertical edit-container"},G={class:"g-header"},J={id:"edit-main-wp",class:"g-layout edit-main-wp"},K={class:"g-layout edit-main"};function Q(t,o,e,l,u,i){const a=s("header-toolbar"),n=s("layer-panel"),w=s("components-panel"),E=s("filter-manager-drawer"),g=s("toolbox-panel"),P=s("canvas-main"),y=s("g-loading"),T=s("footer-toolbar"),I=s("config-panel"),h=s("editor-context-menu");return $(),O(q,null,[m("div",Z,[m("div",G,[c(a)]),m("div",J,[c(n),c(w),c(E),m("div",K,[c(g),c(y,{spinning:t.loading},{default:L(()=>[c(P)]),_:1},8,["spinning"]),c(T)]),c(I)])]),c(h)],64)}var ee=V(Y,[["render",Q],["__scopeId","data-v-b54f1d56"]]),ne=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:ee});export{W as c,ne as i};
