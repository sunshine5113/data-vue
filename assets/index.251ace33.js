var N=Object.defineProperty,O=Object.defineProperties;var z=Object.getOwnPropertyDescriptors;var F=Object.getOwnPropertySymbols;var L=Object.prototype.hasOwnProperty,q=Object.prototype.propertyIsEnumerable;var M=(e,t,o)=>t in e?N(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,k=(e,t)=>{for(var o in t||(t={}))L.call(t,o)&&M(e,o,t[o]);if(F)for(var o of F(t))q.call(t,o)&&M(e,o,t[o]);return e},y=(e,t)=>O(e,z(t));import{b as X,I as g,a0 as Y,X as P,z as D,B as G}from"./App.7d9600e2.js";import{c as H}from"./index.4678cdeb.js";import{I as J}from"./search.9e6a9cb8.js";import{I as K}from"./back.aa188aed.js";import{a2 as Q,a$ as R,a7 as U,aF as V,ax as W,a3 as m,a4 as c,a8 as d,ab as s,ae as _,aY as p,b0 as i,ac as f,ad as h,a5 as w,b1 as E,aa as j,af as x,a9 as Z}from"./vendor.577170a9.js";import"./templates.9eb9c05f.js";const ee=Q({name:"ComponentsPanel",components:{IconSearch:J,IconBack:K},setup(){const e=R(),t=U([]),o=V(()=>g.components.show),S=W(Y),b={type:"all",name:"\u5168\u90E8",icon:"v-icon-view-grid"},T=V(()=>{const l=S;return l.forEach(u=>{u.data.unshift(y(k({},b),{data:u.data.flatMap(n=>n.data)}))}),l.push({type:"favorite",name:"\u6536\u85CF",icon:"v-icon-favorite",data:[y(k({},b),{data:t.value})]}),l});return{visiblePanel:o,categories:T,changeVisible:()=>{g.setPanelState({type:P.components,value:!o.value})},handleTabClick:()=>{o.value||g.setPanelState({type:P.components,value:!0})},toAddCom:async(l,u)=>{if(u){g.addLoading();const{pageConfig:n}=D,a=await H(l);a.attr.x=Math.floor((n.width-a.attr.w)/2),a.attr.y=Math.floor((n.height-a.attr.h)/2),await D.addCom(a),D.selectCom(a.id),g.removeLoading(),a.apis.source&&(await a.loadData(),G.datavComponents[a.id].$DATAV_requestData())}else e.warning("\u6B63\u5728\u5F00\u53D1\u4E2D\u3002\u3002\u3002")},dragStart:(l,u)=>{l.dataTransfer.setData("text",u)},dragOver:l=>{l.preventDefault(),l.stopPropagation(),l.dataTransfer.dropEffect="none"}}}}),ae={class:"components-panel"},te={class:"panel-title"},ne={class:"panel-text"},se=E(" \u641C\u7D22 "),oe=E(" \u6536\u8D77 "),le={class:"com-tab-title"},ie={class:"com-tab-title"},ce={class:"components-single-menu-wp"},re={class:"components-single-menu"},de={class:"components-single-menu-list"},ue=["title","draggable","onDragstart","onClick"],pe={class:"components-item-text"},me={key:1,class:"components-multi-menu"},_e={class:"components-single-menu --wider"},ge={class:"components-single-menu-list"},fe=["title","draggable","onDragstart","onClick"],ve={class:"components-item-text"},he={key:0,class:"favorite-empty"};function be(e,t,o,S,b,T){const B=m("IconSearch"),C=m("n-icon"),v=m("n-tooltip"),$=m("IconBack"),I=m("g-com-icon"),l=m("el-tab-pane"),u=m("el-tabs");return c(),d("div",{class:Z(["g-aside component-panel-wp",{"--hide":!e.visiblePanel}])},[s("div",ae,[s("div",te,[s("span",ne,_(e.visiblePanel?"\u5168\u90E8\u7EC4\u4EF6":"\u7EC4\u4EF6"),1),p(v,{delay:500},{trigger:i(()=>[p(C,{title:"\u641C\u7D22",class:"btn-icon"},{default:i(()=>[p(B)]),_:1})]),default:i(()=>[se]),_:1}),p(v,{delay:500},{trigger:i(()=>[p(C,{title:"\u6536\u8D77",class:"btn-icon",onClick:e.changeVisible},{default:i(()=>[p($)]),_:1},8,["onClick"])]),default:i(()=>[oe]),_:1})]),s("div",{class:"components-panel-wrapper",onDragover:t[0]||(t[0]=(...n)=>e.dragOver&&e.dragOver(...n))},[p(u,{"tab-position":"left",onTabClick:e.handleTabClick},{default:i(()=>[(c(!0),d(f,null,h(e.categories,n=>(c(),w(l,{key:n.type},{label:i(()=>[p(v,{placement:"left",delay:500},{trigger:i(()=>[s("div",null,[p(I,{icon:n.icon,class:"com-tab-icon"},null,8,["icon"]),s("span",le,_(n.name),1)])]),default:i(()=>[E(" "+_(n.name),1)]),_:2},1024)]),default:i(()=>[n.data.length>2?(c(),w(u,{key:0,"tab-position":"left",class:"el-tabs-l2"},{default:i(()=>[(c(!0),d(f,null,h(n.data,a=>(c(),w(l,{key:a.type},{label:i(()=>[s("span",ie,_(a.name),1)]),default:i(()=>[s("div",ce,[s("div",re,[s("ul",de,[(c(!0),d(f,null,h(a.data,r=>(c(),d("li",{key:r.name,title:r.alias,draggable:r.used,class:"components-item double",onDragstart:A=>e.dragStart(A,r.name),onClick:A=>e.toAddCom(r.name,r.used)},[s("div",pe,_(r.alias),1),s("div",{class:"components-item-img",style:j(`background-image: url(${r.img});`)},null,4)],40,ue))),128))])])])]),_:2},1024))),128))]),_:2},1024)):(c(),d("div",me,[s("div",_e,[s("ul",ge,[(c(!0),d(f,null,h(n.data[0].data,a=>(c(),d("li",{key:a.name,title:a.alias,draggable:a.used,class:"components-item double",onDragstart:r=>e.dragStart(r,a.name),onClick:r=>e.toAddCom(a.name,a.used)},[s("div",ve,_(a.alias),1),s("div",{class:"components-item-img",style:j(`background-image: url(${a.img});`)},null,4)],40,fe))),128))]),n.data[0].data.length===0?(c(),d(f,{key:0},[n.type==="favorite"?(c(),d("div",he," \u6CA1\u6709\u6536\u85CF\u7EC4\u4EF6 ")):x("",!0)],64)):x("",!0)])]))]),_:2},1024))),128))]),_:1},8,["onTabClick"])],32)])],2)}var Te=X(ee,[["render",be]]);export{Te as default};
