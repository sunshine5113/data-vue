import{a4 as l,a8 as p,ab as i,a2 as W,a$ as X,bd as Y,a7 as q,aF as y,a3 as u,bi as J,aY as s,b0 as d,a9 as v,aa as m,ac as L,ad as O,aN as z,bf as U,ai as P,ae as A,a5 as f,af as w,b7 as Q,bb as R,bc as Z}from"./vendor.577170a9.js";import{b as H,I as K,z as b,X as x,$ as g}from"./App.7d9600e2.js";import{I as ee}from"./warning.d73c71b1.js";import{I as oe}from"./delete.dfde7a3e.js";import{I as se}from"./back.aa188aed.js";import{I as ne,a as te,b as ae,c as le,d as ie}from"./lock.e692ce4e.js";import{I as de}from"./hide.afcd161e.js";import{I as ce}from"./view-grid.bd42ae48.js";import{u as re}from"./index.2ac6bc0f.js";import"./dom.17e5a3e2.js";const ue={},ve={t:"1631084935402",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"11950",width:"64",height:"64"},pe=i("path",{d:"M0 0l0 240.941176 1024 0 0-240.941176-1024 0zM963.764706 180.705882l-903.529412 0 0-120.470588 903.529412 0 0 120.470588zM0 602.352941l1024 0 0-240.941176-1024 0 0 240.941176zM60.235294 421.647059l903.529412 0 0 120.470588-903.529412 0 0-120.470588zM0 963.764706l1024 0 0-240.941176-1024 0 0 240.941176zM60.235294 783.058824l903.529412 0 0 120.470588-903.529412 0 0-120.470588z","p-id":"11951"},null,-1),me=[pe];function ye(o,c){return l(),p("svg",ve,me)}var he=H(ue,[["render",ye]]);const Ce=W({name:"LayerPanel",components:{IconViewList:he,IconViewGrid:ce,IconBack:se,IconMoveUp:ne,IconMoveDown:te,IconMoveTop:ae,IconMoveBottom:le,IconLock:ie,IconHide:de,IconDelete:oe},setup(){const o=X(),c=Y(),F=q(!1),I=y(()=>K.layer.show),j=y(()=>[...b.coms].reverse()),t=y(()=>b.selectedCom),M=y(()=>!!t.value),a=y(()=>{var r;return{enable:!!t.value,checked:(r=t.value)==null?void 0:r.locked}}),B=y(()=>{var r;return{enable:!!t.value,checked:(r=t.value)==null?void 0:r.hided}}),$=y(()=>({opacity:t.value?1:.3})),D=()=>{K.setPanelState({type:x.layer,value:!I.value})},T=r=>{b.selectCom(r)},h=r=>{t.value&&b.moveCom({id:t.value.id,moveType:r})},E=()=>h(g.up),V=()=>h(g.down),C=()=>h(g.top),k=()=>h(g.bottom),S=()=>{t.value&&(t.value.locked=!t.value.locked)},_=()=>{t.value&&(t.value.hided=!t.value.hided)},e=()=>{const r=t.value;if(r){const N=c.create({content:"\u662F\u5426\u5220\u9664\u9009\u4E2D\u76841\u4E2A\u7EC4\u4EF6",negativeText:"\u53D6\u6D88",positiveText:"\u786E\u5B9A",iconPlacement:"top",icon:()=>Q(ee),onPositiveClick:async()=>{N.loading=!0;try{await b.deleteCom(r)}catch(G){o.error(G.message)}}})}},{showMenu:n}=re();return{showText:F,visiblePanel:I,descComs:j,enableBtnClass:M,enableLockBtnClass:a,enableHideBtnClass:B,enableBtnStyle:$,changeVisible:D,selectCom:T,moveUp:E,moveDown:V,moveTop:C,moveBottom:k,lockCom:S,hideCom:_,toDeleteCom:e,showMenu:n}}}),ke=o=>(R("data-v-01769368"),o=o(),Z(),o),be={class:"layer-manager"},_e={class:"layer-manager-top"},fe=ke(()=>i("div",{class:"layer-num"},"\u56FE\u5C42",-1)),we={class:"layer-layout"},ge={class:"layer-toolbar layer-toolbar-top"},Ie={class:"layer-manager-wrap"},Me=["title","onMousedown","onMouseenter","onMouseleave"],Be=["onUpdate:modelValue","onBlur","onKeydown"],$e={key:1,class:"layer-item-span"},De={class:"layer-item-text"},Te=["title","onMousedown","onMouseenter","onMouseleave"],Ee=["alt"],Ve={class:"layer-manager-thumbail"},Se=["onUpdate:modelValue","onBlur","onKeydown"],Fe={key:1,class:"layer-item-span"},je={class:"layer-item-text"},Le={class:"layer-thumbail-item"},ze={class:"layer-toolbar layer-toolbar-bottom"};function Ue(o,c,F,I,j,t){const M=u("IconViewGrid"),a=u("n-icon"),B=u("IconViewList"),$=u("IconBack"),D=u("IconMoveUp"),T=u("IconMoveDown"),h=u("IconMoveTop"),E=u("IconMoveBottom"),V=u("g-com-icon"),C=u("IconHide"),k=u("IconLock"),S=u("IconDelete"),_=J("focus");return l(),p("div",{class:v(["g-aside layer-panel-wp",{"--hide":!o.visiblePanel}])},[i("div",be,[i("div",_e,[fe,i("div",we,[s(a,{title:"\u7F29\u7565\u56FE\u7248",class:v(["btn-icon",{selected:!o.showText}]),onClick:c[0]||(c[0]=e=>o.showText=!1)},{default:d(()=>[s(M)]),_:1},8,["class"]),s(a,{title:"\u6587\u5B57\u7248",class:v(["btn-icon",{selected:o.showText}]),onClick:c[1]||(c[1]=e=>o.showText=!0)},{default:d(()=>[s(B)]),_:1},8,["class"]),s(a,{title:"\u6536\u8D77",class:"btn-icon",onClick:o.changeVisible},{default:d(()=>[s($)]),_:1},8,["onClick"])])]),i("div",ge,[s(a,{title:"\u4E0A\u79FB\u4E00\u5C42",class:v(["toolbar-icon standard",o.enableBtnClass]),style:m(o.enableBtnStyle),onClick:o.moveUp},{default:d(()=>[s(D)]),_:1},8,["class","style","onClick"]),s(a,{title:"\u4E0B\u79FB\u4E00\u5C42",class:v(["toolbar-icon standard",o.enableBtnClass]),style:m(o.enableBtnStyle),onClick:o.moveDown},{default:d(()=>[s(T)]),_:1},8,["class","style","onClick"]),s(a,{title:"\u7F6E\u9876",class:v(["toolbar-icon standard",o.enableBtnClass]),style:m(o.enableBtnStyle),onClick:o.moveTop},{default:d(()=>[s(h)]),_:1},8,["class","style","onClick"]),s(a,{title:"\u7F6E\u5E95",class:v(["toolbar-icon standard",o.enableBtnClass]),style:m(o.enableBtnStyle),onClick:o.moveBottom},{default:d(()=>[s(E)]),_:1},8,["class","style","onClick"])]),i("div",Ie,[(l(!0),p(L,null,O(o.descComs,e=>(l(),p(L,{key:e.id},[o.showText?(l(),p("div",{key:0,title:e.alias,class:v(["layer-manager-item",[{hided:e.hided,locked:e.locked,hovered:e.hovered,selected:e.selected}]]),onMousedown:n=>o.selectCom(e.id),onMouseenter:n=>e.hovered=!0,onMouseleave:n=>e.hovered=!1,onContextmenu:c[2]||(c[2]=(...n)=>o.showMenu&&o.showMenu(...n))},[s(V,{icon:e.icon},null,8,["icon"]),e.renameing?z((l(),p("input",{key:0,"onUpdate:modelValue":n=>e.alias=n,class:"layer-item-input",onBlur:n=>e.renameing=!1,onKeydown:P(n=>e.renameing=!1,["enter"])},null,40,Be)),[[U,e.alias,void 0,{trim:!0}],[_]]):(l(),p("span",$e,[i("span",De,A(e.alias),1)])),e.hided?(l(),f(a,{key:2,class:"show-toggle-btn",onClick:n=>e.hided=!1},{default:d(()=>[s(C)]),_:2},1032,["onClick"])):w("",!0),e.locked?(l(),f(a,{key:3,class:"show-toggle-btn",onClick:n=>e.locked=!1},{default:d(()=>[s(k)]),_:2},1032,["onClick"])):w("",!0)],42,Me)):(l(),p("div",{key:1,title:e.alias,class:v(["layer-manager-item thumbail-wrap",[{hided:e.hided,locked:e.locked,hovered:e.hovered,selected:e.selected}]]),onMousedown:n=>o.selectCom(e.id),onMouseenter:n=>e.hovered=!0,onMouseleave:n=>e.hovered=!1,onContextmenu:c[3]||(c[3]=(...n)=>o.showMenu&&o.showMenu(...n))},[i("div",{class:"layer-item-thumbail",alt:e.alias,style:m(`background-image: url(${e.img})`)},null,12,Ee),i("div",Ve,[e.renameing?z((l(),p("input",{key:0,"onUpdate:modelValue":n=>e.alias=n,class:"layer-item-input",onBlur:n=>e.renameing=!1,onKeydown:P(n=>e.renameing=!1,["enter"])},null,40,Se)),[[U,e.alias,void 0,{trim:!0}],[_]]):(l(),p("span",Fe,[i("span",je,A(e.alias),1)]))]),i("div",Le,[e.hided?(l(),f(a,{key:0,class:"show-toggle-btn",onClick:n=>e.hided=!1},{default:d(()=>[s(C)]),_:2},1032,["onClick"])):w("",!0),e.locked?(l(),f(a,{key:1,class:"show-toggle-btn",onClick:n=>e.locked=!1},{default:d(()=>[s(k)]),_:2},1032,["onClick"])):w("",!0)])],42,Te))],64))),128)),i("div",{class:"last-flex-item",onClick:c[4]||(c[4]=e=>o.selectCom(""))})]),i("div",ze,[s(a,{title:"\u5220\u9664",class:v(["toolbar-icon standard",o.enableBtnClass]),style:m(o.enableBtnStyle),onClick:o.toDeleteCom},{default:d(()=>[s(S)]),_:1},8,["class","style","onClick"]),s(a,{title:"\u9501\u5B9A",class:v(["toolbar-icon standard",o.enableLockBtnClass]),style:m(o.enableBtnStyle),onClick:o.lockCom},{default:d(()=>[s(k)]),_:1},8,["class","style","onClick"]),s(a,{title:"\u9690\u85CF",class:v(["toolbar-icon standard",o.enableHideBtnClass]),style:m(o.enableBtnStyle),onClick:o.hideCom},{default:d(()=>[s(C)]),_:1},8,["class","style","onClick"])])])],2)}var Je=H(Ce,[["render",Ue],["__scopeId","data-v-01769368"]]);export{Je as default};
