import{v as I,_ as r,w as h,x as T,y as V,z as y,a as D,B as p,C as M,E as R,F as k,H as x}from"./AppRoot.9161bc33.js";import{a4 as O,a8 as P,b9 as A,a9 as L,aj as S,a5 as s,aa as $,ad as v,aX as c,a$ as q,ae as C,a6 as B}from"./vendor.1c7e0fbb.js";import{a as F}from"./templates.c8d0560b.js";function U(o){switch(o){case"./other/date-picker/src/date-picker.ts":return r(()=>import("./AppRoot.9161bc33.js").then(function(e){return e.aa}),["assets/AppRoot.9161bc33.js","assets/AppRoot.6c3f2524.css","assets/vendor.1c7e0fbb.js"]);default:return new Promise(function(e,t){(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(t.bind(null,new Error("Unknown variable dynamic import: "+o)))})}}function j(o){switch(o){case"./media/bg-box/src/bg-box.ts":return r(()=>import("./AppRoot.9161bc33.js").then(function(e){return e.ac}),["assets/AppRoot.9161bc33.js","assets/AppRoot.6c3f2524.css","assets/vendor.1c7e0fbb.js"]);case"./media/border-box/src/border-box.ts":return r(()=>import("./AppRoot.9161bc33.js").then(function(e){return e.ab}),["assets/AppRoot.9161bc33.js","assets/AppRoot.6c3f2524.css","assets/vendor.1c7e0fbb.js"]);case"./media/decoration/src/decoration.ts":return r(()=>import("./AppRoot.9161bc33.js").then(function(e){return e.ad}),["assets/AppRoot.9161bc33.js","assets/AppRoot.6c3f2524.css","assets/vendor.1c7e0fbb.js"]);case"./media/main-img/src/main-img.ts":return r(()=>import("./main-img.50059d40.js"),["assets/main-img.50059d40.js","assets/AppRoot.9161bc33.js","assets/AppRoot.6c3f2524.css","assets/vendor.1c7e0fbb.js"]);default:return new Promise(function(e,t){(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(t.bind(null,new Error("Unknown variable dynamic import: "+o)))})}}function N(o){switch(o){case"./button/full-screen/src/full-screen.ts":return r(()=>import("./full-screen.0e949182.js"),["assets/full-screen.0e949182.js","assets/AppRoot.9161bc33.js","assets/AppRoot.6c3f2524.css","assets/vendor.1c7e0fbb.js"]);default:return new Promise(function(e,t){(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(t.bind(null,new Error("Unknown variable dynamic import: "+o)))})}}function X(o){switch(o){case"./text/main-title/src/main-title.ts":return r(()=>import("./main-title.ecdc8e85.js"),["assets/main-title.ecdc8e85.js","assets/AppRoot.9161bc33.js","assets/AppRoot.6c3f2524.css","assets/vendor.1c7e0fbb.js"]);case"./text/marquee/src/marquee.ts":return r(()=>import("./marquee.7210b3c0.js"),["assets/marquee.7210b3c0.js","assets/AppRoot.9161bc33.js","assets/AppRoot.6c3f2524.css","assets/vendor.1c7e0fbb.js"]);case"./text/number-title-flop/src/number-title-flop.ts":return r(()=>import("./number-title-flop.af36896d.js"),["assets/number-title-flop.af36896d.js","assets/AppRoot.9161bc33.js","assets/AppRoot.6c3f2524.css","assets/vendor.1c7e0fbb.js"]);case"./text/paragraph/src/paragraph.ts":return r(()=>import("./paragraph.ad720a4c.js"),["assets/paragraph.ad720a4c.js","assets/AppRoot.9161bc33.js","assets/AppRoot.6c3f2524.css","assets/vendor.1c7e0fbb.js"]);case"./text/timer/src/timer.ts":return r(()=>import("./timer.22d8e05c.js"),["assets/timer.22d8e05c.js","assets/AppRoot.9161bc33.js","assets/AppRoot.6c3f2524.css","assets/vendor.1c7e0fbb.js"]);default:return new Promise(function(e,t){(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(t.bind(null,new Error("Unknown variable dynamic import: "+o)))})}}function z(o){switch(o){case"./chart/word-cloud/src/word-cloud.ts":return r(()=>import("./word-cloud.8d115c2a.js"),["assets/word-cloud.8d115c2a.js","assets/AppRoot.9161bc33.js","assets/AppRoot.6c3f2524.css","assets/vendor.1c7e0fbb.js"]);default:return new Promise(function(e,t){(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(t.bind(null,new Error("Unknown variable dynamic import: "+o)))})}}function H(o){switch(o){case"./line/basic-line/src/basic-line.ts":return r(()=>import("./basic-line.00b7cd86.js"),["assets/basic-line.00b7cd86.js","assets/AppRoot.9161bc33.js","assets/AppRoot.6c3f2524.css","assets/vendor.1c7e0fbb.js","assets/echarts-animation.c54de7ad.js"]);default:return new Promise(function(e,t){(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(t.bind(null,new Error("Unknown variable dynamic import: "+o)))})}}function W(o){switch(o){case"./bar/basic-bar/src/basic-bar.ts":return r(()=>import("./basic-bar.98288ee7.js"),["assets/basic-bar.98288ee7.js","assets/AppRoot.9161bc33.js","assets/AppRoot.6c3f2524.css","assets/vendor.1c7e0fbb.js","assets/echarts-animation.c54de7ad.js"]);default:return new Promise(function(e,t){(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(t.bind(null,new Error("Unknown variable dynamic import: "+o)))})}}async function Y(o){const e=I(o.substring(1));switch(o.substring(1)){case"BasicBar":{const t=await W(`./bar/${e}/src/${e}.ts`);return new t.default}case"BasicLine":{const t=await H(`./line/${e}/src/${e}.ts`);return new t.default}case"WordCloud":{const t=await z(`./chart/${e}/src/${e}.ts`);return new t.default}case"MainTitle":case"Marquee":case"NumberTitleFlop":case"Paragraph":case"Timer":{const t=await X(`./text/${e}/src/${e}.ts`);return new t.default}case"FullScreen":{const t=await N(`./button/${e}/src/${e}.ts`);return new t.default}case"BgBox":case"BorderBox":case"Decoration":case"MainImg":{const t=await j(`./media/${e}/src/${e}.ts`);return new t.default}case"DatePicker":{const t=await U(`./other/${e}/src/${e}.ts`);return new t.default}default:throw Error(`Unknown component type: ${o}.`)}}const G=async()=>{const o=h(),e=T(),t=V(),b=["VMainTitle","VNumberTitleFlop","VDatePicker","VBgBox","VBorderBox","VDecoration","VBasicBar","VMarquee","VParagraph","VTimer","VFullScreen","VMainImg","VWordCloud"].map(n=>Y(n)),u=await Promise.all(b),d=u.map(n=>(n.attr.x=y(e.pageConfig.width-n.attr.w),n.attr.y=y(e.pageConfig.height-n.attr.h),o.addCom(n)));await Promise.all(d);const l=[],m=[];u.forEach(n=>{n.apis.source&&(m.push(n.id),l.push(n.loadData()))}),l.length>0&&(await Promise.all(l),setTimeout(()=>{m.forEach(n=>{var a;(a=t.events[n])==null||a.requestData()})},200))};const J=O({name:"ScreenEditor",components:{HeaderToolbar:P(()=>r(()=>import("./index.e6e60044.js"),["assets/index.e6e60044.js","assets/index.0b9e6881.css","assets/vendor.1c7e0fbb.js","assets/AppRoot.9161bc33.js","assets/AppRoot.6c3f2524.css","assets/screen.00a0fa57.js","assets/layer.3a0f2ed6.js","assets/publish-screen.9107d885.js","assets/publish-screen.b3fd3021.css","assets/release.fe894ced.js","assets/help.8fda13be.js"])),FooterToolbar:P(()=>r(()=>import("./index.bfc7121e.js"),["assets/index.bfc7121e.js","assets/index.56f2beb3.css","assets/vendor.1c7e0fbb.js","assets/AppRoot.9161bc33.js","assets/AppRoot.6c3f2524.css","assets/arrow-down.87090095.js"])),EditorContextMenu:P(()=>r(()=>import("./index.79874c7a.js"),["assets/index.79874c7a.js","assets/index.e191eb41.css","assets/AppRoot.9161bc33.js","assets/AppRoot.6c3f2524.css","assets/vendor.1c7e0fbb.js","assets/dom.6d6c7f4f.js","assets/warning.ce42dfb2.js","assets/edit.7daf2506.js","assets/delete.97a5a659.js","assets/copy.e2152bd3.js","assets/lock.aa598054.js","assets/show.4853371a.js","assets/hide.de3e7b30.js","assets/index.4d44cbc9.js"])),CanvasMain:p(()=>r(()=>import("./index.7ba4abe5.js"),["assets/index.7ba4abe5.js","assets/index.c13ba73e.css","assets/vendor.1c7e0fbb.js","assets/AppRoot.9161bc33.js","assets/AppRoot.6c3f2524.css","assets/dom.6d6c7f4f.js","assets/index.4d44cbc9.js","assets/templates.c8d0560b.js"])),LayerPanel:p(()=>r(()=>import("./index.cfecf5eb.js"),["assets/index.cfecf5eb.js","assets/index.33c317db.css","assets/vendor.1c7e0fbb.js","assets/AppRoot.9161bc33.js","assets/AppRoot.6c3f2524.css","assets/warning.ce42dfb2.js","assets/delete.97a5a659.js","assets/back.ed0e1f65.js","assets/lock.aa598054.js","assets/hide.de3e7b30.js","assets/view-grid.566bf75d.js","assets/index.4d44cbc9.js","assets/dom.6d6c7f4f.js"])),ComponentsPanel:p(()=>r(()=>import("./index.deac3e73.js"),["assets/index.deac3e73.js","assets/index.8e032805.css","assets/AppRoot.9161bc33.js","assets/AppRoot.6c3f2524.css","assets/vendor.1c7e0fbb.js","assets/search.2fe14001.js","assets/back.ed0e1f65.js","assets/templates.c8d0560b.js"])),ConfigPanel:p(()=>r(()=>import("./index.e7160a62.js"),["assets/index.e7160a62.js","assets/index.d218e0c3.css","assets/AppRoot.9161bc33.js","assets/AppRoot.6c3f2524.css","assets/vendor.1c7e0fbb.js","assets/interact.55a2f343.js","assets/config.3c16c364.js"])),ToolboxPanel:p(()=>r(()=>import("./index.e8510f77.js"),["assets/index.e8510f77.js","assets/index.b91eab5f.css","assets/vendor.1c7e0fbb.js","assets/AppRoot.9161bc33.js","assets/AppRoot.6c3f2524.css"])),FilterManagerDrawer:p(()=>r(()=>import("./filter-manager-drawer.eb356493.js"),["assets/filter-manager-drawer.eb356493.js","assets/filter-manager-drawer.24f26014.css","assets/AppRoot.9161bc33.js","assets/AppRoot.6c3f2524.css","assets/vendor.1c7e0fbb.js","assets/warning.ce42dfb2.js","assets/document.9d531123.js","assets/filter-collapse-item.f6ea839b.js","assets/arrow-left.01caf5a2.js","assets/edit.7daf2506.js","assets/delete.97a5a659.js","assets/release.fe894ced.js","assets/config.3c16c364.js"]))},props:{projectId:{type:[String,Number],required:!0}},setup(o){const e=A(),t=M(),f=R(),b=k(),u=T(),d=h(),l=x(),m=L(!0);return b.enableDebug(),u.setEditMode(),S(async()=>{var n;try{const a=parseInt(e.query.tpl);if(a>0){const{data:_}=await F(a);if(_){const{config:i}=_;u.setEditorOption({screen:{id:+o.projectId,name:_.name},config:{width:i.width,height:i.height,bgimage:i.bgimage,bgcolor:i.bgcolor,styleFilterParams:i.styleFilterParams}}),d.setComs(i.coms);const{componentsView:w,publishersView:E,subscribersView:g}=i.variables;l.$patch({componentsView:w,publishersView:E,subscribersView:g}),f.$patch({dataFilters:(n=i.dataFilters)!=null?n:[]})}a===1&&G()}else{const _=+o.projectId;u.loadScreen(_),f.loadFilters(_),await d.loadComs(_)}}catch(a){console.log(a)}finally{m.value=!1,document.title=`${u.screen.name} | \u7F16\u8F91\u5668`,u.autoCanvasScale(()=>({offsetX:t.getPanelOffsetX,offsetY:t.getPanelOffsetY}))}}),{loading:m}}}),K={class:"g-layout is-vertical edit-container"},Q={class:"g-header"},Z={id:"edit-main-wp",class:"g-layout edit-main-wp"},ee={class:"g-layout edit-main"};function te(o,e,t,f,b,u){const d=s("header-toolbar"),l=s("layer-panel"),m=s("components-panel"),n=s("filter-manager-drawer"),a=s("toolbox-panel"),_=s("canvas-main"),i=s("g-loading"),w=s("footer-toolbar"),E=s("config-panel"),g=s("editor-context-menu");return B(),$(C,null,[v("div",K,[v("div",Q,[c(d)]),v("div",Z,[c(l),c(m),c(n),v("div",ee,[c(a),c(i,{spinning:o.loading},{default:q(()=>[c(_)]),_:1},8,["spinning"]),c(w)]),c(E)])]),c(g)],64)}var oe=D(J,[["render",te],["__scopeId","data-v-56e57328"]]),ie=Object.freeze(Object.defineProperty({__proto__:null,default:oe},Symbol.toStringTag,{value:"Module"}));export{Y as c,ie as i};
