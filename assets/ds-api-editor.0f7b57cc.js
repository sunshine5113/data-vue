import{d as a,i as e,aI as o,bg as l,f as i,o as t,c as s,a as n,w as p,F as d,g as u,b as c,A as r}from"./index.3033f95e.js";var f=a({name:"DsApiEditor",setup(){const a=e("com"),i=e("apiDataConfig"),t=l,s=Object.keys(o.variables.publishersView);return{apiDataConfig:i,apiMethods:t,variables:s,updateData:e=>{i.value.config.api=e.value,o.setSubscribersView({id:a.value.id,data:e.value})},updateApiHeaders:a=>{i.value.config.apiHeaders=a.value},updateApiBody:a=>{i.value.config.apiBody=a.value}}}});const g={class:"ds-wrapper ds-api"},v=n("p",null,"请求方式",-1),m={class:"datav-new-select-wp"},b=n("p",{class:"url-info"},[n("label",{class:"prefix-label textarea-label"},"URL："),n("a",{target:"_blank",rel:"noopener noreferrer",href:"https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS",class:"api-help"},"重要：跨域问题解决方案")],-1),h=n("p",{class:"url-info-text"}," 将回调参数配置到url中, 例: http://api.test?value=:value ",-1),D={class:"post-request-data"},C=n("p",{class:"url-info-text"},"Headers (Optional)",-1),k={key:0,class:"post-request-data"},x=n("p",{class:"url-info-text"},"POST 请求参数",-1),V=r(" 服务器代理请求 (因跨域无法访问时可勾选) "),B=r(" 需要 cookie (不选择代理并且需要获取cookie时使用) ");f.render=function(a,e,o,l,r,f){const w=i("el-option"),y=i("el-select"),A=i("g-monaco-editor"),H=i("el-checkbox");return t(),s("div",g,[v,n("div",m,[n(y,{modelValue:a.apiDataConfig.config.apiMethod,"onUpdate:modelValue":e[1]||(e[1]=e=>a.apiDataConfig.config.apiMethod=e),size:"mini",class:"datav-new-select","popper-class":"datav-new-select-option"},{default:p((()=>[(t(!0),s(d,null,u(a.apiMethods,(a=>(t(),s(w,{key:a,label:a,value:a},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])]),b,h,n(A,{language:"plaintext","line-numbers":"off",height:120,code:a.apiDataConfig.config.api,completions:a.variables,onBlur:a.updateData},null,8,["code","completions","onBlur"]),n("div",D,[C,n(A,{language:"json",height:120,"auto-format":!0,code:a.apiDataConfig.config.apiHeaders,onBlur:a.updateApiHeaders},null,8,["code","onBlur"])]),a.apiDataConfig.config.apiMethod===a.apiMethods.POST?(t(),s("div",k,[x,n(A,{language:"json",height:120,"auto-format":!0,code:a.apiDataConfig.config.apiBody,onBlur:a.updateApiBody},null,8,["code","onBlur"])])):c("",!0),n(H,{modelValue:a.apiDataConfig.config.local,"onUpdate:modelValue":e[2]||(e[2]=e=>a.apiDataConfig.config.local=e),class:"ds-checkbox"},{default:p((()=>[V])),_:1},8,["modelValue"]),n(H,{modelValue:a.apiDataConfig.config.cookie,"onUpdate:modelValue":e[3]||(e[3]=e=>a.apiDataConfig.config.cookie=e),class:"ds-checkbox"},{default:p((()=>[B])),_:1},8,["modelValue"])])};export default f;
