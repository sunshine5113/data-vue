(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6ebcaea3"],{"0350":function(e,t,a){"use strict";a("3cb8")},"07ac":function(e,t,a){var c=a("23e7"),o=a("6f53").values;c({target:"Object",stat:!0},{values:function(e){return o(e)}})},"211e":function(e,t,a){},"2db7":function(e,t,a){},"3cb8":function(e,t,a){},5022:function(e,t,a){"use strict";a("2db7")},"91cb":function(e,t,a){"use strict";a("c8da")},"9b42":function(e,t,a){"use strict";a("211e")},c8da:function(e,t,a){},e261:function(e,t,a){"use strict";a.r(t);a("a4d3"),a("e01a"),a("b64b"),a("d81d");var c=a("7a23"),o=Object(c["withScopeId"])("data-v-530bdeda");Object(c["pushScopeId"])("data-v-530bdeda");var n={class:"api-editor-title"},l={key:0,class:"el-icon-arrow-right api-fold-icon"},s={class:"api-status success"},i={class:"attr-source-wp"},r={class:"data-attr-table-container"},d={class:"data-attr-table"},u=Object(c["createVNode"])("thead",{class:"table-head"},[Object(c["createVNode"])("tr",{class:"table-head-row"},[Object(c["createVNode"])("th",{class:"th-item column-item attr-name"}," 字段 "),Object(c["createVNode"])("th",{class:"th-item column-item attr-value"}," 映射 "),Object(c["createVNode"])("th",{class:"th-item column-item attr-status"}," 状态 ")])],-1),b={class:"table-body"},p={class:"column-item attr-name"},j={class:"ellipsis2"},O={class:"column-item attr-value"},f={class:"column-item attr-status"},m={key:1,class:"table-body-row"},v=Object(c["createVNode"])("td",{class:"column-item attr-name"},[Object(c["createVNode"])("span",null,"任意")],-1),N=Object(c["createVNode"])("td",{class:"column-item attr-value"},null,-1),V={class:"column-item attr-status"},g={class:"data-source"},k=Object(c["createVNode"])("div",{class:"data-result-title"}," 数据响应结果 ",-1),C={class:"auto-update-config"},y=Object(c["createTextVNode"])(" 自动更新选项 "),h=Object(c["createTextVNode"])(" 秒一次 "),S={class:"data-flow-wp"},B={class:"ds-line"},w={class:"ds-title"},D=Object(c["createVNode"])("span",{class:"ds-title-text"},"数据源",-1),x={class:"ds-type-text"},T=Object(c["createTextVNode"])(" 配置数据源 "),_={class:"ds-line mt5"},I=Object(c["createVNode"])("span",null,"数据响应结果 ( 只读 ) ",-1),U=Object(c["createVNode"])("i",{class:"el-icon-refresh refresh-btn"},null,-1),A={class:"ds-dots"},F=Object(c["createVNode"])("span",{class:"ds-dot"},null,-1),M=Object(c["createVNode"])("span",{class:"ds-dot"},null,-1),z={class:"data-response"};Object(c["popScopeId"])();var E=o((function(e,t,a,E,G,L){var J=Object(c["resolveComponent"])("display-api-status"),P=Object(c["resolveComponent"])("el-tooltip"),R=Object(c["resolveComponent"])("g-input"),q=Object(c["resolveComponent"])("el-checkbox"),H=Object(c["resolveComponent"])("el-button"),K=Object(c["resolveComponent"])("g-monaco-editor"),Q=Object(c["resolveComponent"])("source-drawer");return Object(c["openBlock"])(),Object(c["createBlock"])("div",{class:["api-editor",{"--disable-fold":!e.collapse,"--fold":e.collapse&&e.visible}]},[Object(c["createVNode"])("div",n,[Object(c["createVNode"])("div",{class:"api-desc ellipsis2",onClick:t[1]||(t[1]=function(){return e.toggle&&e.toggle.apply(e,arguments)})},[e.collapse?(Object(c["openBlock"])(),Object(c["createBlock"])("i",l)):Object(c["createCommentVNode"])("",!0),Object(c["createTextVNode"])(" "+Object(c["toDisplayString"])(e.apiConfig.description||"数据接口"),1)]),Object(c["createVNode"])("div",s,[Object(c["createVNode"])(J,{status:e.totalStatus,"success-text":"配置完成"},null,8,["status"])])]),Object(c["withDirectives"])(Object(c["createVNode"])("div",i,[Object(c["createVNode"])("div",r,[Object(c["createVNode"])("table",d,[u,Object(c["createVNode"])("tbody",b,[Object.keys(e.apiConfig.fields).length>0?(Object(c["openBlock"])(!0),Object(c["createBlock"])(c["Fragment"],{key:0},Object(c["renderList"])(e.apiConfig.fields,(function(t,a){return Object(c["openBlock"])(),Object(c["createBlock"])("tr",{key:a,class:"table-body-row"},[Object(c["createVNode"])("td",p,[Object(c["createVNode"])(P,{content:t.description,placement:"left",effect:"blue"},{default:o((function(){return[Object(c["createVNode"])("span",j,Object(c["toDisplayString"])(a),1)]})),_:2},1032,["content"])]),Object(c["createVNode"])("td",O,[Object(c["createVNode"])(R,{"model-value":t.map,placeholder:"可自定义",class:"attr-input",onChange:function(e){return t.map=e}},null,8,["model-value","onChange"])]),Object(c["createVNode"])("td",f,[Object(c["createVNode"])(J,{status:e.fieldsStatus[a],optional:t.optional},null,8,["status","optional"])])])})),128)):(Object(c["openBlock"])(),Object(c["createBlock"])("tr",m,[v,N,Object(c["createVNode"])("td",V,[Object(c["createVNode"])(J,{status:"completed"})])]))])])]),Object(c["createVNode"])("div",g,[k,Object(c["createVNode"])("div",C,[Object(c["createVNode"])(q,{modelValue:e.apiConfig.useAutoUpdate,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.apiConfig.useAutoUpdate=t}),class:"auto-update-checkbox"},{default:o((function(){return[y]})),_:1},8,["modelValue"]),Object(c["createVNode"])(R,{"model-value":e.apiConfig.autoUpdate,type:"number",disabled:!e.apiConfig.useAutoUpdate,class:"update-interval-input",onChange:t[3]||(t[3]=function(t){return e.apiConfig.autoUpdate=t})},null,8,["model-value","disabled"]),h]),Object(c["createVNode"])("div",S,[Object(c["createVNode"])("div",B,[Object(c["createVNode"])("div",w,[D,Object(c["createVNode"])("span",x,Object(c["toDisplayString"])(e.datasources[e.apiDataConfig.type]),1)]),Object(c["createVNode"])(H,{size:"mini",class:"ds-action-btn",onClick:e.openSourceDrawer},{default:o((function(){return[T]})),_:1},8,["onClick"])]),Object(c["createVNode"])("div",_,[I,Object(c["createVNode"])(P,{content:"刷新数据",placement:"left",effect:"blue"},{default:o((function(){return[U]})),_:1})]),Object(c["createVNode"])("div",A,[Object(c["createVNode"])("span",{class:["ds-dot",["completed"===e.totalStatus?"active":"error"]]},null,2),F,M])]),Object(c["createVNode"])("div",z,[Object(c["createVNode"])(K,{language:"json","read-only":!0,code:e.datav_data,height:250,"full-screen-title":"数据响应结果"},null,8,["code"])])])],512),[[c["vShow"],e.visible]]),Object(c["createVNode"])(Q,{ref:"sourceDrawerRef"},null,512)],2)})),G=(a("07ac"),a("caad"),a("2532"),a("c18c")),L=a("bf64"),J=a("fd90"),P=Object(c["withScopeId"])("data-v-1a65afef");Object(c["pushScopeId"])("data-v-1a65afef");var R=Object(c["createVNode"])("i",{class:"status-icon validating"},null,-1),q=Object(c["createVNode"])("i",{class:"status-icon validating"},null,-1),H=Object(c["createVNode"])("i",{class:"status-icon validating"},null,-1),K={key:2,class:"status-icon --success"},Q={class:"status-text"};Object(c["popScopeId"])();var W=P((function(e,t,a,o,n,l){return Object(c["openBlock"])(),Object(c["createBlock"])("div",null,[e.status===e.apiStatus.loading?(Object(c["openBlock"])(),Object(c["createBlock"])(c["Fragment"],{key:0},[R,q,H],64)):e.status===e.apiStatus.success||e.status===e.apiStatus.completed?(Object(c["openBlock"])(),Object(c["createBlock"])("i",{key:1,class:["status-icon","--".concat(e.status)]},null,2)):e.optional?(Object(c["openBlock"])(),Object(c["createBlock"])("i",K)):(Object(c["openBlock"])(),Object(c["createBlock"])("i",{key:3,class:["status-icon","--".concat(e.status)]},null,2)),Object(c["createVNode"])("span",Q,Object(c["toDisplayString"])(e.statusText),1)])})),X=Object(c["defineComponent"])({name:"DisplayApiStatus",props:{status:{type:String,default:L["b"].incomplete},loadingText:{type:String,default:"匹配中"},successText:{type:String,default:"匹配成功"},failedText:{type:String,default:"未找到字段"},completedText:{type:String,default:"配置完成"},incompleteText:{type:String,default:"配置未完成"},optional:{type:Boolean,default:!1}},setup:function(e){var t=Object(c["computed"])((function(){return e.status===L["b"].loading?e.loadingText:e.status===L["b"].success?e.successText:e.status===L["b"].completed?e.completedText:e.optional?"可选":e.status===L["b"].failed?e.failedText:e.status===L["b"].incomplete?e.incompleteText:e.status}));return{apiStatus:L["b"],statusText:t}}});a("5022");X.render=W,X.__scopeId="data-v-1a65afef";var Y=X,Z=Object(c["createVNode"])("p",{class:"source-drawer-title"},"设置数据源",-1),$=Object(c["createVNode"])("div",{class:"step-title"},"数据源",-1),ee={class:"datasource-selector"},te=Object(c["createVNode"])("label",{class:"datasource-selector-title"},"数据源类型",-1),ae={class:"datasource-select"},ce={class:"datav-new-select-wp"},oe={class:"step-title"},ne=Object(c["createVNode"])("span",{class:"use-filter-text"},"数据过滤器",-1),le=Object(c["createVNode"])("span",{class:"tutorial-popup"},"教程",-1),se={class:"step-title"},ie=Object(c["createVNode"])("span",null,"数据响应结果",-1),re={class:"data-response"};function de(e,t,a,o,n,l){var s=Object(c["resolveComponent"])("el-option"),i=Object(c["resolveComponent"])("el-select"),r=Object(c["resolveComponent"])("ds-static-editor"),d=Object(c["resolveComponent"])("ds-api-editor"),u=Object(c["resolveComponent"])("el-checkbox"),b=Object(c["resolveComponent"])("field-grid"),p=Object(c["resolveComponent"])("g-monaco-editor"),j=Object(c["resolveComponent"])("el-drawer");return Object(c["openBlock"])(),Object(c["createBlock"])(j,{modelValue:e.visible,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.visible=t}),"custom-class":"source-drawer",size:"500px"},{title:Object(c["withCtx"])((function(){return[Z]})),default:Object(c["withCtx"])((function(){return[e.visible?(Object(c["openBlock"])(),Object(c["createBlock"])(c["Fragment"],{key:0},[$,Object(c["createVNode"])("div",ee,[te,Object(c["createVNode"])("div",ae,[Object(c["createVNode"])("div",ce,[Object(c["createVNode"])(i,{modelValue:e.apiDataConfig.type,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.apiDataConfig.type=t}),size:"mini",class:"datav-new-select","popper-class":"datav-new-select-option",onChange:e.changeSource},{default:Object(c["withCtx"])((function(){return[(Object(c["openBlock"])(!0),Object(c["createBlock"])(c["Fragment"],null,Object(c["renderList"])(e.datasources,(function(e,t){return Object(c["openBlock"])(),Object(c["createBlock"])(s,{key:t,label:e,value:t},null,8,["label","value"])})),128))]})),_:1},8,["modelValue","onChange"])])])]),e.apiDataConfig.type===e.apiType.static?(Object(c["openBlock"])(),Object(c["createBlock"])(r,{key:0})):e.apiDataConfig.type===e.apiType.api?(Object(c["openBlock"])(),Object(c["createBlock"])(d,{key:1})):Object(c["createCommentVNode"])("",!0),Object(c["createVNode"])("div",oe,[Object(c["createVNode"])(u,{modelValue:e.apiConfig.useAutoUpdate,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.apiConfig.useAutoUpdate=t}),class:"use-filter-btn"},null,8,["modelValue"]),ne,le]),Object(c["createVNode"])(b,{fields:e.apiConfig.fields},null,8,["fields"]),Object(c["createVNode"])("div",se,[ie,Object(c["createVNode"])("i",{class:"el-icon-refresh refresh-btn",onClick:t[3]||(t[3]=function(){return e.refreshData&&e.refreshData.apply(e,arguments)})})]),Object(c["createVNode"])("div",re,[Object(c["createVNode"])(p,{language:"json","read-only":!0,code:e.resData},null,8,["code"])])],64)):Object(c["createCommentVNode"])("",!0)]})),_:1},8,["modelValue"])}var ue=a("5530"),be=(a("d3b7"),a("3ca3"),a("ddb0"),a("b0e5")),pe=a("7a33"),je=Object(c["withScopeId"])("data-v-1d6f7865");Object(c["pushScopeId"])("data-v-1d6f7865");var Oe={key:0,class:"field-wp"},fe=Object(c["createVNode"])("div",{class:"field-info"},"数据相应结果应为列表，列表元素包含如下字段",-1),me={class:"field-grid"},ve=Object(c["createVNode"])("div",{class:"field-item field-title"},"字段",-1),Ne=Object(c["createVNode"])("div",{class:"field-item field-title"},"映射",-1),Ve=Object(c["createVNode"])("div",{class:"field-item field-title"},"说明",-1),ge={class:"field-item"},ke={class:"field-item"},Ce={class:"field-item"};Object(c["popScopeId"])();var ye=je((function(e,t,a,o,n,l){return e.fields?(Object(c["openBlock"])(),Object(c["createBlock"])("div",Oe,[fe,Object(c["createVNode"])("div",me,[ve,Ne,Ve,(Object(c["openBlock"])(!0),Object(c["createBlock"])(c["Fragment"],null,Object(c["renderList"])(e.fields,(function(e,t){return Object(c["openBlock"])(),Object(c["createBlock"])(c["Fragment"],{key:t},[Object(c["createVNode"])("div",ge,Object(c["toDisplayString"])(t),1),Object(c["createVNode"])("div",ke,Object(c["toDisplayString"])(e.map||"-"),1),Object(c["createVNode"])("div",Ce,Object(c["toDisplayString"])(e.description||"-"),1)],64)})),128))])])):Object(c["createCommentVNode"])("",!0)})),he=Object(c["defineComponent"])({name:"FieldGrid",props:{fields:{type:Object}}});a("91cb");he.render=ye,he.__scopeId="data-v-1d6f7865";var Se=he,Be=Object(c["defineComponent"])({name:"SourceDrawer",components:{FieldGrid:Se,DsStaticEditor:Object(be["a"])((function(){return a.e("chunk-2d210677").then(a.bind(null,"b86a"))})),DsApiEditor:Object(be["a"])((function(){return a.e("chunk-089f1f5d").then(a.bind(null,"0b08"))}))},setup:function(){var e=Object(c["ref"])(!1),t=L["c"],a=Object(G["b"])(),o=function(){e.value=!0},n=Object(c["inject"])("com"),l=Object(c["inject"])("apiConfig"),s=Object(c["inject"])("apiDataConfig"),i=Object(c["inject"])("apiName"),r=function(e){switch(e){case L["c"].api:void 0===s.value.config.api&&(s.value.config=Object(ue["a"])(Object(ue["a"])({},s.value.config),{},{api:"",apiMethod:L["a"].GET,apiHeaders:"{}",apiBody:"{}"}));break;default:break}},d=Object(c["computed"])((function(){var e=J["a"].dataMap[n.value.id];return e?e[i]:""})),u=function(){Object(pe["b"])(n.value.id,i,l.value,s.value)};return{visible:e,apiType:t,datasources:a,com:n,apiConfig:l,apiDataConfig:s,resData:d,open:o,changeSource:r,refreshData:u}}});a("9b42");Be.render=de;var we=Be,De=Object(c["defineComponent"])({name:"SourcePanel",components:{DisplayApiStatus:Y,SourceDrawer:we},props:{apiName:{type:String,required:!0},activeName:String,collapse:Boolean},setup:function(e){var t=Object(c["computed"])((function(){return e.apiName===e.activeName})),a=Object(c["ref"])(null),o=Object(G["b"])(),n=Object(c["inject"])("com"),l=Object(c["computed"])((function(){return n.value.apis[e.apiName]})),s=Object(c["computed"])((function(){return n.value.apiData[e.apiName]}));Object(c["provide"])("apiConfig",l),Object(c["provide"])("apiDataConfig",s),Object(c["provide"])("apiName",e.apiName);var i=Object(c["computed"])((function(){var t=J["a"].dataMap[n.value.id];return t?t[e.apiName]:""})),r=Object(c["computed"])((function(){var t=J["a"].fieldStatusMap[n.value.id];return t?t[e.apiName]:{}})),d=Object(c["computed"])((function(){var e=Object.values(r.value);return e.includes(G["a"].loading)?L["b"].loading:e.includes(G["a"].failed)?L["b"].incomplete:L["b"].completed})),u=Object(c["inject"])("changePanel"),b=function(){e.collapse&&u(e.apiName)},p=function(){var e;null===(e=a.value)||void 0===e||e.open()};return{visible:t,sourceDrawerRef:a,datasources:o,com:n,apiConfig:l,apiDataConfig:s,fieldsStatus:r,totalStatus:d,datav_data:i,toggle:b,openSourceDrawer:p}}});a("0350");De.render=E,De.__scopeId="data-v-530bdeda";t["default"]=De}}]);
//# sourceMappingURL=chunk-6ebcaea3.e462dea3.js.map