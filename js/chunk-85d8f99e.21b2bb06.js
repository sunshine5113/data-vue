(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-85d8f99e"],{"07ac":function(e,t,a){var c=a("23e7"),o=a("6f53").values;c({target:"Object",stat:!0},{values:function(e){return o(e)}})},"2db7":function(e,t,a){},"34b9":function(e,t,a){"use strict";a("ef64")},"48c6":function(e,t,a){"use strict";a("6fbf")},5022:function(e,t,a){"use strict";a("2db7")},"6fbf":function(e,t,a){},"91cb":function(e,t,a){"use strict";a("c8da")},c8da:function(e,t,a){},e261:function(e,t,a){"use strict";a.r(t);a("a4d3"),a("e01a"),a("b64b"),a("d81d");var c=a("7a23"),o=Object(c["withScopeId"])("data-v-4487ef98");Object(c["pushScopeId"])("data-v-4487ef98");var n={class:"api-editor-title"},l={key:0,class:"el-icon-arrow-right api-fold-icon"},i={class:"api-status success"},s={class:"attr-source-wp"},r={class:"data-attr-table-container"},d={class:"data-attr-table"},u=Object(c["createVNode"])("thead",{class:"table-head"},[Object(c["createVNode"])("tr",{class:"table-head-row"},[Object(c["createVNode"])("th",{class:"th-item column-item attr-name"}," 字段 "),Object(c["createVNode"])("th",{class:"th-item column-item attr-value"}," 映射 "),Object(c["createVNode"])("th",{class:"th-item column-item attr-status"}," 状态 ")])],-1),p={class:"table-body"},b={class:"column-item attr-name"},j={class:"ellipsis2"},O={class:"column-item attr-value"},f={class:"column-item attr-status"},v={key:1,class:"table-body-row"},m=Object(c["createVNode"])("td",{class:"column-item attr-name"},[Object(c["createVNode"])("span",null,"任意")],-1),N=Object(c["createVNode"])("td",{class:"column-item attr-value"},null,-1),V={class:"column-item attr-status"},g={class:"data-source"},k=Object(c["createVNode"])("div",{class:"data-result-title"}," 数据响应结果 ",-1),C={class:"auto-update-config"},h=Object(c["createTextVNode"])(" 自动更新选项 "),y=Object(c["createTextVNode"])(" 秒一次 "),S={class:"data-flow-wp"},w={class:"ds-line"},B={class:"ds-title"},D=Object(c["createVNode"])("span",{class:"ds-title-text"},"数据源",-1),x={class:"ds-type-text"},T=Object(c["createTextVNode"])(" 配置数据源 "),_={class:"ds-line mt5"},I=Object(c["createVNode"])("span",null,"数据响应结果 ( 只读 ) ",-1),U={class:"ds-dots"},F=Object(c["createVNode"])("span",{class:"ds-dot"},null,-1),A=Object(c["createVNode"])("span",{class:"ds-dot"},null,-1),M={class:"data-response"};Object(c["popScopeId"])();var P=o((function(e,t,a,P,z,E){var G=Object(c["resolveComponent"])("display-api-status"),L=Object(c["resolveComponent"])("el-tooltip"),J=Object(c["resolveComponent"])("g-input"),R=Object(c["resolveComponent"])("el-checkbox"),q=Object(c["resolveComponent"])("el-button"),H=Object(c["resolveComponent"])("g-monaco-editor"),K=Object(c["resolveComponent"])("source-drawer");return Object(c["openBlock"])(),Object(c["createBlock"])("div",{class:["api-editor",{"--disable-fold":!e.collapse,"--fold":e.collapse&&e.visible}]},[Object(c["createVNode"])("div",n,[Object(c["createVNode"])("div",{class:"api-desc ellipsis2",onClick:t[1]||(t[1]=function(){return e.toggle&&e.toggle.apply(e,arguments)})},[e.collapse?(Object(c["openBlock"])(),Object(c["createBlock"])("i",l)):Object(c["createCommentVNode"])("",!0),Object(c["createTextVNode"])(" "+Object(c["toDisplayString"])(e.apiConfig.description||"数据接口"),1)]),Object(c["createVNode"])("div",i,[Object(c["createVNode"])(G,{status:e.totalStatus,"success-text":"配置完成"},null,8,["status"])])]),Object(c["withDirectives"])(Object(c["createVNode"])("div",s,[Object(c["createVNode"])("div",r,[Object(c["createVNode"])("table",d,[u,Object(c["createVNode"])("tbody",p,[Object.keys(e.apiConfig.fields).length>0?(Object(c["openBlock"])(!0),Object(c["createBlock"])(c["Fragment"],{key:0},Object(c["renderList"])(e.apiConfig.fields,(function(t,a){return Object(c["openBlock"])(),Object(c["createBlock"])("tr",{key:a,class:"table-body-row"},[Object(c["createVNode"])("td",b,[Object(c["createVNode"])(L,{content:t.description,placement:"left",effect:"blue"},{default:o((function(){return[Object(c["createVNode"])("span",j,Object(c["toDisplayString"])(a),1)]})),_:2},1032,["content"])]),Object(c["createVNode"])("td",O,[Object(c["createVNode"])(J,{"model-value":t.map,placeholder:"可自定义",class:"attr-input",onChange:function(e){return t.map=e}},null,8,["model-value","onChange"])]),Object(c["createVNode"])("td",f,[Object(c["createVNode"])(G,{status:e.fieldsStatus[a],optional:t.optional},null,8,["status","optional"])])])})),128)):(Object(c["openBlock"])(),Object(c["createBlock"])("tr",v,[m,N,Object(c["createVNode"])("td",V,[Object(c["createVNode"])(G,{status:"completed"})])]))])])]),Object(c["createVNode"])("div",g,[k,Object(c["createVNode"])("div",C,[Object(c["createVNode"])(R,{modelValue:e.apiConfig.useAutoUpdate,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.apiConfig.useAutoUpdate=t}),class:"auto-update-checkbox"},{default:o((function(){return[h]})),_:1},8,["modelValue"]),Object(c["createVNode"])(J,{"model-value":e.apiConfig.autoUpdate,type:"number",disabled:!e.apiConfig.useAutoUpdate,class:"update-interval-input",onChange:t[3]||(t[3]=function(t){return e.apiConfig.autoUpdate=t})},null,8,["model-value","disabled"]),y]),Object(c["createVNode"])("div",S,[Object(c["createVNode"])("div",w,[Object(c["createVNode"])("div",B,[D,Object(c["createVNode"])("span",x,Object(c["toDisplayString"])(e.datasources[e.apiDataConfig.type]),1)]),Object(c["createVNode"])(q,{size:"mini",class:"ds-action-btn",onClick:e.openSourceDrawer},{default:o((function(){return[T]})),_:1},8,["onClick"])]),Object(c["createVNode"])("div",_,[I,Object(c["createVNode"])(L,{content:"刷新数据",placement:"left",effect:"blue"},{default:o((function(){return[Object(c["createVNode"])("i",{class:"el-icon-refresh refresh-btn",onClick:t[4]||(t[4]=function(){return e.refreshData&&e.refreshData.apply(e,arguments)})})]})),_:1})]),Object(c["createVNode"])("div",U,[Object(c["createVNode"])("span",{class:["ds-dot",["completed"===e.totalStatus?"active":"error"]]},null,2),F,A])]),Object(c["createVNode"])("div",M,[Object(c["createVNode"])(H,{language:"json","read-only":!0,code:e.datav_data,height:250,"full-screen-title":"数据响应结果"},null,8,["code"])])])],512),[[c["vShow"],e.visible]]),Object(c["createVNode"])(K,{ref:"sourceDrawerRef"},null,512)],2)})),z=(a("07ac"),a("caad"),a("2532"),a("c18c")),E=a("bf64"),G=a("fd90"),L=a("7a33"),J=Object(c["withScopeId"])("data-v-1a65afef");Object(c["pushScopeId"])("data-v-1a65afef");var R=Object(c["createVNode"])("i",{class:"status-icon validating"},null,-1),q=Object(c["createVNode"])("i",{class:"status-icon validating"},null,-1),H=Object(c["createVNode"])("i",{class:"status-icon validating"},null,-1),K={key:2,class:"status-icon --success"},Q={class:"status-text"};Object(c["popScopeId"])();var W=J((function(e,t,a,o,n,l){return Object(c["openBlock"])(),Object(c["createBlock"])("div",null,[e.status===e.apiStatus.loading?(Object(c["openBlock"])(),Object(c["createBlock"])(c["Fragment"],{key:0},[R,q,H],64)):e.status===e.apiStatus.success||e.status===e.apiStatus.completed?(Object(c["openBlock"])(),Object(c["createBlock"])("i",{key:1,class:["status-icon","--".concat(e.status)]},null,2)):e.optional?(Object(c["openBlock"])(),Object(c["createBlock"])("i",K)):(Object(c["openBlock"])(),Object(c["createBlock"])("i",{key:3,class:["status-icon","--".concat(e.status)]},null,2)),Object(c["createVNode"])("span",Q,Object(c["toDisplayString"])(e.statusText),1)])})),X=Object(c["defineComponent"])({name:"DisplayApiStatus",props:{status:{type:String,default:E["b"].incomplete},loadingText:{type:String,default:"匹配中"},successText:{type:String,default:"匹配成功"},failedText:{type:String,default:"未找到字段"},completedText:{type:String,default:"配置完成"},incompleteText:{type:String,default:"配置未完成"},optional:{type:Boolean,default:!1}},setup:function(e){var t=Object(c["computed"])((function(){return e.status===E["b"].loading?e.loadingText:e.status===E["b"].success?e.successText:e.status===E["b"].completed?e.completedText:e.optional?"可选":e.status===E["b"].failed?e.failedText:e.status===E["b"].incomplete?e.incompleteText:e.status}));return{apiStatus:E["b"],statusText:t}}});a("5022");X.render=W,X.__scopeId="data-v-1a65afef";var Y=X,Z=Object(c["createVNode"])("p",{class:"source-drawer-title"},"设置数据源",-1),$={class:"datasource-selector"},ee=Object(c["createVNode"])("label",{class:"datasource-selector-title"},"数据源类型",-1),te={class:"datasource-select"},ae={class:"datav-new-select-wp"},ce={class:"ds-preview-content"},oe=Object(c["createVNode"])("div",{class:"ds-response-btn"},[Object(c["createVNode"])("i",{class:"v-icon-search"}),Object(c["createTextVNode"])(" 预览数据源返回结果 ")],-1),ne=Object(c["createVNode"])("span",{class:"use-filter-text"},"数据过滤器",-1),le=Object(c["createVNode"])("span",{class:"tutorial-popup"},"教程",-1),ie=Object(c["createVNode"])("span",null,"数据响应结果",-1),se={class:"data-response"};function re(e,t,a,o,n,l){var i=Object(c["resolveComponent"])("el-option"),s=Object(c["resolveComponent"])("el-select"),r=Object(c["resolveComponent"])("ds-static-editor"),d=Object(c["resolveComponent"])("ds-api-editor"),u=Object(c["resolveComponent"])("g-monaco-editor"),p=Object(c["resolveComponent"])("el-popover"),b=Object(c["resolveComponent"])("el-checkbox"),j=Object(c["resolveComponent"])("field-grid"),O=Object(c["resolveComponent"])("el-drawer");return Object(c["openBlock"])(),Object(c["createBlock"])(O,{modelValue:e.visible,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.visible=t}),"custom-class":"source-drawer",size:"500px"},{title:Object(c["withCtx"])((function(){return[Z]})),default:Object(c["withCtx"])((function(){return[e.visible?(Object(c["openBlock"])(),Object(c["createBlock"])(c["Fragment"],{key:0},[Object(c["createVNode"])("div",{class:["step-title",{"--error":e.dataStatus.errSource}]}," 数据源 ",2),Object(c["createVNode"])("div",$,[ee,Object(c["createVNode"])("div",te,[Object(c["createVNode"])("div",ae,[Object(c["createVNode"])(s,{modelValue:e.apiDataConfig.type,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.apiDataConfig.type=t}),size:"mini",class:"datav-new-select","popper-class":"datav-new-select-option",onChange:e.changeSource},{default:Object(c["withCtx"])((function(){return[(Object(c["openBlock"])(!0),Object(c["createBlock"])(c["Fragment"],null,Object(c["renderList"])(e.datasources,(function(e,t){return Object(c["openBlock"])(),Object(c["createBlock"])(i,{key:t,label:e,value:t},null,8,["label","value"])})),128))]})),_:1},8,["modelValue","onChange"])])])]),e.apiDataConfig.type===e.apiType.static?(Object(c["openBlock"])(),Object(c["createBlock"])(r,{key:0})):e.apiDataConfig.type===e.apiType.api?(Object(c["openBlock"])(),Object(c["createBlock"])(d,{key:1})):Object(c["createCommentVNode"])("",!0),Object(c["createVNode"])(p,{visible:e.visiblePreview,"onUpdate:visible":t[2]||(t[2]=function(t){return e.visiblePreview=t}),placement:"left",width:400,"popper-class":"editor-popover"},{reference:Object(c["withCtx"])((function(){return[oe]})),default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])("div",ce,[Object(c["createVNode"])(u,{language:"json","read-only":!0,height:180,code:e.dataOrign},null,8,["code"])])]})),_:1},8,["visible"]),Object(c["createVNode"])("div",{class:["step-title",{"--error":e.dataStatus.errFilter}]},[Object(c["createVNode"])(b,{modelValue:e.apiConfig.useAutoUpdate,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.apiConfig.useAutoUpdate=t}),class:"use-filter-btn"},null,8,["modelValue"]),ne,le],2),Object(c["createVNode"])(j,{fields:e.apiConfig.fields},null,8,["fields"]),Object(c["createVNode"])("div",{class:["step-title",{"--error":e.dataStatus.errSource||e.dataStatus.errFilter}]},[ie,Object(c["createVNode"])("i",{class:"el-icon-refresh refresh-btn",onClick:t[4]||(t[4]=function(){return e.refreshData&&e.refreshData.apply(e,arguments)})})],2),Object(c["createVNode"])("div",se,[Object(c["createVNode"])(u,{language:"json","read-only":!0,code:e.resData},null,8,["code"])])],64)):Object(c["createCommentVNode"])("",!0)]})),_:1},8,["modelValue"])}var de=a("5530"),ue=(a("d3b7"),a("3ca3"),a("ddb0"),a("b0e5")),pe=Object(c["withScopeId"])("data-v-1d6f7865");Object(c["pushScopeId"])("data-v-1d6f7865");var be={key:0,class:"field-wp"},je=Object(c["createVNode"])("div",{class:"field-info"},"数据相应结果应为列表，列表元素包含如下字段",-1),Oe={class:"field-grid"},fe=Object(c["createVNode"])("div",{class:"field-item field-title"},"字段",-1),ve=Object(c["createVNode"])("div",{class:"field-item field-title"},"映射",-1),me=Object(c["createVNode"])("div",{class:"field-item field-title"},"说明",-1),Ne={class:"field-item"},Ve={class:"field-item"},ge={class:"field-item"};Object(c["popScopeId"])();var ke=pe((function(e,t,a,o,n,l){return e.fields?(Object(c["openBlock"])(),Object(c["createBlock"])("div",be,[je,Object(c["createVNode"])("div",Oe,[fe,ve,me,(Object(c["openBlock"])(!0),Object(c["createBlock"])(c["Fragment"],null,Object(c["renderList"])(e.fields,(function(e,t){return Object(c["openBlock"])(),Object(c["createBlock"])(c["Fragment"],{key:t},[Object(c["createVNode"])("div",Ne,Object(c["toDisplayString"])(t),1),Object(c["createVNode"])("div",Ve,Object(c["toDisplayString"])(e.map||"-"),1),Object(c["createVNode"])("div",ge,Object(c["toDisplayString"])(e.description||"-"),1)],64)})),128))])])):Object(c["createCommentVNode"])("",!0)})),Ce=Object(c["defineComponent"])({name:"FieldGrid",props:{fields:{type:Object}}});a("91cb");Ce.render=ke,Ce.__scopeId="data-v-1d6f7865";var he=Ce,ye=Object(c["defineComponent"])({name:"SourceDrawer",components:{FieldGrid:he,DsStaticEditor:Object(ue["a"])((function(){return a.e("chunk-2d210677").then(a.bind(null,"b86a"))})),DsApiEditor:Object(ue["a"])((function(){return a.e("chunk-9c62e20e").then(a.bind(null,"0b08"))}))},setup:function(){var e=Object(c["ref"])(!1),t=Object(c["ref"])(!1),a=E["c"],o=Object(z["b"])(),n=function(){e.value=!0},l=Object(c["inject"])("com"),i=Object(c["inject"])("apiConfig"),s=Object(c["inject"])("apiDataConfig"),r=Object(c["inject"])("apiName"),d=Object(c["computed"])((function(){return G["a"].dataStatusMap[l.value.id]||{}})),u=Object(c["computed"])((function(){var e=G["a"].originMap[l.value.id];return e?e[r]:""})),p=function(e){switch(e){case E["c"].api:void 0===s.value.config.api&&(s.value.config=Object(de["a"])(Object(de["a"])({},s.value.config),{},{api:"",apiMethod:E["a"].GET,apiHeaders:"{}",apiBody:"{}"}));break;default:break}},b=Object(c["computed"])((function(){var e=G["a"].dataMap[l.value.id];return e?e[r]:""})),j=function(){Object(L["b"])(l.value.id,r,i.value,s.value)};return{visible:e,visiblePreview:t,apiType:a,datasources:o,com:l,apiConfig:i,apiDataConfig:s,dataStatus:d,dataOrign:u,resData:b,open:n,changeSource:p,refreshData:j}}});a("34b9");ye.render=re;var Se=ye,we=Object(c["defineComponent"])({name:"SourcePanel",components:{DisplayApiStatus:Y,SourceDrawer:Se},props:{apiName:{type:String,required:!0},activeName:String,collapse:Boolean},setup:function(e){var t=Object(c["computed"])((function(){return e.apiName===e.activeName})),a=Object(c["ref"])(null),o=Object(z["b"])(),n=Object(c["inject"])("com"),l=Object(c["computed"])((function(){return n.value.apis[e.apiName]})),i=Object(c["computed"])((function(){return n.value.apiData[e.apiName]}));Object(c["provide"])("apiConfig",l),Object(c["provide"])("apiDataConfig",i),Object(c["provide"])("apiName",e.apiName);var s=Object(c["computed"])((function(){var t=G["a"].dataMap[n.value.id];return t?t[e.apiName]:""})),r=Object(c["computed"])((function(){var t=G["a"].fieldStatusMap[n.value.id];return t?t[e.apiName]:{}})),d=Object(c["computed"])((function(){var e=Object.values(r.value);return e.includes(z["a"].loading)?E["b"].loading:e.includes(z["a"].failed)?E["b"].incomplete:E["b"].completed})),u=Object(c["inject"])("changePanel"),p=function(){e.collapse&&u(e.apiName)},b=function(){var e;null===(e=a.value)||void 0===e||e.open()},j=function(){Object(L["b"])(n.value.id,e.apiName,l.value,i.value)};return{visible:t,sourceDrawerRef:a,datasources:o,com:n,apiConfig:l,apiDataConfig:i,fieldsStatus:r,totalStatus:d,datav_data:s,toggle:p,openSourceDrawer:b,refreshData:j}}});a("48c6");we.render=P,we.__scopeId="data-v-4487ef98";t["default"]=we},ef64:function(e,t,a){}}]);
//# sourceMappingURL=chunk-85d8f99e.21b2bb06.js.map