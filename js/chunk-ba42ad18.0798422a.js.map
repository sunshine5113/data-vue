{"version":3,"sources":["webpack:///./src/views/screen/config-panel/data-center-panel/source-panel.vue?51ed","webpack:///./src/views/screen/config-panel/components/display-api-status.vue?0a58","webpack:///./src/views/screen/config-panel/data-center-panel/source-panel.vue","webpack:///./src/views/screen/config-panel/components/display-api-status.vue","webpack:///./src/views/screen/config-panel/components/display-api-status.vue?4c22","webpack:///./src/views/screen/config-panel/components/display-api-status.vue?3b7b","webpack:///./src/views/screen/config-panel/data-center-panel/source-panel.vue?2a7b","webpack:///./src/views/screen/config-panel/data-center-panel/source-panel.vue?a81e"],"names":["class","toggle","collapse","dataConfig","description","status","totalStatus","success-text","fields","fc","fn","key","content","placement","effect","model-value","map","placeholder","$event","optional","useAutoUpdate","autoUpdate","type","disabled","sourceConfig","size","showDataSource","language","read-only","code","config","data","height","full-screen-title","visible","apiStatus","loading","success","completed","statusText","name","props","String","default","incomplete","loadingText","successText","failedText","notfoundText","completedText","incompleteText","Boolean","setup","failed","notfound","render","__scopeId","components","DisplayApiStatus","apiName","activeName","com","value","source","Object","values","some","m","changePanel"],"mappings":"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","file":"js/chunk-ba42ad18.0798422a.js","sourcesContent":["export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./source-panel.vue?vue&type=style&index=0&id=5aff688e&lang=scss&scoped=true\"","export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./display-api-status.vue?vue&type=style&index=0&id=70253ba4&lang=scss&scoped=true\"","<template>\n  <div\n    :class=\"['api-editor', {\n      '--disable-fold': !collapse,\n      '--fold': collapse && visible\n    }]\"\n  >\n    <div class=\"api-editor-title\">\n      <div class=\"api-desc ellipsis2\" @click=\"toggle\">\n        <i v-if=\"collapse\" class=\"el-icon-arrow-right api-fold-icon\"></i>\n        {{ dataConfig.description || '数据接口' }}\n      </div>\n      <div class=\"api-status success\">\n        <display-api-status :status=\"totalStatus\" success-text=\"配置完成\" />\n      </div>\n    </div>\n    <div v-show=\"visible\" class=\"attr-source-wp\">\n      <div class=\"data-attr-table-container\">\n        <table class=\"data-attr-table\">\n          <thead class=\"table-head\">\n            <tr class=\"table-head-row\">\n              <th class=\"th-item column-item attr-name\">\n                字段\n              </th>\n              <th class=\"th-item column-item attr-value\">\n                映射\n              </th>\n              <th class=\"th-item column-item attr-status\">\n                状态\n              </th>\n            </tr>\n          </thead>\n          <tbody class=\"table-body\">\n            <tr\n              v-for=\"(fc, fn) in dataConfig.fields\"\n              :key=\"fn\"\n              class=\"table-body-row\"\n            >\n              <td class=\"column-item attr-name\">\n                <el-tooltip\n                  :content=\"fc.description\"\n                  placement=\"left\"\n                  effect=\"blue\"\n                >\n                  <span class=\"ellipsis2\">{{ fn }}</span>\n                </el-tooltip>\n              </td>\n              <td class=\"column-item attr-value\">\n                <g-input\n                  :model-value=\"fc.map\"\n                  placeholder=\"可自定义\"\n                  class=\"attr-input\"\n                  @change=\"fc.map = $event\"\n                />\n              </td>\n              <td class=\"column-item attr-status\">\n                <display-api-status :status=\"fc.status\" :optional=\"fc.optional\" />\n              </td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n      <div class=\"data-source\">\n        <div class=\"data-result-title\">\n          数据响应结果\n        </div>\n        <div class=\"auto-update-config\">\n          <el-checkbox v-model=\"dataConfig.useAutoUpdate\" class=\"auto-update-checkbox\">\n            自动更新选项\n          </el-checkbox>\n          <g-input\n            :model-value=\"dataConfig.autoUpdate\"\n            type=\"number\"\n            :disabled=\"!dataConfig.useAutoUpdate\"\n            class=\"update-interval-input\"\n            @change=\"dataConfig.autoUpdate = $event\"\n          />\n          秒一次\n        </div>\n        <div class=\"data-flow-wp\">\n          <div class=\"ds-line\">\n            <div class=\"ds-title\">\n              <span class=\"ds-title-text\">数据源</span>\n              <span class=\"ds-type-text\">{{ sourceConfig.type }}</span>\n            </div>\n            <el-button\n              size=\"mini\"\n              class=\"ds-action-btn\"\n              @click=\"showDataSource\"\n            >\n              配置数据源\n            </el-button>\n          </div>\n          <div class=\"ds-line mt5\">\n            <span>数据响应结果 ( 只读 ) </span>\n            <el-tooltip content=\"刷新数据\" placement=\"left\" effect=\"blue\">\n              <i class=\"el-icon-refresh refresh-btn\"></i>\n            </el-tooltip>\n          </div>\n          <div class=\"ds-dots\">\n            <span class=\"ds-dot\" :class=\"[totalStatus === 'completed' ? 'active' : 'error']\"></span>\n            <span class=\"ds-dot\"></span>\n            <span class=\"ds-dot\"></span>\n          </div>\n        </div>\n        <div class=\"data-response\">\n          <g-monaco-editor\n            language=\"json\"\n            :read-only=\"true\"\n            :code=\"sourceConfig.config.data\"\n            :height=\"250\"\n            full-screen-title=\"数据响应结果\"\n          />\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script lang='ts'>\nimport { defineComponent, computed, ComputedRef, inject } from 'vue'\nimport { DatavComponent } from '@/components/datav-component'\nimport { DataConfig, SourceConfig, FieldStatus } from '@/components/data-source'\nimport { ApiStatus } from '@/utils/enums/data-source'\nimport DisplayApiStatus from '../components/display-api-status.vue'\n\nexport default defineComponent({\n  name: 'SourcePanel',\n  components: {\n    DisplayApiStatus,\n  },\n  props: {\n    apiName: String,\n    activeName: String,\n    collapse: Boolean,\n  },\n  setup(props) {\n    const visible = computed(() => props.apiName === props.activeName)\n\n    const com = inject('com') as ComputedRef<DatavComponent>\n    const dataConfig = computed((): DataConfig => com.value.data[props.apiName])\n    const sourceConfig = computed((): SourceConfig => com.value.source[props.apiName])\n\n    const totalStatus = computed(() => {\n      const fields = Object.values(dataConfig.value.fields)\n      if (fields.some(m => m.status === FieldStatus.loading)) {\n        return ApiStatus.loading\n      }\n\n      if (fields.some(m => !m.optional && (m.status === FieldStatus.failed || m.status === FieldStatus.notfound || m.status === FieldStatus.incomplete))) {\n        return ApiStatus.incomplete\n      }\n\n      return ApiStatus.completed\n    })\n\n    const changePanel = inject('changePanel') as Function\n\n    const toggle = () => {\n      if (props.collapse) {\n        changePanel(props.apiName)\n      }\n    }\n\n    const showDataSource = () => {\n      // this.currInfo.comId = this.comId\n      // this.currInfo.sourceId = this.source.id\n      // this.currInfo.apiName = this.apiName\n      // this.toolPanels.datasource = true\n    }\n\n    return {\n      visible,\n      com,\n      dataConfig,\n      sourceConfig,\n      totalStatus,\n      toggle,\n      showDataSource,\n    }\n  },\n})\n</script>\n\n<style lang=\"scss\" scoped>\n@import '~@/styles/themes/var';\n\n.api-editor {\n  .api-editor-title {\n    display: flex;\n    width: 100%;\n    height: 38px;\n    padding-right: 34px;\n    padding-left: 10px;\n    font-size: $font-size;\n    background: $config-panel-bgcolor;\n    border-top: $config-panel-border;\n    border-bottom: $config-panel-border;\n    box-sizing: border-box;\n    justify-content: space-between;\n    align-items: center;\n    transition: 0.4s;\n  }\n\n  .api-desc {\n    max-width: 160px;\n    color: $color-white;\n    white-space: initial;\n    cursor: pointer;\n  }\n\n  .api-fold-icon {\n    transition: transform 0.3s;\n  }\n\n  &.--disable-fold {\n    .api-desc {\n      cursor: default;\n    }\n  }\n\n  &.--fold {\n    .api-fold-icon {\n      transform: rotate(90deg);\n    }\n  }\n}\n\n.data-attr-table {\n  width: 100%;\n  color: $font-color;\n  text-align: left;\n\n  .table-head {\n    display: block;\n    width: 100%;\n    height: 40px;\n    font-size: 0;\n    line-height: 40px;\n    border-bottom: $config-panel-border;\n\n    .table-head-row {\n      display: block;\n      width: 100%;\n      height: 100%;\n    }\n\n    .th-item {\n      font-weight: 400;\n    }\n  }\n\n  .table-body {\n    display: block;\n    width: 100%;\n    padding-bottom: 10px;\n\n    .table-body-row {\n      display: block;\n      width: 100%;\n    }\n  }\n\n  .table-head,\n  .table-body {\n    .column-item {\n      display: inline-flex;\n      height: 40px;\n      padding: 0 6px;\n      font-size: 12px;\n      line-height: 17px;\n      vertical-align: middle;\n      box-sizing: border-box;\n      align-items: center;\n\n      &:first-child {\n        padding-left: 10px;\n      }\n    }\n\n    .attr-name {\n      width: 19%;\n    }\n\n    .attr-value {\n      width: 41%;\n    }\n\n    .attr-status {\n      width: 40%;\n    }\n\n    .attr-input {\n      width: 108px;\n      height: 24px;\n\n      .el-input__inner {\n        height: 24px;\n        line-height: 24px;\n        color: $font-color-secondary;\n      }\n    }\n  }\n}\n\n.data-source {\n  color: $font-color;\n  user-select: none;\n\n  .data-result-title {\n    padding: 10px;\n    border-top: $config-panel-border;\n    border-bottom: $config-panel-border;\n  }\n\n  .auto-update-config {\n    display: block;\n    margin-top: 15px;\n    margin-left: 10px;\n  }\n\n  .auto-update-checkbox {\n    margin-right: 5px;\n    line-height: 16px;\n    vertical-align: middle;\n  }\n\n  .update-interval-input {\n    width: 36px;\n    margin: 0 5px;\n    vertical-align: middle;\n  }\n\n  .data-flow-wp {\n    position: relative;\n    padding: 10px;\n  }\n\n  .ds-line {\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    padding: 5px 0 5px 20px;\n\n    &.mt5 {\n      margin-top: 5px;\n    }\n\n    .ds-type-text {\n      display: inline-block;\n      padding: 3px 5px;\n      margin-left: 7px;\n      font-size: 12px;\n      line-height: 12px;\n      color: $font-color;\n      text-align: center;\n      background: $input-prepend-bgcolor;\n      border-radius: 1px;\n      box-shadow: 0 0 5px -3px #000;\n    }\n\n    .ds-action-btn {\n      width: 120px;\n    }\n\n    .refresh-btn {\n      font-size: 16px;\n      cursor: pointer;\n      transition: color 0.2s;\n\n      &:hover {\n        color: $color-primary;\n      }\n    }\n  }\n\n  .ds-dots {\n    position: absolute;\n    top: 25px;\n    left: 15px;\n    display: flex;\n    width: 1px;\n    height: 87px;\n    background: $config-dot-list-bgcolor;\n    flex-direction: column;\n    align-items: center;\n    justify-content: space-between;\n  }\n\n  .ds-dot {\n    display: inline-block;\n    width: 8px;\n    height: 8px;\n    background: $config-dot-bgcolor;\n    border-radius: 4px;\n    box-shadow: 0 0 3px #000;\n    transition: background 0.2s;\n\n    &.active {\n      background: $color-primary;\n    }\n\n    &.error {\n      background: $color-error;\n    }\n  }\n\n  .data-response {\n    padding: 10px;\n    padding-top: 0;\n  }\n}\n</style>\n","<template>\n  <div>\n    <template v-if=\"status === apiStatus.loading\">\n      <i class=\"status-icon validating\"></i>\n      <i class=\"status-icon validating\"></i>\n      <i class=\"status-icon validating\"></i>\n    </template>\n    <template v-else-if=\"status === apiStatus.success || status === apiStatus.completed\">\n      <i class=\"status-icon\" :class=\"`--${status}`\"></i>\n    </template>\n    <template v-else-if=\"optional\">\n      <i class=\"status-icon --success\"></i>\n    </template>\n    <template v-else>\n      <i class=\"status-icon\" :class=\"`--${status}`\"></i>\n    </template>\n    <span class=\"status-text\">\n      {{ statusText }}\n    </span>\n  </div>\n</template>\n\n<script lang='ts'>\nimport { defineComponent, computed, PropType } from 'vue'\nimport { ApiStatus } from '@/utils/enums/data-source'\n\nexport default defineComponent({\n  name: 'DisplayApiStatus',\n  props: {\n    status: {\n      type: String as PropType<ApiStatus>,\n      default: ApiStatus.incomplete,\n    },\n    loadingText: {\n      type: String,\n      default: '匹配中',\n    },\n    successText: {\n      type: String,\n      default: '匹配成功',\n    },\n    failedText: {\n      type: String,\n      default: '匹配失败',\n    },\n    notfoundText: {\n      type: String,\n      default: '未找到字段',\n    },\n    completedText: {\n      type: String,\n      default: '配置完成',\n    },\n    incompleteText: {\n      type: String,\n      default: '配置未完成',\n    },\n    optional: {\n      type: Boolean,\n      default: false,\n    },\n  },\n  setup(props) {\n    const statusText = computed(() => {\n      if (props.status === ApiStatus.loading) {\n        return props.loadingText\n      }\n\n      if (props.status === ApiStatus.success) {\n        return props.successText\n      }\n\n      if (props.status === ApiStatus.completed) {\n        return props.completedText\n      }\n\n      if (props.optional) {\n        return '可选'\n      }\n\n      if (props.status === ApiStatus.failed) {\n        return props.failedText\n      }\n\n      if (props.status === ApiStatus.notfound) {\n        return props.notfoundText\n      }\n\n      if (props.status === ApiStatus.incomplete) {\n        return props.incompleteText\n      }\n\n      return props.status\n    })\n\n    return {\n      apiStatus: ApiStatus,\n      statusText,\n    }\n  },\n})\n</script>\n\n<style lang=\"scss\" scoped>\n@import '~@/styles/themes/var';\n@import '~@/styles/loading';\n\n.status-icon {\n  @include square-loading-icon();\n\n  &.--failed,\n  &.--notfound,\n  &.--incomplete {\n    background: $warn-main;\n  }\n}\n\n.status-text {\n  color: $font-color;\n}\n</style>\n","\nimport { defineComponent, computed, PropType } from 'vue'\nimport { ApiStatus } from '@/utils/enums/data-source'\n\nexport default defineComponent({\n  name: 'DisplayApiStatus',\n  props: {\n    status: {\n      type: String as PropType<ApiStatus>,\n      default: ApiStatus.incomplete,\n    },\n    loadingText: {\n      type: String,\n      default: '匹配中',\n    },\n    successText: {\n      type: String,\n      default: '匹配成功',\n    },\n    failedText: {\n      type: String,\n      default: '匹配失败',\n    },\n    notfoundText: {\n      type: String,\n      default: '未找到字段',\n    },\n    completedText: {\n      type: String,\n      default: '配置完成',\n    },\n    incompleteText: {\n      type: String,\n      default: '配置未完成',\n    },\n    optional: {\n      type: Boolean,\n      default: false,\n    },\n  },\n  setup(props) {\n    const statusText = computed(() => {\n      if (props.status === ApiStatus.loading) {\n        return props.loadingText\n      }\n\n      if (props.status === ApiStatus.success) {\n        return props.successText\n      }\n\n      if (props.status === ApiStatus.completed) {\n        return props.completedText\n      }\n\n      if (props.optional) {\n        return '可选'\n      }\n\n      if (props.status === ApiStatus.failed) {\n        return props.failedText\n      }\n\n      if (props.status === ApiStatus.notfound) {\n        return props.notfoundText\n      }\n\n      if (props.status === ApiStatus.incomplete) {\n        return props.incompleteText\n      }\n\n      return props.status\n    })\n\n    return {\n      apiStatus: ApiStatus,\n      statusText,\n    }\n  },\n})\n","import { render } from \"./display-api-status.vue?vue&type=template&id=70253ba4&scoped=true\"\nimport script from \"./display-api-status.vue?vue&type=script&lang=ts\"\nexport * from \"./display-api-status.vue?vue&type=script&lang=ts\"\n\nimport \"./display-api-status.vue?vue&type=style&index=0&id=70253ba4&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-70253ba4\"\n\nexport default script","\nimport { defineComponent, computed, ComputedRef, inject } from 'vue'\nimport { DatavComponent } from '@/components/datav-component'\nimport { DataConfig, SourceConfig, FieldStatus } from '@/components/data-source'\nimport { ApiStatus } from '@/utils/enums/data-source'\nimport DisplayApiStatus from '../components/display-api-status.vue'\n\nexport default defineComponent({\n  name: 'SourcePanel',\n  components: {\n    DisplayApiStatus,\n  },\n  props: {\n    apiName: String,\n    activeName: String,\n    collapse: Boolean,\n  },\n  setup(props) {\n    const visible = computed(() => props.apiName === props.activeName)\n\n    const com = inject('com') as ComputedRef<DatavComponent>\n    const dataConfig = computed((): DataConfig => com.value.data[props.apiName])\n    const sourceConfig = computed((): SourceConfig => com.value.source[props.apiName])\n\n    const totalStatus = computed(() => {\n      const fields = Object.values(dataConfig.value.fields)\n      if (fields.some(m => m.status === FieldStatus.loading)) {\n        return ApiStatus.loading\n      }\n\n      if (fields.some(m => !m.optional && (m.status === FieldStatus.failed || m.status === FieldStatus.notfound || m.status === FieldStatus.incomplete))) {\n        return ApiStatus.incomplete\n      }\n\n      return ApiStatus.completed\n    })\n\n    const changePanel = inject('changePanel') as Function\n\n    const toggle = () => {\n      if (props.collapse) {\n        changePanel(props.apiName)\n      }\n    }\n\n    const showDataSource = () => {\n      // this.currInfo.comId = this.comId\n      // this.currInfo.sourceId = this.source.id\n      // this.currInfo.apiName = this.apiName\n      // this.toolPanels.datasource = true\n    }\n\n    return {\n      visible,\n      com,\n      dataConfig,\n      sourceConfig,\n      totalStatus,\n      toggle,\n      showDataSource,\n    }\n  },\n})\n","import { render } from \"./source-panel.vue?vue&type=template&id=5aff688e&scoped=true\"\nimport script from \"./source-panel.vue?vue&type=script&lang=ts\"\nexport * from \"./source-panel.vue?vue&type=script&lang=ts\"\n\nimport \"./source-panel.vue?vue&type=style&index=0&id=5aff688e&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-5aff688e\"\n\nexport default script"],"sourceRoot":""}