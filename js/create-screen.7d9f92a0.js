(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["create-screen"],{1095:function(e,t,n){"use strict";n.r(t);var i=n("7a23"),c=Object(i["gb"])("data-v-c1bf1562");Object(i["H"])("data-v-c1bf1562");var r={class:"create-screen"},a={class:"top-bar"},o=Object(i["m"])("div",{class:"right-bar"},null,-1),l=Object(i["m"])("div",{class:"left-bar"},null,-1),u=Object(i["m"])("span",{class:"return-text"},[Object(i["m"])("i",{class:"v-icon-back return-icon"}),Object(i["l"])(" 取消创建 ")],-1),s={class:"creator-wp"},d={class:"template-list"},p={class:"template-item --blank"},b={class:"template-image"},f=Object(i["l"])(" 创建项目 "),m=Object(i["m"])("div",{class:"template-info"}," 空白画板 ",-1),j={class:"template-image"},v={class:"template-mask"},O=Object(i["l"])(" 创建项目 "),g=Object(i["l"])(" 预览 "),w={class:"template-info"},h={class:"template-name"},k={class:"template-size"},x={class:"create-dialog"},C=Object(i["m"])("p",{class:"name-title"},[Object(i["m"])("span",{class:"required"},"*"),Object(i["l"])("数据大屏名称 ")],-1),A=Object(i["m"])("p",{class:"name-title"},"大屏分组",-1),V=Object(i["l"])("取消"),E=Object(i["l"])(" 创建 "),y={class:"preview-dialog"},I={class:"preview-list"},T=Object(i["m"])("p",{class:"template-list-title"},"模板列表",-1),N={class:"blur-wp"},z={ref:"scrollRef",class:"scroll-wp"},U={class:"preview-screen-name"},J={class:"preview-gif"},P={class:"gif-wp"},R={class:"preview-create"},L={class:"create-dialog"},F=Object(i["m"])("p",{class:"name-title"},[Object(i["m"])("span",{class:"required"},"*"),Object(i["l"])("数据大屏名称 ")],-1),_=Object(i["m"])("p",{class:"name-title"},"大屏分组",-1),B=Object(i["l"])(" 创建大屏 "),D=Object(i["m"])("i",{class:"el-icon-arrow-right"},null,-1);Object(i["F"])();var M=c((function(e,t,n,M,Q,G){var S=Object(i["N"])("router-link"),Y=Object(i["N"])("el-button"),q=Object(i["N"])("g-loading"),X=Object(i["N"])("g-input"),K=Object(i["N"])("el-option"),W=Object(i["N"])("el-select"),H=Object(i["N"])("el-dialog");return Object(i["E"])(),Object(i["i"])(i["b"],null,[Object(i["m"])(q,{type:"square",spinning:e.loading},{default:c((function(){return[Object(i["m"])("div",r,[Object(i["m"])("div",a,[o,l,Object(i["m"])(S,{to:"/",class:"return-btn"},{default:c((function(){return[u]})),_:1})]),Object(i["m"])("div",s,[Object(i["m"])("div",d,[Object(i["m"])("div",p,[Object(i["m"])("div",b,[Object(i["m"])(Y,{type:"primary",icon:"el-icon-plus",onClick:t[1]||(t[1]=function(t){return e.confirmCreate(0)})},{default:c((function(){return[f]})),_:1})]),m]),(Object(i["E"])(!0),Object(i["i"])(i["b"],null,Object(i["L"])(e.templates,(function(t,n){return Object(i["E"])(),Object(i["i"])("div",{key:t.id,class:"template-item"},[Object(i["m"])("div",j,[Object(i["m"])("img",{src:t.thumbnail,alt:"",class:"preview-image"},null,8,["src"]),Object(i["m"])("div",v,[Object(i["m"])(Y,{type:"primary",class:"create-btn",onClick:function(n){return e.confirmCreate(t)}},{default:c((function(){return[O]})),_:2},1032,["onClick"]),Object(i["m"])(Y,{class:"preview-btn",onClick:function(i){return e.previewTemplate(t,n)}},{default:c((function(){return[g]})),_:2},1032,["onClick"])])]),Object(i["m"])("div",w,[Object(i["m"])("div",h,Object(i["R"])(t.name),1),Object(i["m"])("div",k,[(Object(i["E"])(!0),Object(i["i"])(i["b"],null,Object(i["L"])(t.size,(function(e,t){return Object(i["E"])(),Object(i["i"])("p",{key:t},Object(i["R"])(e),1)})),128))])])])})),128)),(Object(i["E"])(),Object(i["i"])(i["b"],null,Object(i["L"])(3,(function(e){return Object(i["m"])("div",{key:e,class:"template-item-placehoder"})})),64))])])])]})),_:1},8,["spinning"]),Object(i["m"])(H,{modelValue:e.visibleCreateDialog,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.visibleCreateDialog=t}),title:"创建数据大屏",width:"400px"},{footer:c((function(){return[Object(i["m"])(Y,{onClick:t[4]||(t[4]=function(t){return e.visibleCreateDialog=!1})},{default:c((function(){return[V]})),_:1}),Object(i["m"])(Y,{type:"primary",loading:e.saveLoading,onClick:e.doCreate},{default:c((function(){return[E]})),_:1},8,["loading","onClick"])]})),default:c((function(){return[Object(i["m"])("div",x,[C,Object(i["m"])(X,{modelValue:e.projectName,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.projectName=t}),placeholder:"请输入大屏名称",spellcheck:"false",class:"name-input"},null,8,["modelValue"]),A,Object(i["m"])(W,{modelValue:e.groupId,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.groupId=t}),size:"mini",placeholder:"请选择"},{default:c((function(){return[(Object(i["E"])(!0),Object(i["i"])(i["b"],null,Object(i["L"])(e.groups,(function(e){return Object(i["E"])(),Object(i["i"])(K,{key:e.id,label:e.name,value:e.id},null,8,["label","value"])})),128))]})),_:1},8,["modelValue"])])]})),_:1},8,["modelValue"]),Object(i["m"])(H,{modelValue:e.visiblePreviewDialog,"onUpdate:modelValue":t[10]||(t[10]=function(t){return e.visiblePreviewDialog=t}),title:"预览",width:"897px"},{default:c((function(){return[Object(i["m"])("div",y,[Object(i["m"])("div",I,[T,Object(i["m"])("div",N,[Object(i["m"])("div",z,[(Object(i["E"])(!0),Object(i["i"])(i["b"],null,Object(i["L"])(e.templates,(function(t,n){return Object(i["E"])(),Object(i["i"])("div",{key:t.id,class:["preview-wp",{selected:t.id===e.template.id}],onClick:function(i){return e.togglePreviewTemplate(t,n)}},[Object(i["m"])("img",{src:t.thumbnail,class:"preview-small-img"},null,8,["src"]),Object(i["m"])("div",U,Object(i["R"])(t.name),1)],10,["onClick"])})),128))],512)])]),Object(i["m"])("div",J,[Object(i["m"])("div",P,[Object(i["m"])("img",{class:"snapshot-gif",src:e.template.snapshot},null,8,["src"]),Object(i["m"])("i",{class:"el-icon-arrow-left prev-icon",onClick:t[6]||(t[6]=function(){return e.prevPreviewTemplate&&e.prevPreviewTemplate.apply(e,arguments)})}),Object(i["m"])("i",{class:"el-icon-arrow-right next-icon",onClick:t[7]||(t[7]=function(){return e.nextPreviewTemplate&&e.nextPreviewTemplate.apply(e,arguments)})})]),Object(i["m"])("div",R,[Object(i["m"])("div",L,[F,Object(i["m"])(X,{modelValue:e.projectName,"onUpdate:modelValue":t[8]||(t[8]=function(t){return e.projectName=t}),placeholder:"请输入大屏名称",spellcheck:"false",class:"name-input"},null,8,["modelValue"]),_,Object(i["m"])(W,{modelValue:e.groupId,"onUpdate:modelValue":t[9]||(t[9]=function(t){return e.groupId=t}),size:"mini",placeholder:"请选择"},{default:c((function(){return[(Object(i["E"])(!0),Object(i["i"])(i["b"],null,Object(i["L"])(e.groups,(function(e){return Object(i["E"])(),Object(i["i"])(K,{key:e.id,label:e.name,value:e.id},null,8,["label","value"])})),128))]})),_:1},8,["modelValue"])]),Object(i["m"])(Y,{type:"primary",size:"mini",loading:e.saveLoading,style:{"margin-top":"30px"},onClick:e.doCreate},{default:c((function(){return[B,D]})),_:1},8,["loading","onClick"])])])])]})),_:1},8,["modelValue"])],64)})),Q=n("c973"),G=n.n(Q),S=n("a34a"),Y=n.n(S),q=n("6c02"),X=n("b641"),K=n("9495"),W=n("6ca5"),H=n("99c2");function Z(e,t){if("undefined"===typeof window)return 0;var n=t?"pageYOffset":"pageXOffset",i=t?"scrollTop":"scrollLeft",c=e===window,r=c?e[n]:e[i];return c&&"number"!==typeof r&&(r=window.document.documentElement[i]),r}var $=window.requestAnimationFrame||function(e){return setTimeout(e,16)};function ee(e,t,n,i){var c=n-t;return e/=i/2,e<1?c/2*e*e*e+t:c/2*((e-=2)*e*e+2)+t}function te(e,t){void 0===t&&(t={});var n=t,i=n.getContainer,c=void 0===i?function(){return window}:i,r=n.callback,a=n.duration,o=void 0===a?450:a,l=c(),u=Z(l,!1),s=Date.now(),d=function t(){var n=Date.now(),i=n-s,c=ee(i>o?o:i,u,e,o);l===window?window.scrollTo(c,window.pageYOffset):l.scrollLeft=c,i<o?$(t):"function"===typeof r&&r()};$(d)}var ne=Object(i["o"])({name:"CreateScreen",setup:function(){var e=Object(i["J"])(!0),t=Object(i["J"])(X["b"]),n=Object(i["J"])([]),c=Object(i["J"])(!1),r=Object(i["J"])(!1),a=Object(i["J"])(""),o=Object(i["J"])({}),l=Object(i["J"])(0),u=Object(i["J"])([new K["a"](0,"未分组")]),s=Object(i["J"])(!1),d=Object(q["d"])(),p=Object(i["J"])(null);Object(i["B"])(G()(Y.a.mark((function t(){var i;return Y.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(W["g"])();case 2:i=t.sent,0===i.data.code&&(e.value=!1,n.value=i.data.data),Object(W["h"])().then((function(e){var t,n=e.data;0===n.code&&(t=u.value).push.apply(t,n.data.map((function(e){var t=e.id,n=e.name;return{id:t,name:n}})))}));case 5:case"end":return t.stop()}}),t)}))));var b=function(e){o.value=e,c.value=!0},f=function(e,t){o.value=e,r.value=!0,Object(i["v"])((function(){m(e,t)}))},m=function(e,t){o.value=e,te(149*t-350,{getContainer:function(){return p.value}})},j=function(){var e=n.value.findIndex((function(e){return e.id===o.value.id}));if(e>0){var t=e-1,i=n.value[t];m(i,t)}},v=function(){var e=n.value.findIndex((function(e){return e.id===o.value.id}));if(e<n.value.length-1){var t=e+1,i=n.value[t];m(i,t)}},O=function(){var e=G()(Y.a.mark((function e(){var t;return Y.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,a.value){e.next=4;break}return H["b"].error("请输入大屏名称"),e.abrupt("return");case 4:return s.value=!0,e.next=7,Object(W["b"])({name:a.value,groupId:l.value,templateId:o.value.id});case 7:if(t=e.sent,0!==t.data.code){e.next=14;break}c.value=!1,r.value=!1,d.push({name:"Screen",params:{projectId:t.data.data}}),e.next=15;break;case 14:throw Error(t.data.message);case 15:e.next=20;break;case 17:e.prev=17,e.t0=e["catch"](0),H["b"].error(H["b"].format(e.t0));case 20:return e.prev=20,s.value=!1,e.finish(20);case 23:case"end":return e.stop()}}),e,null,[[0,17,20,23]])})));return function(){return e.apply(this,arguments)}}();return{loading:e,bgCoverImg:t,templates:n,visibleCreateDialog:c,visiblePreviewDialog:r,projectName:a,template:o,groupId:l,groups:u,saveLoading:s,scrollRef:p,confirmCreate:b,previewTemplate:f,togglePreviewTemplate:m,prevPreviewTemplate:j,nextPreviewTemplate:v,doCreate:O}}});n("f69b");ne.render=M,ne.__scopeId="data-v-c1bf1562";t["default"]=ne},"5cc0":function(e,t,n){},"6ca5":function(e,t,n){"use strict";n.d(t,"h",(function(){return c})),n.d(t,"f",(function(){return r})),n.d(t,"b",(function(){return a})),n.d(t,"n",(function(){return o})),n.d(t,"d",(function(){return l})),n.d(t,"k",(function(){return u})),n.d(t,"a",(function(){return s})),n.d(t,"c",(function(){return d})),n.d(t,"e",(function(){return p})),n.d(t,"m",(function(){return b})),n.d(t,"g",(function(){return f})),n.d(t,"i",(function(){return m})),n.d(t,"l",(function(){return j})),n.d(t,"j",(function(){return v}));var i=n("b32d");function c(){return i["a"].get("/project")}function r(e){return i["a"].get("/project/"+e)}function a(e){return i["a"].post("/project",e)}function o(e,t){return i["a"].put("/project/"+e+"/name",{name:t})}function l(e){return i["a"].delete("/project/"+e)}function u(e,t,n){return i["a"].put("/project/"+e+"/group",{fromId:t,toId:n})}function s(e){return i["a"].post("/project/"+e+"/copy")}function d(e){return i["a"].post("/project/group",e)}function p(e){return i["a"].delete("/project/group/"+e)}function b(e,t){return i["a"].put("/project/group/"+e+"/name",{name:t})}function f(){return i["a"].get("/project/template")}function m(e){return i["a"].get("/project/"+e+"/publish")}function j(e,t){return i["a"].post("/project/"+e+"/publish",t)}function v(e){return window.location.origin+"/screen/"+e}},9495:function(e,t,n){"use strict";var i;n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return c})),function(e){e[e["ungroup"]=0]="ungroup",e[e["group"]=1]="group"}(i||(i={}));var c=function(e,t,n){void 0===e&&(e=0),void 0===t&&(t=""),void 0===n&&(n=[]),this.id=e,this.name=t,this.children=n,this.type=i.ungroup}},b641:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return o}));var i=n("a559"),c=n.n(i),r="//files.pengxiaotian.com/datav/bj.png",a="//files.pengxiaotian.com/datav/datav-vue-logo.png",o="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGIAAABQCAMAAADVyVCaAAAAM1BMVEVHcEwXvP8b1/8TV20UQVEZzf8Tn/8UiaMWqc4VkrEZw/AWsv8Vj7EUqf8YuOITRFYViKUfZVF5AAAACnRSTlMA////////Jt+CR+EzygAAAL9JREFUWMPt2FsOwjAMRNGGuKX0kbL/1bIBQv0YR0Kau4Ejz0+kTBNjjLGxPTptTxwh33uv6cTVXtmEVNhUXQI31dwlYFP1CdhUPwg51nQCNNWMyH+FNhIkhhIFQBQSUltNJup2JF+hEyKEUggQWsFPqAU3oRe8hEFwEhbhjtjjguweopVeMGLAFTbDR5gMJ2ExvITBcBN6w0+ojRviBLwXZ4BQGiFC93bHCEkfisRIYvkPYiGBIRDx/5Mxxsb2AVpUNS9SI1eoAAAAAElFTkSuQmCC",l=[{id:1,src:"box1-126-154.png",width:[71,23],slice:[],repeat:"initial"},{id:2,src:"box2-79-67.png",width:[32,37],slice:["fill"],repeat:"initial"},{id:3,src:"box3-116-115.png",width:[14],slice:["fill"],repeat:"initial"},{id:4,src:"box4-241-138.png",width:[14,100],slice:[],repeat:"initial"},{id:5,src:"box5-689-232.png",width:[46,305,117,33],slice:["fill"],repeat:"repeat"},{id:6,src:"box6-484-101.png",width:[45,103,51,29],slice:["fill"],repeat:"repeat"},{id:7,src:"box7-986-212.png",width:[29,107,109,16],slice:["fill"],repeat:"repeat"},{id:8,src:"box8-492-335.png",width:[15,11,16,8],slice:["fill"],repeat:"repeat"},{id:9,src:"box9-731-407.png",width:[152,27,127,354],slice:["fill"],repeat:"repeat"},{id:10,src:"box10-524-282.png",width:[56,4,76,393],slice:["fill"],repeat:"repeat"},{id:11,src:"box11-592-131.png",width:[17,24,18,19],slice:["fill"],repeat:"repeat"}],u=[{id:1,src:"deco1-1920-1080.gif",size:"100%",position:"left bottom"},{id:2,src:"deco2-1920-1080.gif",size:"100%",position:"center center"},{id:3,src:"deco3-1080-824.gif",size:"100%",position:"right top"},{id:4,src:"deco4-1080-824.gif",size:"100%",position:"right bottom"},{id:5,src:"deco5-1920-1080.gif",size:"100%",position:"left top"},{id:6,src:"deco6-1626-356.gif",size:"100%",position:"center center"},{id:7,src:"deco7-94-1461.gif",size:"contain",position:"left top"},{id:8,src:"deco8-500-54.gif",size:"contain",position:"left top"},{id:9,src:"deco9-500-64.gif",size:"contain",position:"left top"},{id:10,src:"deco10-782-259.gif",size:"contain",position:"left top"},{id:11,src:"deco11-58-36.png",size:"100%",position:"center center"},{id:12,src:"deco12-58-36.png",size:"100%",position:"center center"}];l.map((function(e){return c()({},e,{src:"//files.pengxiaotian.com/box/"+e.src,slice:[].concat(e.width,e.slice)})})),u.map((function(e){return c()({},e,{src:"//files.pengxiaotian.com/decoration/"+e.src})}))},f69b:function(e,t,n){"use strict";n("5cc0")}}]);
//# sourceMappingURL=create-screen.7d9f92a0.js.map