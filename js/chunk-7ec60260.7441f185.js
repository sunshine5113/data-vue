(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7ec60260"],{"07ac":function(e,t,a){var c=a("23e7"),o=a("6f53").values;c({target:"Object",stat:!0},{values:function(e){return o(e)}})},"2db7":function(e,t,a){},5022:function(e,t,a){"use strict";a("2db7")},5499:function(e,t,a){},"5b51":function(e,t,a){},"91cb":function(e,t,a){"use strict";a("c8da")},a5af:function(e,t,a){"use strict";a("5b51")},c8da:function(e,t,a){},c915:function(e,t,a){"use strict";a("5499")},e261:function(e,t,a){"use strict";a.r(t);a("a4d3"),a("e01a"),a("d81d");var c=a("7a23"),o=Object(c["withScopeId"])("data-v-1315d573");Object(c["pushScopeId"])("data-v-1315d573");var l={class:"api-editor-title"},n={key:0,class:"el-icon-arrow-right api-fold-icon"},s={class:"api-status success"},i={class:"attr-source-wp"},r={class:"data-attr-table-container"},d={class:"data-attr-table"},u=Object(c["createVNode"])("thead",{class:"table-head"},[Object(c["createVNode"])("tr",{class:"table-head-row"},[Object(c["createVNode"])("th",{class:"th-item column-item attr-name"}," 字段 "),Object(c["createVNode"])("th",{class:"th-item column-item attr-value"}," 映射 "),Object(c["createVNode"])("th",{class:"th-item column-item attr-status"}," 状态 ")])],-1),p={class:"table-body"},b={class:"column-item attr-name"},j={class:"ellipsis2"},O={class:"column-item attr-value"},f={class:"column-item attr-status"},v={class:"data-source"},m=Object(c["createVNode"])("div",{class:"data-result-title"}," 数据响应结果 ",-1),g={class:"auto-update-config"},N=Object(c["createTextVNode"])(" 自动更新选项 "),V=Object(c["createTextVNode"])(" 秒一次 "),k={class:"data-flow-wp"},C={class:"ds-line"},y={class:"ds-title"},S=Object(c["createVNode"])("span",{class:"ds-title-text"},"数据源",-1),h={class:"ds-type-text"},B=Object(c["createTextVNode"])(" 配置数据源 "),w={class:"ds-line mt5"},D=Object(c["createVNode"])("span",null,"数据响应结果 ( 只读 ) ",-1),x=Object(c["createVNode"])("i",{class:"el-icon-refresh refresh-btn"},null,-1),T={class:"ds-dots"},_=Object(c["createVNode"])("span",{class:"ds-dot"},null,-1),I=Object(c["createVNode"])("span",{class:"ds-dot"},null,-1),U={class:"data-response"};Object(c["popScopeId"])();var F=o((function(e,t,a,F,A,z){var L=Object(c["resolveComponent"])("display-api-status"),M=Object(c["resolveComponent"])("el-tooltip"),G=Object(c["resolveComponent"])("g-input"),J=Object(c["resolveComponent"])("el-checkbox"),P=Object(c["resolveComponent"])("el-button"),R=Object(c["resolveComponent"])("g-monaco-editor"),q=Object(c["resolveComponent"])("source-drawer");return Object(c["openBlock"])(),Object(c["createBlock"])("div",{class:["api-editor",{"--disable-fold":!e.collapse,"--fold":e.collapse&&e.visible}]},[Object(c["createVNode"])("div",l,[Object(c["createVNode"])("div",{class:"api-desc ellipsis2",onClick:t[1]||(t[1]=function(){return e.toggle&&e.toggle.apply(e,arguments)})},[e.collapse?(Object(c["openBlock"])(),Object(c["createBlock"])("i",n)):Object(c["createCommentVNode"])("",!0),Object(c["createTextVNode"])(" "+Object(c["toDisplayString"])(e.apiConfig.description||"数据接口"),1)]),Object(c["createVNode"])("div",s,[Object(c["createVNode"])(L,{status:e.totalStatus,"success-text":"配置完成"},null,8,["status"])])]),Object(c["withDirectives"])(Object(c["createVNode"])("div",i,[Object(c["createVNode"])("div",r,[Object(c["createVNode"])("table",d,[u,Object(c["createVNode"])("tbody",p,[(Object(c["openBlock"])(!0),Object(c["createBlock"])(c["Fragment"],null,Object(c["renderList"])(e.apiConfig.fields,(function(t,a){return Object(c["openBlock"])(),Object(c["createBlock"])("tr",{key:a,class:"table-body-row"},[Object(c["createVNode"])("td",b,[Object(c["createVNode"])(M,{content:t.description,placement:"left",effect:"blue"},{default:o((function(){return[Object(c["createVNode"])("span",j,Object(c["toDisplayString"])(a),1)]})),_:2},1032,["content"])]),Object(c["createVNode"])("td",O,[Object(c["createVNode"])(G,{"model-value":t.map,placeholder:"可自定义",class:"attr-input",onChange:function(e){return t.map=e}},null,8,["model-value","onChange"])]),Object(c["createVNode"])("td",f,[Object(c["createVNode"])(L,{status:e.fieldsStatus[a],optional:t.optional},null,8,["status","optional"])])])})),128))])])]),Object(c["createVNode"])("div",v,[m,Object(c["createVNode"])("div",g,[Object(c["createVNode"])(J,{modelValue:e.apiConfig.useAutoUpdate,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.apiConfig.useAutoUpdate=t}),class:"auto-update-checkbox"},{default:o((function(){return[N]})),_:1},8,["modelValue"]),Object(c["createVNode"])(G,{"model-value":e.apiConfig.autoUpdate,type:"number",disabled:!e.apiConfig.useAutoUpdate,class:"update-interval-input",onChange:t[3]||(t[3]=function(t){return e.apiConfig.autoUpdate=t})},null,8,["model-value","disabled"]),V]),Object(c["createVNode"])("div",k,[Object(c["createVNode"])("div",C,[Object(c["createVNode"])("div",y,[S,Object(c["createVNode"])("span",h,Object(c["toDisplayString"])(e.datasources[e.apiDataConfig.type]),1)]),Object(c["createVNode"])(P,{size:"mini",class:"ds-action-btn",onClick:e.openSourceDrawer},{default:o((function(){return[B]})),_:1},8,["onClick"])]),Object(c["createVNode"])("div",w,[D,Object(c["createVNode"])(M,{content:"刷新数据",placement:"left",effect:"blue"},{default:o((function(){return[x]})),_:1})]),Object(c["createVNode"])("div",T,[Object(c["createVNode"])("span",{class:["ds-dot",["completed"===e.totalStatus?"active":"error"]]},null,2),_,I])]),Object(c["createVNode"])("div",U,[Object(c["createVNode"])(R,{language:"json","read-only":!0,code:e.datav_data,height:250,"full-screen-title":"数据响应结果"},null,8,["code"])])])],512),[[c["vShow"],e.visible]]),Object(c["createVNode"])(q,{ref:"sourceDrawerRef"},null,512)],2)})),A=(a("07ac"),a("caad"),a("2532"),a("c18c")),z=a("bf64"),L=a("fd90"),M=Object(c["withScopeId"])("data-v-1a65afef");Object(c["pushScopeId"])("data-v-1a65afef");var G=Object(c["createVNode"])("i",{class:"status-icon validating"},null,-1),J=Object(c["createVNode"])("i",{class:"status-icon validating"},null,-1),P=Object(c["createVNode"])("i",{class:"status-icon validating"},null,-1),R={key:2,class:"status-icon --success"},q={class:"status-text"};Object(c["popScopeId"])();var E=M((function(e,t,a,o,l,n){return Object(c["openBlock"])(),Object(c["createBlock"])("div",null,[e.status===e.apiStatus.loading?(Object(c["openBlock"])(),Object(c["createBlock"])(c["Fragment"],{key:0},[G,J,P],64)):e.status===e.apiStatus.success||e.status===e.apiStatus.completed?(Object(c["openBlock"])(),Object(c["createBlock"])("i",{key:1,class:["status-icon","--".concat(e.status)]},null,2)):e.optional?(Object(c["openBlock"])(),Object(c["createBlock"])("i",R)):(Object(c["openBlock"])(),Object(c["createBlock"])("i",{key:3,class:["status-icon","--".concat(e.status)]},null,2)),Object(c["createVNode"])("span",q,Object(c["toDisplayString"])(e.statusText),1)])})),H=Object(c["defineComponent"])({name:"DisplayApiStatus",props:{status:{type:String,default:z["a"].incomplete},loadingText:{type:String,default:"匹配中"},successText:{type:String,default:"匹配成功"},failedText:{type:String,default:"未找到字段"},completedText:{type:String,default:"配置完成"},incompleteText:{type:String,default:"配置未完成"},optional:{type:Boolean,default:!1}},setup:function(e){var t=Object(c["computed"])((function(){return e.status===z["a"].loading?e.loadingText:e.status===z["a"].success?e.successText:e.status===z["a"].completed?e.completedText:e.optional?"可选":e.status===z["a"].failed?e.failedText:e.status===z["a"].incomplete?e.incompleteText:e.status}));return{apiStatus:z["a"],statusText:t}}});a("5022");H.render=E,H.__scopeId="data-v-1a65afef";var K=H,Q=Object(c["createVNode"])("p",{class:"source-drawer-title"},"设置数据源",-1),W=Object(c["createVNode"])("div",{class:"step-title"},"数据源",-1),X={class:"datasource-selector"},Y=Object(c["createVNode"])("label",{class:"datasource-selector-title"},"数据源类型",-1),Z={class:"datasource-select-wp"},$={key:0,class:"ds-wrapper ds-static"},ee={key:1,class:"ds-wrapper ds-api"},te={class:"step-title"},ae=Object(c["createVNode"])("span",{class:"use-filter-text"},"数据过滤器",-1),ce=Object(c["createVNode"])("span",{class:"tutorial-popup"},"教程",-1),oe=Object(c["createVNode"])("div",{class:"step-title"},[Object(c["createVNode"])("span",null,"数据响应结果"),Object(c["createVNode"])("i",{class:"el-icon-refresh refresh-btn"})],-1),le={class:"data-response"};function ne(e,t,a,o,l,n){var s=Object(c["resolveComponent"])("el-option"),i=Object(c["resolveComponent"])("el-select"),r=Object(c["resolveComponent"])("g-monaco-editor"),d=Object(c["resolveComponent"])("el-checkbox"),u=Object(c["resolveComponent"])("field-grid"),p=Object(c["resolveComponent"])("el-drawer");return Object(c["openBlock"])(),Object(c["createBlock"])(p,{modelValue:e.visible,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.visible=t}),"custom-class":"source-drawer",size:"500px"},{title:Object(c["withCtx"])((function(){return[Q]})),default:Object(c["withCtx"])((function(){return[e.visible?(Object(c["openBlock"])(),Object(c["createBlock"])(c["Fragment"],{key:0},[W,Object(c["createVNode"])("div",X,[Y,Object(c["createVNode"])("div",Z,[Object(c["createVNode"])(i,{modelValue:e.apiDataConfig.type,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.apiDataConfig.type=t}),size:"mini",class:"datasource-select","popper-class":"datasource-select-option",onChange:e.changeSource},{default:Object(c["withCtx"])((function(){return[(Object(c["openBlock"])(!0),Object(c["createBlock"])(c["Fragment"],null,Object(c["renderList"])(e.datasources,(function(e,t){return Object(c["openBlock"])(),Object(c["createBlock"])(s,{key:t,label:e,value:t},null,8,["label","value"])})),128))]})),_:1},8,["modelValue","onChange"])])]),e.apiDataConfig.type===e.apiType.static?(Object(c["openBlock"])(),Object(c["createBlock"])("div",$,[Object(c["createVNode"])(r,{key:e.apiType.static,language:"json",code:e.apiDataConfig.config.data,onBlur:e.updateData},null,8,["code","onBlur"])])):e.apiDataConfig.type===e.apiType.api?(Object(c["openBlock"])(),Object(c["createBlock"])("div",ee,[Object(c["createVNode"])(r,{key:e.apiType.api,language:"plaintext",code:e.apiDataConfig.config.api,onBlur:e.updateData},null,8,["code","onBlur"])])):Object(c["createCommentVNode"])("",!0),Object(c["createVNode"])("div",te,[Object(c["createVNode"])(d,{modelValue:e.apiConfig.useAutoUpdate,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.apiConfig.useAutoUpdate=t}),class:"use-filter-btn"},null,8,["modelValue"]),ae,ce]),Object(c["createVNode"])(u,{fields:e.apiConfig.fields},null,8,["fields"]),oe,Object(c["createVNode"])("div",le,[Object(c["createVNode"])(r,{language:"json","read-only":!0,code:e.resData},null,8,["code"])])],64)):Object(c["createCommentVNode"])("",!0)]})),_:1},8,["modelValue"])}var se=Object(c["withScopeId"])("data-v-1d6f7865");Object(c["pushScopeId"])("data-v-1d6f7865");var ie={key:0,class:"field-wp"},re=Object(c["createVNode"])("div",{class:"field-info"},"数据相应结果应为列表，列表元素包含如下字段",-1),de={class:"field-grid"},ue=Object(c["createVNode"])("div",{class:"field-item field-title"},"字段",-1),pe=Object(c["createVNode"])("div",{class:"field-item field-title"},"映射",-1),be=Object(c["createVNode"])("div",{class:"field-item field-title"},"说明",-1),je={class:"field-item"},Oe={class:"field-item"},fe={class:"field-item"};Object(c["popScopeId"])();var ve=se((function(e,t,a,o,l,n){return e.fields?(Object(c["openBlock"])(),Object(c["createBlock"])("div",ie,[re,Object(c["createVNode"])("div",de,[ue,pe,be,(Object(c["openBlock"])(!0),Object(c["createBlock"])(c["Fragment"],null,Object(c["renderList"])(e.fields,(function(e,t){return Object(c["openBlock"])(),Object(c["createBlock"])(c["Fragment"],{key:t},[Object(c["createVNode"])("div",je,Object(c["toDisplayString"])(t),1),Object(c["createVNode"])("div",Oe,Object(c["toDisplayString"])(e.map||"-"),1),Object(c["createVNode"])("div",fe,Object(c["toDisplayString"])(e.description||"-"),1)],64)})),128))])])):Object(c["createCommentVNode"])("",!0)})),me=Object(c["defineComponent"])({name:"FieldGrid",props:{fields:{type:Object}}});a("91cb");me.render=ve,me.__scopeId="data-v-1d6f7865";var ge=me,Ne=Object(c["defineComponent"])({name:"SourceDrawer",components:{FieldGrid:ge},setup:function(){var e=Object(c["ref"])(!1),t=z["b"],a=Object(A["b"])(),o=function(){e.value=!0},l=Object(c["inject"])("com"),n=Object(c["inject"])("apiConfig"),s=Object(c["inject"])("apiDataConfig"),i=Object(c["inject"])("apiName"),r=function(e){e!==t.static&&void 0===s.value.config[e]&&(s.value.config[e]="")},d=function(e){switch(s.value.type){case t.static:s.value.config.data=e.value;break;case t.api:s.value.config.api=e.value;break;default:break}},u=Object(c["computed"])((function(){var e=L["a"].dataMap[l.value.id];return e?e[i]:""}));return{visible:e,apiType:t,datasources:a,com:l,apiConfig:n,apiDataConfig:s,resData:u,open:o,changeSource:r,updateData:d}}});a("a5af");Ne.render=ne;var Ve=Ne,ke=Object(c["defineComponent"])({name:"SourcePanel",components:{DisplayApiStatus:K,SourceDrawer:Ve},props:{apiName:{type:String,required:!0},activeName:String,collapse:Boolean},setup:function(e){var t=Object(c["computed"])((function(){return e.apiName===e.activeName})),a=Object(c["ref"])(null),o=Object(A["b"])(),l=Object(c["inject"])("com"),n=Object(c["computed"])((function(){return l.value.apis[e.apiName]})),s=Object(c["computed"])((function(){return l.value.apiData[e.apiName]}));Object(c["provide"])("apiConfig",n),Object(c["provide"])("apiDataConfig",s),Object(c["provide"])("apiName",e.apiName);var i=Object(c["computed"])((function(){var t=L["a"].dataMap[l.value.id];return t?t[e.apiName]:""})),r=Object(c["computed"])((function(){var t=L["a"].fieldStatusMap[l.value.id];return t?t[e.apiName]:{}})),d=Object(c["computed"])((function(){var e=Object.values(r.value);return e.includes(A["a"].loading)?z["a"].loading:e.includes(A["a"].failed)?z["a"].incomplete:z["a"].completed})),u=Object(c["inject"])("changePanel"),p=function(){e.collapse&&u(e.apiName)},b=function(){var e;null===(e=a.value)||void 0===e||e.open()};return{visible:t,sourceDrawerRef:a,datasources:o,com:l,apiConfig:n,apiDataConfig:s,fieldsStatus:r,totalStatus:d,datav_data:i,toggle:p,openSourceDrawer:b}}});a("c915");ke.render=F,ke.__scopeId="data-v-1315d573";t["default"]=ke}}]);
//# sourceMappingURL=chunk-7ec60260.7441f185.js.map