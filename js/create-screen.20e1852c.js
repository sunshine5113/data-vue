(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["create-screen"],{1095:function(e,t,c){"use strict";c.r(t);c("b0c0");var a=c("7a23"),n=Object(a["withScopeId"])("data-v-3fa34210");Object(a["pushScopeId"])("data-v-3fa34210");var r={class:"create-screen"},i={class:"top-bar"},o=Object(a["createVNode"])("div",{class:"right-bar"},null,-1),l=Object(a["createVNode"])("div",{class:"left-bar"},null,-1),d=Object(a["createVNode"])("span",{class:"return-text"},[Object(a["createVNode"])("i",{class:"v-icon-back return-icon"}),Object(a["createTextVNode"])(" 取消创建 ")],-1),s={class:"creator-wp"},u={class:"template-list"},p={class:"template-item --blank"},b={class:"template-image"},f=Object(a["createTextVNode"])(" 创建项目 "),j=Object(a["createVNode"])("div",{class:"template-info"}," 空白画板 ",-1),v={class:"template-image"},O={class:"template-mask"},m=Object(a["createTextVNode"])(" 创建项目 "),g=Object(a["createTextVNode"])(" 预览 "),V={class:"template-info"},w={class:"template-name"},N={class:"template-size"},h={class:"create-dialog"},k=Object(a["createVNode"])("p",{class:"name-title"},[Object(a["createVNode"])("span",{class:"required"},"*"),Object(a["createTextVNode"])("数据大屏名称 ")],-1),x=Object(a["createVNode"])("p",{class:"name-title"},"大屏分组",-1),C=Object(a["createTextVNode"])("取消"),A=Object(a["createTextVNode"])(" 创建 "),B={class:"preview-dialog"},T={class:"preview-list"},y=Object(a["createVNode"])("p",{class:"template-list-title"},"模板列表",-1),I={class:"blur-wp"},F={ref:"scrollRef",class:"scroll-wp"},z={class:"preview-screen-name"},E={class:"preview-gif"},U={class:"gif-wp"},P={class:"preview-create"},R={class:"create-dialog"},L=Object(a["createVNode"])("p",{class:"name-title"},[Object(a["createVNode"])("span",{class:"required"},"*"),Object(a["createTextVNode"])("数据大屏名称 ")],-1),D=Object(a["createVNode"])("p",{class:"name-title"},"大屏分组",-1),S=Object(a["createTextVNode"])(" 创建大屏 "),_=Object(a["createVNode"])("i",{class:"el-icon-arrow-right"},null,-1);Object(a["popScopeId"])();var M=n((function(e,t,c,M,Q,G){var Y=Object(a["resolveComponent"])("router-link"),q=Object(a["resolveComponent"])("el-button"),J=Object(a["resolveComponent"])("g-loading"),X=Object(a["resolveComponent"])("g-input"),K=Object(a["resolveComponent"])("el-option"),W=Object(a["resolveComponent"])("el-select"),Z=Object(a["resolveComponent"])("el-dialog");return Object(a["openBlock"])(),Object(a["createBlock"])(a["Fragment"],null,[Object(a["createVNode"])(J,{type:"square",spinning:e.loading},{default:n((function(){return[Object(a["createVNode"])("div",r,[Object(a["createVNode"])("div",i,[o,l,Object(a["createVNode"])(Y,{to:"/",class:"return-btn"},{default:n((function(){return[d]})),_:1})]),Object(a["createVNode"])("div",s,[Object(a["createVNode"])("div",u,[Object(a["createVNode"])("div",p,[Object(a["createVNode"])("div",b,[Object(a["createVNode"])(q,{type:"primary",icon:"el-icon-plus",onClick:t[1]||(t[1]=function(t){return e.confirmCreate(0)})},{default:n((function(){return[f]})),_:1})]),j]),(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(e.templates,(function(t,c){return Object(a["openBlock"])(),Object(a["createBlock"])("div",{key:t.id,class:"template-item"},[Object(a["createVNode"])("div",v,[Object(a["createVNode"])("img",{src:t.thumbnail,alt:"",class:"preview-image"},null,8,["src"]),Object(a["createVNode"])("div",O,[Object(a["createVNode"])(q,{type:"primary",class:"create-btn",onClick:function(c){return e.confirmCreate(t)}},{default:n((function(){return[m]})),_:2},1032,["onClick"]),Object(a["createVNode"])(q,{class:"preview-btn",onClick:function(a){return e.previewTemplate(t,c)}},{default:n((function(){return[g]})),_:2},1032,["onClick"])])]),Object(a["createVNode"])("div",V,[Object(a["createVNode"])("div",w,Object(a["toDisplayString"])(t.name),1),Object(a["createVNode"])("div",N,[(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(t.size,(function(e,t){return Object(a["openBlock"])(),Object(a["createBlock"])("p",{key:t},Object(a["toDisplayString"])(e),1)})),128))])])])})),128)),(Object(a["openBlock"])(),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(3,(function(e){return Object(a["createVNode"])("div",{key:e,class:"template-item-placehoder"})})),64))])])])]})),_:1},8,["spinning"]),Object(a["createVNode"])(Z,{modelValue:e.visibleCreateDialog,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.visibleCreateDialog=t}),title:"创建数据大屏",width:"400px"},{footer:n((function(){return[Object(a["createVNode"])(q,{onClick:t[4]||(t[4]=function(t){return e.visibleCreateDialog=!1})},{default:n((function(){return[C]})),_:1}),Object(a["createVNode"])(q,{type:"primary",loading:e.saveLoading,onClick:e.doCreate},{default:n((function(){return[A]})),_:1},8,["loading","onClick"])]})),default:n((function(){return[Object(a["createVNode"])("div",h,[k,Object(a["createVNode"])(X,{modelValue:e.projectName,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.projectName=t}),placeholder:"请输入大屏名称",spellcheck:"false",class:"name-input"},null,8,["modelValue"]),x,Object(a["createVNode"])(W,{modelValue:e.groupId,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.groupId=t}),size:"mini",placeholder:"请选择"},{default:n((function(){return[(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(e.groups,(function(e){return Object(a["openBlock"])(),Object(a["createBlock"])(K,{key:e.id,label:e.name,value:e.id},null,8,["label","value"])})),128))]})),_:1},8,["modelValue"])])]})),_:1},8,["modelValue"]),Object(a["createVNode"])(Z,{modelValue:e.visiblePreviewDialog,"onUpdate:modelValue":t[10]||(t[10]=function(t){return e.visiblePreviewDialog=t}),title:"预览",width:"897px"},{default:n((function(){return[Object(a["createVNode"])("div",B,[Object(a["createVNode"])("div",T,[y,Object(a["createVNode"])("div",I,[Object(a["createVNode"])("div",F,[(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(e.templates,(function(t,c){return Object(a["openBlock"])(),Object(a["createBlock"])("div",{key:t.id,class:["preview-wp",{selected:t.id===e.template.id}],onClick:function(a){return e.togglePreviewTemplate(t,c)}},[Object(a["createVNode"])("img",{src:t.thumbnail,class:"preview-small-img"},null,8,["src"]),Object(a["createVNode"])("div",z,Object(a["toDisplayString"])(t.name),1)],10,["onClick"])})),128))],512)])]),Object(a["createVNode"])("div",E,[Object(a["createVNode"])("div",U,[Object(a["createVNode"])("img",{class:"snapshot-gif",src:e.template.snapshot},null,8,["src"]),Object(a["createVNode"])("i",{class:"el-icon-arrow-left prev-icon",onClick:t[6]||(t[6]=function(){return e.prevPreviewTemplate&&e.prevPreviewTemplate.apply(e,arguments)})}),Object(a["createVNode"])("i",{class:"el-icon-arrow-right next-icon",onClick:t[7]||(t[7]=function(){return e.nextPreviewTemplate&&e.nextPreviewTemplate.apply(e,arguments)})})]),Object(a["createVNode"])("div",P,[Object(a["createVNode"])("div",R,[L,Object(a["createVNode"])(X,{modelValue:e.projectName,"onUpdate:modelValue":t[8]||(t[8]=function(t){return e.projectName=t}),placeholder:"请输入大屏名称",spellcheck:"false",class:"name-input"},null,8,["modelValue"]),D,Object(a["createVNode"])(W,{modelValue:e.groupId,"onUpdate:modelValue":t[9]||(t[9]=function(t){return e.groupId=t}),size:"mini",placeholder:"请选择"},{default:n((function(){return[(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(e.groups,(function(e){return Object(a["openBlock"])(),Object(a["createBlock"])(K,{key:e.id,label:e.name,value:e.id},null,8,["label","value"])})),128))]})),_:1},8,["modelValue"])]),Object(a["createVNode"])(q,{type:"primary",size:"mini",loading:e.saveLoading,style:{"margin-top":"30px"},onClick:e.doCreate},{default:n((function(){return[S,_]})),_:1},8,["loading","onClick"])])])])]})),_:1},8,["modelValue"])],64)})),Q=c("2909"),G=c("1da1"),Y=(c("96cf"),c("d81d"),c("c740"),c("6c02")),q=c("b641"),J=c("9495"),X=c("6ca5"),K=c("99c2");function W(e,t){if("undefined"===typeof window)return 0;var c=t?"pageYOffset":"pageXOffset",a=t?"scrollTop":"scrollLeft",n=e===window,r=n?e[c]:e[a];return n&&"number"!==typeof r&&(r=window.document.documentElement[a]),r}var Z=window.requestAnimationFrame||function(e){return setTimeout(e,16)};function H(e,t,c,a){var n=c-t;return e/=a/2,e<1?n/2*e*e*e+t:n/2*((e-=2)*e*e+2)+t}function $(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=t.getContainer,a=void 0===c?function(){return window}:c,n=t.callback,r=t.duration,i=void 0===r?450:r,o=a(),l=W(o,!1),d=Date.now(),s=function t(){var c=Date.now(),a=c-d,r=H(a>i?i:a,l,e,i);o===window?window.scrollTo(r,window.pageYOffset):o.scrollLeft=r,a<i?Z(t):"function"===typeof n&&n()};Z(s)}var ee=Object(a["defineComponent"])({name:"CreateScreen",setup:function(){var e=Object(a["ref"])(!0),t=Object(a["ref"])(q["b"]),c=Object(a["ref"])([]),n=Object(a["ref"])(!1),r=Object(a["ref"])(!1),i=Object(a["ref"])(""),o=Object(a["ref"])({}),l=Object(a["ref"])(0),d=Object(a["ref"])([new J["a"](0,"未分组")]),s=Object(a["ref"])(!1),u=Object(Y["d"])(),p=Object(a["ref"])(null);Object(a["onMounted"])(Object(G["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(X["g"])();case 2:a=t.sent,0===a.data.code&&(e.value=!1,c.value=a.data.data),Object(X["h"])().then((function(e){var t,c=e.data;0===c.code&&(t=d.value).push.apply(t,Object(Q["a"])(c.data.map((function(e){var t=e.id,c=e.name;return{id:t,name:c}}))))}));case 5:case"end":return t.stop()}}),t)}))));var b=function(e){o.value=e,n.value=!0},f=function(e,t){o.value=e,r.value=!0,Object(a["nextTick"])((function(){j(e,t)}))},j=function(e,t){o.value=e,$(149*t-350,{getContainer:function(){return p.value}})},v=function(){var e=c.value.findIndex((function(e){return e.id===o.value.id}));if(e>0){var t=e-1,a=c.value[t];j(a,t)}},O=function(){var e=c.value.findIndex((function(e){return e.id===o.value.id}));if(e<c.value.length-1){var t=e+1,a=c.value[t];j(a,t)}},m=function(){var e=Object(G["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,i.value){e.next=4;break}return K["b"].error("请输入大屏名称"),e.abrupt("return");case 4:return s.value=!0,e.next=7,Object(X["b"])({name:i.value,groupId:l.value,templateId:o.value.id});case 7:if(t=e.sent,0!==t.data.code){e.next=14;break}n.value=!1,r.value=!1,u.push({name:"Screen",params:{projectId:t.data.data}}),e.next=15;break;case 14:throw Error(t.data.message);case 15:e.next=20;break;case 17:e.prev=17,e.t0=e["catch"](0),K["b"].error(K["b"].format(e.t0));case 20:return e.prev=20,s.value=!1,e.finish(20);case 23:case"end":return e.stop()}}),e,null,[[0,17,20,23]])})));return function(){return e.apply(this,arguments)}}();return{loading:e,bgCoverImg:t,templates:c,visibleCreateDialog:n,visiblePreviewDialog:r,projectName:i,template:o,groupId:l,groups:d,saveLoading:s,scrollRef:p,confirmCreate:b,previewTemplate:f,togglePreviewTemplate:j,prevPreviewTemplate:v,nextPreviewTemplate:O,doCreate:m}}});c("e0c4");ee.render=M,ee.__scopeId="data-v-3fa34210";t["default"]=ee},"8dea":function(e,t,c){},9495:function(e,t,c){"use strict";c.d(t,"b",(function(){return a})),c.d(t,"a",(function(){return r}));var a,n=c("d4ec");c("b0c0");(function(e){e[e["ungroup"]=0]="ungroup",e[e["group"]=1]="group"})(a||(a={}));var r=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];Object(n["a"])(this,e),this.id=t,this.name=c,this.children=r,this.type=a.ungroup}},b641:function(e,t,c){"use strict";c.d(t,"a",(function(){return r})),c.d(t,"b",(function(){return i})),c.d(t,"c",(function(){return o}));var a=c("2909"),n=c("5530"),r=(c("d81d"),c("99af"),c("fb6a"),"".concat("//files.pengxiaotian.com","/datav/bj.png")),i="".concat("//files.pengxiaotian.com","/datav/datav-vue-logo.png"),o="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGIAAABQCAMAAADVyVCaAAAAM1BMVEVHcEwXvP8b1/8TV20UQVEZzf8Tn/8UiaMWqc4VkrEZw/AWsv8Vj7EUqf8YuOITRFYViKUfZVF5AAAACnRSTlMA////////Jt+CR+EzygAAAL9JREFUWMPt2FsOwjAMRNGGuKX0kbL/1bIBQv0YR0Kau4Ejz0+kTBNjjLGxPTptTxwh33uv6cTVXtmEVNhUXQI31dwlYFP1CdhUPwg51nQCNNWMyH+FNhIkhhIFQBQSUltNJup2JF+hEyKEUggQWsFPqAU3oRe8hEFwEhbhjtjjguweopVeMGLAFTbDR5gMJ2ExvITBcBN6w0+ojRviBLwXZ4BQGiFC93bHCEkfisRIYvkPYiGBIRDx/5Mxxsb2AVpUNS9SI1eoAAAAAElFTkSuQmCC",l=[{id:1,src:"box1-126-154.png",width:[71,23],slice:[],repeat:"initial"},{id:2,src:"box2-79-67.png",width:[32,37],slice:["fill"],repeat:"initial"},{id:3,src:"box3-116-115.png",width:[14],slice:["fill"],repeat:"initial"},{id:4,src:"box4-241-138.png",width:[14,100],slice:[],repeat:"initial"},{id:5,src:"box5-689-232.png",width:[46,305,117,33],slice:["fill"],repeat:"repeat"},{id:6,src:"box6-484-101.png",width:[45,103,51,29],slice:["fill"],repeat:"repeat"},{id:7,src:"box7-986-212.png",width:[29,107,109,16],slice:["fill"],repeat:"repeat"},{id:8,src:"box8-492-335.png",width:[15,11,16,8],slice:["fill"],repeat:"repeat"},{id:9,src:"box9-731-407.png",width:[152,27,127,354],slice:["fill"],repeat:"repeat"},{id:10,src:"box10-524-282.png",width:[56,4,76,393],slice:["fill"],repeat:"repeat"},{id:11,src:"box11-592-131.png",width:[17,24,18,19],slice:["fill"],repeat:"repeat"}],d=[{id:1,src:"deco1-1920-1080.gif",size:"100%",position:"left bottom"},{id:2,src:"deco2-1920-1080.gif",size:"100%",position:"center center"},{id:3,src:"deco3-1080-824.gif",size:"100%",position:"right top"},{id:4,src:"deco4-1080-824.gif",size:"100%",position:"right bottom"},{id:5,src:"deco5-1920-1080.gif",size:"100%",position:"left top"},{id:6,src:"deco6-1626-356.gif",size:"100%",position:"center center"},{id:7,src:"deco7-94-1461.gif",size:"contain",position:"left top"},{id:8,src:"deco8-500-54.gif",size:"contain",position:"left top"},{id:9,src:"deco9-500-64.gif",size:"contain",position:"left top"},{id:10,src:"deco10-782-259.gif",size:"contain",position:"left top"},{id:11,src:"deco11-58-36.png",size:"100%",position:"center center"},{id:12,src:"deco12-58-36.png",size:"100%",position:"center center"}];l.map((function(e){return Object(n["a"])(Object(n["a"])({},e),{},{src:"".concat("//files.pengxiaotian.com","/box/").concat(e.src),slice:[].concat(Object(a["a"])(e.width),Object(a["a"])(e.slice))})})),d.map((function(e){return Object(n["a"])(Object(n["a"])({},e),{},{src:"".concat("//files.pengxiaotian.com","/decoration/").concat(e.src)})}))},e0c4:function(e,t,c){"use strict";c("8dea")}}]);
//# sourceMappingURL=create-screen.20e1852c.js.map